<!DOCTYPE html><html><head><meta charset="utf-8">
<script src="assets/d3.min.js"></script>
<script src="http://distill.pub/template.v1.js"></script>
<script type="text/front-matter">
  title: Attention and Augmented Recurrent Neural Networks
  description: A visual overview of neural attention, and the powerful extensions of neural networks being built on top of it.
  authors:
    - Chris Olah: http://colah.github.io
    - Shan Carter: http://shancarter.com
  affiliations:
    - Google Brain: http://g.co/brain
    - Google Brain: http://g.co/brain
</script>

<style>
#previews a {
  text-decoration: none;
  overflow: hidden;
  margin-bottom: 12px;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 12px;
  padding-bottom: 12px;

}
#previews figcaption {
  margin-left: 100px;
}
#previews svg, #previews img {
  width: 80px;
  float: left;
}

@media(min-width: 768px) {
  #previews {
    overflow: hidden;
    margin-top: 48px;
    margin-bottom: 48px;
  }
  #previews figcaption {
    margin-left: 0;
  }
  #previews figcaption b {
    display: block;
  }
  #previews figcaption b span {
    display: block;
  }
  #previews a {
    position: relative;
    float: left;
    width: 19%;
    margin-right: 3.6%;
    padding-right: 3.6%;
    border-right: 1px solid rgba(0, 0, 0, 0.05);
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }
  #previews a:last-child {
    margin-right: 0;
    padding-right: 0;
    border-right: 0;
  }
  #previews svg, #previews img {
    margin-bottom: 18px;
    display: block;
    width: 100%;
    float: none;
  }
}

@media(min-width: 1024px) {
  #previews {
    margin-top: 90px;
    margin-bottom: 90px;
  }
}
</style>

</head><body><dt-article class="centered">
  <h1>Attention and Augmented Recurrent Neural Networks</h1>

  <dt-byline></dt-byline>

  <p>Recurrent neural networks are one of the staples of deep learning, allowing neural networks to work with sequences of data like text, audio and video. They can be used to boil a sequence down into a high-level understanding, to annotate sequences, and even to generate new sequences from scratch!</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_basic_rnn.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 144">
  <defs>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect x="0.06" y="29.93" width="599.94" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect x="0.06" y="29.93" width="599.94" height="72" rx="10" ry="10" fill="none" stroke="#667780"></rect>
    </g>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="13.67" y="43.93" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="13.67" y="43.93" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M42.69,74.93L40.75,70H34.52l-1.91,4.94H30.78l6.14-15.61h1.52l6.11,15.61H42.69Zm-2.5-6.57-1.81-4.82Q38,62.63,37.66,61.3A20.34,20.34,0,0,1,37,63.55l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(11.92 41.18)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="145.67" y="43.93" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="145.67" y="43.93" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M174.69,74.93L172.75,70h-6.23l-1.91,4.94h-1.83l6.14-15.61h1.52l6.11,15.61h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(143.92 41.18)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <rect x="277.67" y="43.93" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="277.67" y="43.93" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M306.69,74.93L304.75,70h-6.23l-1.91,4.94h-1.83l6.14-15.61h1.52l6.11,15.61h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(275.92 41.18)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_4" data-name="<Group>">
    <g opacity="0.1">
      <rect x="409.67" y="43.93" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="409.67" y="43.93" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M438.69,74.93L436.75,70h-6.23l-1.91,4.94h-1.83l6.14-15.61h1.52l6.11,15.61h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(407.92 41.18)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <rect x="540.92" y="43.93" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="540.92" y="43.93" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M569.94,74.93L568,70h-6.23l-1.91,4.94H558l6.14-15.61h1.52l6.11,15.61h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(539.17 41.18)" xlink:href="#rnn-a"></use>
  </g>
  <text transform="translate(17.55 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">x0</text>
  <text transform="translate(41.68 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">y0</text>
  <text transform="translate(149.55 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">x1</text>
  <text transform="translate(173.68 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">y1</text>
  <text transform="translate(281.55 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">x2</text>
  <text transform="translate(305.68 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">y2</text>
  <text transform="translate(413.55 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">x3</text>
  <text transform="translate(437.68 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">y3</text>
  <g opacity="0.6">
    <text transform="translate(8.32 17.93)" font-size="13" font-family="Open Sans">One cell...</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(113.13 17.93)" font-size="13" font-family="Open Sans">can be used over...</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(269.97 17.93)" font-size="13" font-family="Open Sans">and over...</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(401.97 17.93)" font-size="13" font-family="Open Sans">and over...</text>
  </g>
  <g>
    <line x1="60.67" y1="66.43" x2="133.24" y2="66.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M138.67,66.43A27.2,27.2,0,0,0,131,70.71l1.55-4.28L131,62.15A27.18,27.18,0,0,0,138.67,66.43Z" fill="#666"></path>
  </g>
  <g>
    <line x1="24.67" y1="113.93" x2="24.67" y2="100.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M24.67,95A27.2,27.2,0,0,0,29,102.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,24.67,95Z" fill="#666"></path>
  </g>
  <g>
    <line x1="49.67" y1="89.43" x2="49.67" y2="108.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M49.67,113.93a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55L54,106.24A27.18,27.18,0,0,0,49.67,113.93Z" fill="#666"></path>
  </g>
  <g>
    <line x1="156.67" y1="113.93" x2="156.67" y2="100.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M156.67,95a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,156.67,95Z" fill="#666"></path>
  </g>
  <g>
    <line x1="181.67" y1="89.43" x2="181.67" y2="108.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M181.67,113.93a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,181.67,113.93Z" fill="#666"></path>
  </g>
  <g>
    <line x1="289.67" y1="113.93" x2="289.67" y2="100.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M289.67,95a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,289.67,95Z" fill="#666"></path>
  </g>
  <g>
    <line x1="312.67" y1="89.43" x2="312.67" y2="108.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M312.67,113.93a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,312.67,113.93Z" fill="#666"></path>
  </g>
  <g>
    <line x1="420.67" y1="113.93" x2="420.67" y2="100.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M420.67,95a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,420.67,95Z" fill="#666"></path>
  </g>
  <g>
    <line x1="444.67" y1="89.43" x2="444.67" y2="108.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M444.67,113.93a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,444.67,113.93Z" fill="#666"></path>
  </g>
  <g>
    <line x1="192.67" y1="66.43" x2="265.24" y2="66.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M270.67,66.43A27.2,27.2,0,0,0,263,70.71l1.55-4.28L263,62.15A27.18,27.18,0,0,0,270.67,66.43Z" fill="#666"></path>
  </g>
  <g>
    <line x1="324.67" y1="66.43" x2="397.24" y2="66.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M402.67,66.43A27.2,27.2,0,0,0,395,70.71l1.55-4.28L395,62.15A27.18,27.18,0,0,0,402.67,66.43Z" fill="#666"></path>
  </g>
  <text transform="translate(544.8 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">x4</text>
  <text transform="translate(568.93 129.93)" opacity="0.6" font-size="13" font-family="Open Sans">y4</text>
  <g opacity="0.6">
    <text transform="translate(547.02 17.93)" font-size="13" font-family="Open Sans">again.</text>
  </g>
  <g>
    <line x1="551.92" y1="113.93" x2="551.92" y2="100.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M551.92,95a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,551.92,95Z" fill="#666"></path>
  </g>
  <g>
    <line x1="575.92" y1="89.43" x2="575.92" y2="108.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M575.92,113.93a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,575.92,113.93Z" fill="#666"></path>
  </g>
  <g>
    <line x1="455.92" y1="66.43" x2="528.49" y2="66.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M533.92,66.43a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,533.92,66.43Z" fill="#666"></path>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>The basic RNN design struggles with longer sequences, but a special variant--<a href="http://colah.github.io/posts/2015-08-Understanding-LSTMs/">"long short-term memory" networks</a> <dt-cite key="olah2015understanding"></dt-cite>--can even work with these. Such models have been found to be very powerful, achieving remarkable results in many tasks including translation, voice recognition, and image captioning. As a result, recurrent neural networks have become very widespread in the last few years.</p>

  <p>As this has happened, we’ve seen a growing number of attempts to augment RNNs with new properties. Four directions stand out as particularly exciting:</p>

  <figure class="l-middle" id="previews">
    <a href="#neural-turing-machines">
      <img src="assets/rnn_preview_ntm.svg">
      <figcaption><b><span>Neural Turing</span> Machines</b> have external memory that they can read and write to.</figcaption>
    </a>
    <a href="#attentional-interfaces">
      <img src="assets/rnn_preview_ai.svg">
      <figcaption><b><span>Attentional</span> Interfaces</b> allow RNNs to focus on parts of their input.</figcaption>
    </a>
    <a href="#adaptive-computation-time">
      <img src="assets/rnn_preview_act.svg">
      <figcaption><b><span>Adaptive</span> Computation Time</b> allows for varying amounts of computation per step.</figcaption>
    </a>
    <a href="#neural-programmer">
      <img src="assets/rnn_preview_np.svg">
      <figcaption><b><span>Neural</span> Programmers</b> can call functions, building programs as they run.</figcaption>
    </a>
  </figure>

  <style>
    #previews a {
      text-decoration: none;
      overflow: hidden;
      margin-bottom: 12px;
      display: block;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      margin-bottom: 12px;
      padding-bottom: 12px;

  }
    #previews figcaption {
      margin-left: 100px;
    }
    #previews svg, #previews img {
      width: 80px;
      float: left;
    }

  @media(min-width: 768px) {
      #previews {
        overflow: hidden;
        margin-top: 48px;
        margin-bottom: 48px;
      }
      #previews figcaption {
        margin-left: 0;
      }
      #previews figcaption b {
        display: block;
      }
      #previews figcaption b span {
        display: block;
      }
      #previews a {
        position: relative;
        float: left;
        width: 19%;
        margin-right: 3.6%;
        padding-right: 3.6%;
        border-right: 1px solid rgba(0, 0, 0, 0.05);
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }
      #previews a:last-child {
        margin-right: 0;
        padding-right: 0;
        border-right: 0;
      }
      #previews svg, #previews img {
        margin-bottom: 18px;
        display: block;
        width: 100%;
        float: none;
      }
    }

  @media(min-width: 1024px) {
    #previews {
      margin-top: 90px;
      margin-bottom: 90px;
    }
  }
  </style>

  <p>Individually, these techniques are all potent extensions of RNNs, but the really striking thing is that they can be combined, and seem to just be points in a broader space. Further, they all rely on the same underlying trick--something called attention--to work.</p>

  <p>Our guess is that these "augmented RNNs" will have an important role to play in extending deep learning's capabilities over the coming years.</p>

  <hr>

  <h2 id="neural-turing-machines">Neural Turing Machines</h2>

  <p>Neural Turing Machines <dt-cite key="graves2014neural"></dt-cite> combine a RNN with an external memory bank. Since vectors are the natural language of neural networks, the memory is an array of vectors:</p>

  <p></p><figure class="l-body-outset" id="rnn-memory">
    <dt-include src="assets/rnn_memory.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 312">
  <defs>
    <symbol id="array-small" data-name="array-small" viewBox="0 0 152.83 31.66">
      <rect x="0.75" y="0.75" width="151.33" height="30.16" rx="6" ry="6" fill="#e5daf2" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
      <line x1="30.7" y1="30.91" x2="30.7" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="60.86" y1="30.91" x2="60.86" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="91.03" y1="30.91" x2="91.03" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="121.19" y1="30.91" x2="121.19" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
    <symbol id="op-read" data-name="op-read" viewBox="0 0 49.54 25.5">
      <g id="_Group_4" data-name="<Group>">
        <g>
          <path d="M48.83,12.75a12,12,0,0,1-12,12H12.71a12,12,0,1,1,0-24H36.83a12,12,0,0,1,12,12h0Z" fill="#e5daf2"></path>
          <path d="M49.54,13.5a12,12,0,0,1-12,12H12a12,12,0,0,1-12-12V12A12,12,0,0,1,12,0H37.54a12,12,0,0,1,12,12v1.5ZM1.43,12.75c0,6.19,5.4,11.25,12,11.25H36.12c6.6,0,12-5.06,12-11.25S42.72,1.5,36.12,1.5H13.43C6.83,1.5,1.43,6.56,1.43,12.75Z" fill="#666"></path>
        </g>
      </g>
      <g>
        <path d="M16.25,9.67a3.31,3.31,0,0,1,.69.06L16.8,11a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4v3.39H13V9.79H14l0.18,1.14h0.07A2.57,2.57,0,0,1,15.13,10,2,2,0,0,1,16.25,9.67Z" fill="#666"></path>
        <path d="M21,16.38a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74H19.16a2.13,2.13,0,0,0,.51,1.45,1.78,1.78,0,0,0,1.35.51,5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,21,16.38Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,20.71,10.71Z" fill="#666"></path>
        <path d="M29.1,16.27l-0.28-.9h0a2.65,2.65,0,0,1-.94.81,3,3,0,0,1-1.22.21,2.06,2.06,0,0,1-1.49-.52,1.93,1.93,0,0,1-.54-1.46,1.71,1.71,0,0,1,.74-1.51,4.29,4.29,0,0,1,2.27-.56l1.12,0V12A1.31,1.31,0,0,0,28.43,11a1.18,1.18,0,0,0-.9-0.31,3.11,3.11,0,0,0-1,.15,7.21,7.21,0,0,0-.88.35l-0.45-1a4.79,4.79,0,0,1,1.15-.42,5.31,5.31,0,0,1,1.18-.14,2.8,2.8,0,0,1,1.87.54,2.11,2.11,0,0,1,.63,1.69v4.37h-1Zm-2.05-.94a1.71,1.71,0,0,0,1.2-.42,1.52,1.52,0,0,0,.45-1.17V13.17l-0.83,0a2.85,2.85,0,0,0-1.42.33,1,1,0,0,0-.44.89,0.87,0.87,0,0,0,.26.67A1.11,1.11,0,0,0,27.05,15.33Z" fill="#666"></path>
        <path d="M34.19,16.38a2.26,2.26,0,0,1-1.89-.88A4,4,0,0,1,31.62,13a4,4,0,0,1,.69-2.48,2.28,2.28,0,0,1,1.91-.89,2.23,2.23,0,0,1,1.95.94h0.07a8.25,8.25,0,0,1-.1-1.1V7.15h1.38v9.12H36.44l-0.24-.85H36.13A2.2,2.2,0,0,1,34.19,16.38Zm0.37-1.11a1.5,1.5,0,0,0,1.24-.48,2.51,2.51,0,0,0,.4-1.55V13a2.9,2.9,0,0,0-.4-1.74,1.48,1.48,0,0,0-1.25-.52,1.27,1.27,0,0,0-1.12.59A3,3,0,0,0,33,13.06a2.94,2.94,0,0,0,.38,1.64A1.29,1.29,0,0,0,34.56,15.27Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-write" data-name="op-write" viewBox="0 0 49.54 25.5">
      <g id="_Group_6" data-name="<Group>">
        <g>
          <path d="M48.83,12.75a12,12,0,0,1-12,12H12.71a12,12,0,1,1,0-24H36.83a12,12,0,0,1,12,12h0Z" fill="#e5daf2"></path>
          <path d="M49.54,13.5a12,12,0,0,1-12,12H12a12,12,0,0,1-12-12V12A12,12,0,0,1,12,0H37.54a12,12,0,0,1,12,12v1.5ZM1.43,12.75c0,6.19,5.4,11.25,12,11.25H36.12c6.6,0,12-5.06,12-11.25S42.72,1.5,36.12,1.5H13.43C6.83,1.5,1.43,6.56,1.43,12.75Z" fill="#666"></path>
        </g>
      </g>
      <g>
        <path d="M16.74,16.25l-0.84-3q-0.15-.48-0.55-2.23H15.3q-0.34,1.58-.54,2.24l-0.86,3H12.37L10.56,9.77H12L12.79,13q0.28,1.18.4,2h0q0.06-.43.18-1t0.21-.83l1-3.41h1.51l1,3.41q0.09,0.29.22,0.88a6.76,6.76,0,0,1,.16.92h0a18,18,0,0,1,.41-2l0.84-3.19h1.38l-1.83,6.48H16.74Z" fill="#666"></path>
        <path d="M24.51,9.65a3.31,3.31,0,0,1,.69.06L25.06,11a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4v3.39H21.23V9.77H22.3l0.18,1.14h0.07A2.57,2.57,0,0,1,23.4,10,2,2,0,0,1,24.51,9.65Z" fill="#666"></path>
        <path d="M26.32,8.05a0.76,0.76,0,0,1,.2-0.57,0.79,0.79,0,0,1,.58-0.2,0.77,0.77,0,0,1,.57.2,0.76,0.76,0,0,1,.2.57,0.75,0.75,0,0,1-.2.55,0.76,0.76,0,0,1-.57.2,0.78,0.78,0,0,1-.58-0.2A0.75,0.75,0,0,1,26.32,8.05Zm1.46,8.2H26.4V9.77h1.38v6.48Z" fill="#666"></path>
        <path d="M32.16,15.25a3.35,3.35,0,0,0,1-.16v1a2.78,2.78,0,0,1-.59.17,4.06,4.06,0,0,1-.75.07,1.78,1.78,0,0,1-2-2.06V10.81H29V10.2l0.95-.5,0.47-1.37h0.85V9.77H33.1v1H31.26v3.47a1,1,0,0,0,.25.74A0.91,0.91,0,0,0,32.16,15.25Z" fill="#666"></path>
        <path d="M37.29,16.37a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5A2.73,2.73,0,0,1,37,9.65a2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74H35.49A2.13,2.13,0,0,0,36,14.77a1.78,1.78,0,0,0,1.35.51,5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,37.29,16.37ZM37,10.7a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,37,10.7Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="array-vector" data-name="array-vector" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#d8c2f2" opacity="0"></rect>
      <g opacity="0.5">
        <g>
          <line x1="18" y1="24" x2="18" y2="13.08" fill="none" stroke="#000" stroke-miterlimit="10"></line>
          <polygon points="22.09 16.4 21.36 17.08 18 13.47 14.64 17.08 13.91 16.4 18 12 22.09 16.4"></polygon>
        </g>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect x="48" y="192" width="648" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect x="48" y="192" width="648" height="72" rx="10" ry="10" fill="none" stroke="#667780"></rect>
    </g>
  </g>
  <use id="array-small-3" data-name="array-small" width="152.83" height="31.66" transform="translate(0 35.44)" xlink:href="#array-small"></use>
  <use width="152.83" height="31.66" transform="translate(193.08 35.44)" xlink:href="#array-small"></use>
  <use width="152.83" height="31.66" transform="translate(385.08 35.44)" xlink:href="#array-small"></use>
  <use id="array-small-10" data-name="array-small" width="152.83" height="31.66" transform="translate(577.08 35.44)" xlink:href="#array-small"></use>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="637.64" y="206" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="637.64" y="206" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M666.66,237l-1.93-4.94h-6.23L656.58,237h-1.83l6.14-15.61h1.52L668.53,237h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(635.89 203.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <path d="M100,72l29.83,29c3.94,3.84,11.67,7,17.17,7h40.89c5.5,0,13.1-3.27,16.88-7.26l23.5-24.8" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M232,72a27.2,27.2,0,0,0-2.18,8.53l-2-4.07-4.17-1.82A27.18,27.18,0,0,0,232,72Z" fill="#666"></path>
  </g>
  <g>
    <path d="M250,72l-34.93,34.93C211.18,110.82,208,118.5,208,124v46c0,5.5,3.18,13.18,7.07,17.07l25.09,25.09" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M244,216a27.2,27.2,0,0,0-8.47-2.41l4.12-1.93,1.93-4.12A27.17,27.17,0,0,0,244,216Z" fill="#666"></path>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <path d="M239.83,145.5a12,12,0,0,1-12,12H203.71a12,12,0,0,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M240.54,146.25a12,12,0,0,1-12,12H203a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12h25.54a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H204.43C197.83,134.25,192.43,139.31,192.43,145.5Z"></path>
      <path d="M207.25,142.42a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V149H204v-6.48H205l0.18,1.14h0.07a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,207.25,142.42Z"></path>
      <path d="M212,149.13a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45A1.78,1.78,0,0,0,212,148a5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,212,149.13Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,211.71,143.46Z"></path>
      <path d="M220.1,149l-0.28-.9h0a2.65,2.65,0,0,1-.94.81,3,3,0,0,1-1.22.21,2.06,2.06,0,0,1-1.49-.52,1.93,1.93,0,0,1-.54-1.46,1.71,1.71,0,0,1,.74-1.51,4.29,4.29,0,0,1,2.27-.56l1.12,0v-0.35a1.31,1.31,0,0,0-.29-0.93,1.18,1.18,0,0,0-.9-0.31,3.11,3.11,0,0,0-1,.15,7.21,7.21,0,0,0-.88.35l-0.45-1a4.79,4.79,0,0,1,1.15-.42,5.31,5.31,0,0,1,1.18-.14,2.8,2.8,0,0,1,1.87.54,2.11,2.11,0,0,1,.63,1.69V149h-1Zm-2.05-.94a1.71,1.71,0,0,0,1.2-.42,1.52,1.52,0,0,0,.45-1.17v-0.56l-0.83,0a2.85,2.85,0,0,0-1.42.33,1,1,0,0,0-.44.89,0.87,0.87,0,0,0,.26.67A1.11,1.11,0,0,0,218.05,148.08Z"></path>
      <path d="M225.19,149.13a2.26,2.26,0,0,1-1.89-.88,4.82,4.82,0,0,1,0-4.95,2.28,2.28,0,0,1,1.91-.89,2.23,2.23,0,0,1,1.95.94h0.07a8.25,8.25,0,0,1-.1-1.1V139.9h1.38V149h-1.08l-0.24-.85h-0.06A2.2,2.2,0,0,1,225.19,149.13Zm0.37-1.11a1.5,1.5,0,0,0,1.24-.48,2.51,2.51,0,0,0,.4-1.55V145.8a2.9,2.9,0,0,0-.4-1.74,1.48,1.48,0,0,0-1.25-.52,1.27,1.27,0,0,0-1.12.59,3,3,0,0,0-.39,1.68,2.94,2.94,0,0,0,.38,1.64A1.29,1.29,0,0,0,225.56,148Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(190 130.75)" xlink:href="#op-read"></use>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <path d="M196.29,110.5a12,12,0,0,1-12,12H160.17a12,12,0,1,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M197,111.25a12,12,0,0,1-12,12H159.46a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12H185a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H160.88C154.28,99.25,148.88,104.31,148.88,110.5Z"></path>
      <path d="M164.19,114l-0.84-3q-0.15-.48-0.55-2.23h-0.05q-0.34,1.58-.54,2.24l-0.86,3h-1.52L158,107.52h1.41l0.83,3.19q0.28,1.18.4,2h0q0.06-.43.18-1t0.21-.83l1-3.41h1.51l1,3.41q0.09,0.29.22,0.88a6.76,6.76,0,0,1,.16.92h0a18,18,0,0,1,.41-2l0.84-3.19h1.38L165.74,114h-1.55Z"></path>
      <path d="M172,107.4a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V114h-1.38v-6.48h1.08l0.18,1.14H170a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,172,107.4Z"></path>
      <path d="M173.77,105.8a0.76,0.76,0,0,1,.2-0.57,0.79,0.79,0,0,1,.58-0.2,0.77,0.77,0,0,1,.57.2,0.76,0.76,0,0,1,.2.57,0.75,0.75,0,0,1-.2.55,0.76,0.76,0,0,1-.57.2,0.78,0.78,0,0,1-.58-0.2A0.75,0.75,0,0,1,173.77,105.8Zm1.46,8.2h-1.38v-6.48h1.38V114Z"></path>
      <path d="M179.62,113a3.35,3.35,0,0,0,1-.16v1a2.78,2.78,0,0,1-.59.17,4.06,4.06,0,0,1-.75.07,1.78,1.78,0,0,1-2-2.06v-3.49h-0.88V108l0.95-.5,0.47-1.37h0.85v1.44h1.85v1h-1.85V112a1,1,0,0,0,.25.74A0.91,0.91,0,0,0,179.62,113Z"></path>
      <path d="M184.75,114.12a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45,1.78,1.78,0,0,0,1.35.51,5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,184.75,114.12Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,184.5,108.45Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(146.46 95.75)" xlink:href="#op-write"></use>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M100,204l64.93-64.93c3.45-3.45,6.35-7.94,7-10.64" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M172,123a27.2,27.2,0,0,0,3.93,7.88l-4.21-1.74-4.34,1.36A27.17,27.17,0,0,0,172,123Z" fill="#666"></path>
    </g>
  </g>
  <g>
    <path d="M292,72l29.83,29c3.94,3.84,11.67,7,17.17,7h40.89c5.5,0,13.1-3.27,16.88-7.26l23.5-24.8" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M424,72a27.2,27.2,0,0,0-2.18,8.53l-2-4.07-4.17-1.82A27.18,27.18,0,0,0,424,72Z" fill="#666"></path>
  </g>
  <g>
    <path d="M442,72l-34,34.84c-3.84,3.94-7,11.66-7,17.16v46c0,5.5,3.14,13.23,7,17.17l24.24,24.94" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M436,216a27.2,27.2,0,0,0-8.43-2.53l4.15-1.87,2-4.09A27.18,27.18,0,0,0,436,216Z" fill="#666"></path>
  </g>
  <g id="_Group_7" data-name="<Group>">
    <g opacity="0.1">
      <path d="M431.83,145.5a12,12,0,0,1-12,12H395.71a12,12,0,0,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M432.54,146.25a12,12,0,0,1-12,12H395a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12h25.54a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H396.43C389.83,134.25,384.43,139.31,384.43,145.5Z"></path>
      <path d="M399.25,142.42a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V149H396v-6.48H397l0.18,1.14h0.07a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,399.25,142.42Z"></path>
      <path d="M404,149.13a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45A1.78,1.78,0,0,0,404,148a5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,404,149.13Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,403.71,143.46Z"></path>
      <path d="M412.1,149l-0.28-.9h0a2.65,2.65,0,0,1-.94.81,3,3,0,0,1-1.22.21,2.06,2.06,0,0,1-1.49-.52,1.93,1.93,0,0,1-.54-1.46,1.71,1.71,0,0,1,.74-1.51,4.29,4.29,0,0,1,2.27-.56l1.12,0v-0.35a1.31,1.31,0,0,0-.29-0.93,1.18,1.18,0,0,0-.9-0.31,3.11,3.11,0,0,0-1,.15,7.21,7.21,0,0,0-.88.35l-0.45-1a4.79,4.79,0,0,1,1.15-.42,5.31,5.31,0,0,1,1.18-.14,2.8,2.8,0,0,1,1.87.54,2.11,2.11,0,0,1,.63,1.69V149h-1Zm-2.05-.94a1.71,1.71,0,0,0,1.2-.42,1.52,1.52,0,0,0,.45-1.17v-0.56l-0.83,0a2.85,2.85,0,0,0-1.42.33,1,1,0,0,0-.44.89,0.87,0.87,0,0,0,.26.67A1.11,1.11,0,0,0,410.05,148.08Z"></path>
      <path d="M417.19,149.13a2.26,2.26,0,0,1-1.89-.88,4.82,4.82,0,0,1,0-4.95,2.28,2.28,0,0,1,1.91-.89,2.23,2.23,0,0,1,1.95.94h0.07a8.25,8.25,0,0,1-.1-1.1V139.9h1.38V149h-1.08l-0.24-.85h-0.06A2.2,2.2,0,0,1,417.19,149.13Zm0.37-1.11a1.5,1.5,0,0,0,1.24-.48,2.51,2.51,0,0,0,.4-1.55V145.8a2.9,2.9,0,0,0-.4-1.74,1.48,1.48,0,0,0-1.25-.52,1.27,1.27,0,0,0-1.12.59,3,3,0,0,0-.39,1.68,2.94,2.94,0,0,0,.38,1.64A1.29,1.29,0,0,0,417.56,148Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(382 130.75)" xlink:href="#op-read"></use>
  </g>
  <g id="_Group_9" data-name="<Group>">
    <g opacity="0.1">
      <path d="M388.29,110.5a12,12,0,0,1-12,12H352.17a12,12,0,1,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M389,111.25a12,12,0,0,1-12,12H351.46a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12H377a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H352.88C346.28,99.25,340.88,104.31,340.88,110.5Z"></path>
      <path d="M356.19,114l-0.84-3q-0.15-.48-0.55-2.23h-0.05q-0.34,1.58-.54,2.24l-0.86,3h-1.52L350,107.52h1.41l0.83,3.19q0.28,1.18.4,2h0q0.06-.43.18-1t0.21-.83l1-3.41h1.51l1,3.41q0.09,0.29.22,0.88a6.76,6.76,0,0,1,.16.92h0a18,18,0,0,1,.41-2l0.84-3.19h1.38L357.74,114h-1.55Z"></path>
      <path d="M364,107.4a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V114h-1.38v-6.48h1.08l0.18,1.14H362a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,364,107.4Z"></path>
      <path d="M365.77,105.8a0.76,0.76,0,0,1,.2-0.57,0.79,0.79,0,0,1,.58-0.2,0.77,0.77,0,0,1,.57.2,0.76,0.76,0,0,1,.2.57,0.75,0.75,0,0,1-.2.55,0.76,0.76,0,0,1-.57.2,0.78,0.78,0,0,1-.58-0.2A0.75,0.75,0,0,1,365.77,105.8Zm1.46,8.2h-1.38v-6.48h1.38V114Z"></path>
      <path d="M371.62,113a3.35,3.35,0,0,0,1-.16v1a2.78,2.78,0,0,1-.59.17,4.06,4.06,0,0,1-.75.07,1.78,1.78,0,0,1-2-2.06v-3.49h-0.88V108l0.95-.5,0.47-1.37h0.85v1.44h1.85v1h-1.85V112a1,1,0,0,0,.25.74A0.91,0.91,0,0,0,371.62,113Z"></path>
      <path d="M376.75,114.12a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45,1.78,1.78,0,0,0,1.35.51,5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,376.75,114.12Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,376.5,108.45Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(338.46 95.75)" xlink:href="#op-write"></use>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M292,204l64.93-64.93c3.7-3.7,6.75-8.78,7-11.64" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M364,122a27.2,27.2,0,0,0,4.13,7.77l-4.25-1.63-4.31,1.46A27.18,27.18,0,0,0,364,122Z" fill="#666"></path>
    </g>
  </g>
  <g>
    <path d="M484,72l29.83,29c3.94,3.84,11.67,7,17.17,7h40.89c5.5,0,13.1-3.27,16.88-7.26l23.5-24.8" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M616,72a27.2,27.2,0,0,0-2.18,8.53l-2-4.07-4.17-1.82A27.18,27.18,0,0,0,616,72Z" fill="#666"></path>
  </g>
  <g>
    <path d="M634,72l-34.93,34.93C595.18,110.82,592,118.5,592,124v46c0,5.5,3.18,13.18,7.07,17.07l25.09,25.09" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M628,216a27.2,27.2,0,0,0-8.47-2.41l4.12-1.93,1.93-4.12A27.18,27.18,0,0,0,628,216Z" fill="#666"></path>
  </g>
  <g id="_Group_11" data-name="<Group>">
    <g opacity="0.1">
      <path d="M623.83,145.5a12,12,0,0,1-12,12H587.71a12,12,0,0,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M624.54,146.25a12,12,0,0,1-12,12H587a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12h25.54a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H588.43C581.83,134.25,576.43,139.31,576.43,145.5Z"></path>
      <path d="M591.25,142.42a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V149H588v-6.48H589l0.18,1.14h0.07a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,591.25,142.42Z"></path>
      <path d="M596,149.13a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45A1.78,1.78,0,0,0,596,148a5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,596,149.13Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,595.71,143.46Z"></path>
      <path d="M604.1,149l-0.28-.9h0a2.65,2.65,0,0,1-.94.81,3,3,0,0,1-1.22.21,2.06,2.06,0,0,1-1.49-.52,1.93,1.93,0,0,1-.54-1.46,1.71,1.71,0,0,1,.74-1.51,4.29,4.29,0,0,1,2.27-.56l1.12,0v-0.35a1.31,1.31,0,0,0-.29-0.93,1.18,1.18,0,0,0-.9-0.31,3.11,3.11,0,0,0-1,.15,7.21,7.21,0,0,0-.88.35l-0.45-1a4.79,4.79,0,0,1,1.15-.42,5.31,5.31,0,0,1,1.18-.14,2.8,2.8,0,0,1,1.87.54,2.11,2.11,0,0,1,.63,1.69V149h-1Zm-2.05-.94a1.71,1.71,0,0,0,1.2-.42,1.52,1.52,0,0,0,.45-1.17v-0.56l-0.83,0a2.85,2.85,0,0,0-1.42.33,1,1,0,0,0-.44.89,0.87,0.87,0,0,0,.26.67A1.11,1.11,0,0,0,602.05,148.08Z"></path>
      <path d="M609.19,149.13a2.26,2.26,0,0,1-1.89-.88,4.82,4.82,0,0,1,0-4.95,2.28,2.28,0,0,1,1.91-.89,2.23,2.23,0,0,1,1.95.94h0.07a8.25,8.25,0,0,1-.1-1.1V139.9h1.38V149h-1.08l-0.24-.85h-0.06A2.2,2.2,0,0,1,609.19,149.13Zm0.37-1.11a1.5,1.5,0,0,0,1.24-.48,2.51,2.51,0,0,0,.4-1.55V145.8a2.9,2.9,0,0,0-.4-1.74,1.48,1.48,0,0,0-1.25-.52,1.27,1.27,0,0,0-1.12.59,3,3,0,0,0-.39,1.68,2.94,2.94,0,0,0,.38,1.64A1.29,1.29,0,0,0,609.56,148Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(574 130.75)" xlink:href="#op-read"></use>
  </g>
  <g id="_Group_13" data-name="<Group>">
    <g opacity="0.1">
      <path d="M580.29,110.5a12,12,0,0,1-12,12H544.17a12,12,0,1,1,0-24h24.12a12,12,0,0,1,12,12h0Z"></path>
      <path d="M581,111.25a12,12,0,0,1-12,12H543.46a12,12,0,0,1-12-12v-1.5a12,12,0,0,1,12-12H569a12,12,0,0,1,12,12v1.5Zm-48.12-.75c0,6.19,5.4,11.25,12,11.25h22.69c6.6,0,12-5.06,12-11.25s-5.4-11.25-12-11.25H544.88C538.28,99.25,532.88,104.31,532.88,110.5Z"></path>
      <path d="M548.19,114l-0.84-3q-0.15-.48-0.55-2.23h-0.05q-0.34,1.58-.54,2.24l-0.86,3h-1.52L542,107.52h1.41l0.83,3.19q0.28,1.18.4,2h0q0.06-.43.18-1t0.21-.83l1-3.41h1.51l1,3.41q0.09,0.29.22,0.88a6.76,6.76,0,0,1,.16.92h0a18,18,0,0,1,.41-2l0.84-3.19h1.38L549.74,114h-1.55Z"></path>
      <path d="M556,107.4a3.31,3.31,0,0,1,.69.06l-0.13,1.28a2.6,2.6,0,0,0-.61-0.07,1.76,1.76,0,0,0-1.34.54,2,2,0,0,0-.51,1.4V114h-1.38v-6.48h1.08l0.18,1.14H554a2.57,2.57,0,0,1,.84-0.92A2,2,0,0,1,556,107.4Z"></path>
      <path d="M557.77,105.8a0.76,0.76,0,0,1,.2-0.57,0.79,0.79,0,0,1,.58-0.2,0.77,0.77,0,0,1,.57.2,0.76,0.76,0,0,1,.2.57,0.75,0.75,0,0,1-.2.55,0.76,0.76,0,0,1-.57.2,0.78,0.78,0,0,1-.58-0.2A0.75,0.75,0,0,1,557.77,105.8Zm1.46,8.2h-1.38v-6.48h1.38V114Z"></path>
      <path d="M563.62,113a3.35,3.35,0,0,0,1-.16v1a2.78,2.78,0,0,1-.59.17,4.06,4.06,0,0,1-.75.07,1.78,1.78,0,0,1-2-2.06v-3.49h-0.88V108l0.95-.5,0.47-1.37h0.85v1.44h1.85v1h-1.85V112a1,1,0,0,0,.25.74A0.91,0.91,0,0,0,563.62,113Z"></path>
      <path d="M568.75,114.12a3.13,3.13,0,0,1-2.36-.88,3.35,3.35,0,0,1-.85-2.43,3.67,3.67,0,0,1,.79-2.5,2.73,2.73,0,0,1,2.17-.91,2.67,2.67,0,0,1,2,.78,3,3,0,0,1,.74,2.14v0.74h-4.32a2.13,2.13,0,0,0,.51,1.45,1.78,1.78,0,0,0,1.35.51,5,5,0,0,0,1.07-.11,5.61,5.61,0,0,0,1.06-.36v1.12a4.23,4.23,0,0,1-1,.34A6.25,6.25,0,0,1,568.75,114.12Zm-0.25-5.67a1.38,1.38,0,0,0-1.05.42,2,2,0,0,0-.47,1.21h2.94a1.79,1.79,0,0,0-.39-1.22A1.32,1.32,0,0,0,568.5,108.45Z"></path>
    </g>
    <use width="49.54" height="25.5" transform="translate(530.46 95.75)" xlink:href="#op-write"></use>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M484,204l64.93-64.93c3.7-3.7,6.75-8.78,7-11.64" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M556,122a27.2,27.2,0,0,0,4.13,7.77l-4.25-1.63-4.31,1.46A27.18,27.18,0,0,0,556,122Z" fill="#666"></path>
    </g>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M106,217l65-65.88c3.67-3.72,8.74-6.8,11.59-7.1" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M188,144a27.2,27.2,0,0,0-7.61,4.43l1.46-4.31-1.63-4.25A27.18,27.18,0,0,0,188,144Z" fill="#666"></path>
    </g>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M298,217l65-65.88c3.67-3.72,8.74-6.8,11.59-7.1" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M380,144a27.2,27.2,0,0,0-7.61,4.43l1.46-4.31-1.63-4.25A27.18,27.18,0,0,0,380,144Z" fill="#666"></path>
    </g>
  </g>
  <g opacity="0.4">
    <g>
      <path d="M490,217l65-65.88c3.67-3.72,8.74-6.8,11.59-7.1" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M572,144a27.2,27.2,0,0,0-7.61,4.43l1.46-4.31-1.63-4.25A27.18,27.18,0,0,0,572,144Z" fill="#666"></path>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="252.14" y="206" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="252.14" y="206" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M281.16,237l-1.93-4.94H273L271.08,237h-1.83l6.14-15.61h1.52L283,237h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(250.39 203.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="445.64" y="206" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="445.64" y="206" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M474.66,237l-1.93-4.94h-6.23L464.58,237h-1.83l6.14-15.61h1.52L476.53,237h-1.87Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(443.89 203.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="61.64" y="206" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="61.64" y="206" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M90.66,237l-1.93-4.94H82.49L80.58,237H78.75l6.14-15.61h1.52L92.53,237H90.66Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(59.89 203.25)" xlink:href="#rnn-a"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(0 22)" font-size="13" font-family="Open Sans">Memory is an array of vectors.</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(0.16 104.14)" font-size="13" font-family="Open Sans">Network A <tspan x="0" y="20">writes and reads </tspan><tspan x="0" y="40">from this memory </tspan><tspan x="0" y="60">each step.</tspan></text>
  </g>
  <g>
    <line x1="106.89" y1="228" x2="240.21" y2="228" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M245.64,228a27.2,27.2,0,0,0-7.69,4.28L239.5,228l-1.55-4.28A27.18,27.18,0,0,0,245.64,228Z" fill="#666"></path>
  </g>
  <g>
    <line x1="298.89" y1="228" x2="432.21" y2="228" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M437.64,228a27.2,27.2,0,0,0-7.69,4.28L431.5,228l-1.55-4.28A27.17,27.17,0,0,0,437.64,228Z" fill="#666"></path>
  </g>
  <g>
    <line x1="490.89" y1="228" x2="624.21" y2="228" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M629.64,228a27.2,27.2,0,0,0-7.69,4.28L623.5,228l-1.55-4.28A27.17,27.17,0,0,0,629.64,228Z" fill="#666"></path>
  </g>
  <g opacity="0.6">
    <text transform="translate(67.27 294)" font-size="13" font-family="Open Sans">x0</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(91.4 294)" font-size="13" font-family="Open Sans">y0</text>
  </g>
  <g>
    <line x1="73.39" y1="279.08" x2="73.39" y2="262.01" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M73.39,256.58a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,73.39,256.58Z" fill="#666"></path>
  </g>
  <g>
    <line x1="97.39" y1="252.58" x2="97.39" y2="273.65" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M97.39,279.08a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,97.39,279.08Z" fill="#666"></path>
  </g>
  <g>
    <line x1="262.39" y1="280.41" x2="262.39" y2="262.01" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M262.39,256.58a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,262.39,256.58Z" fill="#666"></path>
  </g>
  <g>
    <line x1="287.39" y1="252.58" x2="287.39" y2="274.98" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M287.39,280.41a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,287.39,280.41Z" fill="#666"></path>
  </g>
  <g>
    <line x1="455.22" y1="280.41" x2="455.22" y2="262.01" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M455.22,256.58a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,455.22,256.58Z" fill="#666"></path>
  </g>
  <g>
    <line x1="480.22" y1="252.58" x2="480.22" y2="274.98" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M480.22,280.41a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,480.22,280.41Z" fill="#666"></path>
  </g>
  <g opacity="0.6">
    <text transform="translate(254.93 294)" font-size="13" font-family="Open Sans">x1</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(279.06 294)" font-size="13" font-family="Open Sans">y1</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(447.77 294)" font-size="13" font-family="Open Sans">x2</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(471.9 294)" font-size="13" font-family="Open Sans">y2</text>
  </g>
  <g>
    <line x1="647.22" y1="280.41" x2="647.22" y2="262.01" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M647.22,256.58a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,647.22,256.58Z" fill="#666"></path>
  </g>
  <g>
    <line x1="672.22" y1="252.58" x2="672.22" y2="274.98" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M672.22,280.41a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,672.22,280.41Z" fill="#666"></path>
  </g>
  <g opacity="0.6">
    <text transform="translate(639.77 294)" font-size="13" font-family="Open Sans">x3</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(663.9 294)" font-size="13" font-family="Open Sans">y3</text>
  </g>
  <use width="36" height="36" transform="translate(1.33 34.96) scale(0.83)" xlink:href="#array-vector"></use>
  <use id="array-vector-5" data-name="array-vector" width="36" height="36" transform="translate(31.37 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(61.41 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use id="array-vector-10" data-name="array-vector" width="36" height="36" transform="translate(91.46 35.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 208.35, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(223.37 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(253.41 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(283.46 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 400.35, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 430.39, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(445.41 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(475.46 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 592.35, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 622.39, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="matrix(0.59, 0.59, -0.59, 0.59, 652.43, 30)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(667.46 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(121.33 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(313.33 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(505.33 36.22) scale(0.83)" xlink:href="#array-vector"></use>
  <use width="36" height="36" transform="translate(697.33 36.22) scale(0.83)" xlink:href="#array-vector"></use>
</svg>
</dt-include>
  </figure><p></p>

  <p>But how does reading and writing work? The challenge is that we want to make them differentiable. In particular, we want to make them differentiable with respect to the location we read from or write to, so that we can learn where to read and write. This is tricky because memory addresses seem to be fundamentally discrete. NTMs take a very clever solution to this: every step, they read and write everywhere, just to different extents.</p>

  <p>As an example, let’s focus on reading. Instead of specifying a single location, the RNN outputs an “attention distribution” that describes how we spread out the amount we care about different memory positions. As such, the result of the read operation is a weighted sum.</p>

  <p></p><figure class="l-body-outset" id="rnn-read">
    <dt-include src="assets/rnn_read.svg"><svg id="edges" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 252">
  <defs>
    <symbol id="array-7" data-name="array-7" viewBox="0 0 253.5 37.5">
      <rect x="0.75" y="0.75" width="252" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
      <line x1="36.25" y1="36.75" x2="36.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="72.25" y1="36.75" x2="72.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="108.25" y1="36.75" x2="108.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="144.25" y1="36.75" x2="144.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="180.25" y1="36.75" x2="180.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="216.25" y1="36.75" x2="216.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
    </symbol>
    <symbol id="array-1" data-name="array-1" viewBox="0 0 37.5 37.5">
      <rect x="0.75" y="0.75" width="36" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="array-vector" data-name="array-vector" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#d8c2f2" opacity="0"></rect>
      <g opacity="0.5">
        <g>
          <line x1="18" y1="24" x2="18" y2="13.08" fill="none" stroke="#000" stroke-miterlimit="10"></line>
          <polygon points="22.09 16.4 21.36 17.08 18 13.47 14.64 17.08 13.91 16.4 18 12 22.09 16.4"></polygon>
        </g>
      </g>
    </symbol>
    <symbol id="array-positive-value" data-name="array-positive-value" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#0080f7" opacity="0"></rect>
      <rect x="4.42" y="4.42" width="27.17" height="27.17" rx="6" ry="6" fill="#3a5edd" opacity="0.8"></rect>
    </symbol>
    <symbol id="pointer" data-name="pointer" viewBox="0 0 26.87 26.87">
      <circle cx="13.43" cy="13.43" r="12.93" fill="none" stroke="#ffdc8c" stroke-miterlimit="10"></circle>
      <circle cx="13.43" cy="13.43" r="10.38" fill="#ffb200"></circle>
      <polygon points="11.32 19.26 11.32 17.43 10.72 17.43 10.71 16.14 10.1 16.21 10.1 15 9.54 14.99 9.46 13.78 8.88 13.78 8.89 13.16 8.28 13.16 8.28 11.34 10.11 11.34 10.11 11.94 10.71 11.94 10.71 6.46 11.33 6.45 11.33 5.86 12.54 5.86 12.54 6.45 13.16 6.47 13.16 8.89 14.37 8.89 14.39 9.49 16.21 9.51 16.21 10.12 17.43 10.12 17.43 10.79 18.04 10.73 18.05 11.39 18.65 11.33 18.65 15.61 18.04 15.52 17.98 17.43 17.43 17.43 17.43 19.26 11.32 19.26" fill="#fff" opacity="0.2"></polygon>
      <g>
        <path d="M10.11,11.94c0-.09,0-0.19,0-0.28s0-.21,0-0.32H8.28v1.82H8.89V11.95h1.23v0.63h0.6v0.6h0.61V13.09q0-2.4,0-4.8,0-.92,0-1.85h1.21V5.85H11.33v0.6H10.71v5.47h-0.6Zm4.28-2.44a0.45,0.45,0,0,1,0-.07c0-.15,0-0.3,0-0.45s0,0,0-.08H13.16V6.47H12.55v5.47h0.61V9.51h1.24s0,0.06,0,.09q0,1.12,0,2.25s0,0.07,0,.1H15V10.12h1.23v2.43h0.6V10.71l0.57,0s0,0,0,.05,0,0.29,0,.44,0,0.07,0,.11H18a0,0,0,0,1,.06.06c0,0.24,0,.48,0,0.72q0,1.71,0,3.41s0,0,0,.08h-0.6s0,0,0,0q0,0.86,0,1.72s0,0,0,.06H16.81v1.21H11.94V17.42H11.33V16.21h-0.6a11.4,11.4,0,0,0,0,1.22h0.6v1.83c2,0,4.07,0,6.11,0,0-.1,0-0.19,0-0.28,0-.46,0-0.93,0-1.39a1.53,1.53,0,0,0,0-.16H18c0.05,0,.07,0,0.07-0.07,0-.45,0-0.89,0-1.34,0-.13,0-0.26,0-0.4l0.3,0h0.3V11.33H18v-0.6H17.43V10.11H16.21V9.51H14.39ZM10.1,15v1.21h0.52a0.07,0.07,0,0,0,.08-0.08c0-.32,0-0.65,0-1,0-.06,0-0.11,0-0.17H10.11V13.77H9.49V13.16H8.91a2.7,2.7,0,0,0,0,.62H9.47s0,0,0,.07,0,0.27,0,.41,0,0.45,0,.68a0,0,0,0,0,.05.06H10.1Z" fill="#fff"></path>
        <path d="M17.43,17.43s0,0,0-.06q0-.86,0-1.72s0,0,0,0H18s0-.06,0-0.08q0-1.71,0-3.41c0-.24,0-0.48,0-0.72A0,0,0,0,0,18,11.33H17.44s0-.07,0-0.11,0-.29,0-0.44,0-.05,0-0.05l-0.57,0v1.84h-0.6V10.12H15v1.82H14.38s0-.07,0-0.1q0-1.12,0-2.25s0-.06,0-0.09h1.81v0.6h1.22v0.62H18v0.6h0.61v4.28h-0.3l-0.3,0c0,0.14,0,.27,0,0.4,0,0.45,0,.89,0,1.34,0,0.05,0,.07-0.07.07H17.43Z" fill="#fff"></path>
        <path d="M17.43,17.43a1.53,1.53,0,0,1,0,.16c0,0.46,0,.93,0,1.39,0,0.09,0,.17,0,0.28-2,0-4.06,0-6.11,0V17.43h-0.6a11.4,11.4,0,0,1,0-1.22h0.6v1.21h0.61v1.22h4.88V17.43h0.62Z" fill="#fff"></path>
        <path d="M11.33,6.45q0,0.92,0,1.85,0,2.4,0,4.8v0.07H10.72v-0.6h-0.6V11.93h0.6V6.46h0.61Z" fill="#fff"></path>
        <path d="M14.39,9.49H13.16v2.43H12.55V6.47h0.61V8.89h1.21s0,0.06,0,.08,0,0.3,0,.45a0.44,0.44,0,0,0,0,.07h0Z" fill="#fff"></path>
        <path d="M10.1,15H9.54a0,0,0,0,1-.05-0.06c0-.23,0-0.45,0-0.68s0-.27,0-0.41,0,0,0-.07H8.88a2.7,2.7,0,0,1,0-.62H9.49v0.61h0.62V15h0.61c0,0.06,0,.12,0,0.17,0,0.32,0,.65,0,1a0.07,0.07,0,0,1-.08.08H10.1V15Z" fill="#fff"></path>
        <path d="M10.11,11.93H8.89v1.21H8.28V11.34h1.83c0,0.11,0,.21,0,0.32s0,0.19,0,.28h0Z" fill="#fff"></path>
        <path d="M11.33,6.45V5.85h1.21v0.6H11.33Z" fill="#fff"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="paths">
    <path id="edge0" d="M66,47v66.12c0.56,24,102,24.22,102,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge1" d="M102,47v66.12c0.56,24,68,24.22,68,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge2" d="M138.07,47v66.12c0.56,24,33.93,24.22,33.93,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge3" d="M174,47V191" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge4" d="M210,47v66.12c-0.56,24-34,24.22-34,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge5" d="M246,47v66.12c-0.56,24-68,24.22-68,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="edge6" d="M282,47v66.12c-0.56,24-102,24.22-102,76.88" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <use id="array-7-3" data-name="array-7" width="253.5" height="37.5" transform="translate(47.75 10.75)" xlink:href="#array-7"></use>
  <use id="array-7-6" data-name="array-7" width="253.5" height="37.5" transform="translate(47.75 69.75)" xlink:href="#array-7"></use>
  <use id="array-1-3" data-name="array-1" width="37.5" height="37.5" transform="translate(155.75 189.75)" xlink:href="#array-1"></use>
  <g opacity="0.6">
    <text transform="translate(316 34)" font-size="13" font-family="Open Sans">attention</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(316 92)" font-size="13" font-family="Open Sans">memory</text>
  </g>
  <g id="read-result">
    <use width="36" height="36" transform="translate(157 191)" xlink:href="#array-vector"></use>
  </g>
  <g id="attention">
    <use id="array-positive-value-3" data-name="array-positive-value" width="36" height="36" transform="translate(48 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(84 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(120 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(156 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(192 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(228 11)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(264 11)" xlink:href="#array-positive-value"></use>
  </g>
  <g id="memory">
    <use width="36" height="36" transform="translate(48 71)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(84 71)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(120 71)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(156 71)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(192 71)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(228 71)" xlink:href="#array-vector"></use>
    <use id="array-vector-17" data-name="array-vector" width="36" height="36" transform="translate(264 71)" xlink:href="#array-vector"></use>
  </g>
  <use id="pointer-3" data-name="pointer" width="26.87" height="26.87" transform="translate(9.84 15.06)" xlink:href="#pointer"></use>
  <g opacity="0.6">
    <text transform="translate(440 33.88)" font-size="13" font-family="Open Sans">The RNN gives an attention distribution <tspan x="0" y="20">which describe how we spread out the </tspan><tspan x="0" y="40">amount we care about different memory </tspan><tspan x="0" y="60">positions.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(440 172.81)" font-size="13" font-family="Open Sans">The read result is a weighted sum.</text>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="202" y1="207" x2="203" y2="207" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="205.01" y1="207" x2="413" y2="207" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.01 2.01"></line>
      <line x1="414" y1="207" x2="415" y2="207" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g>
    <path d="M443,205.59a1.5,1.5,0,0,0,0-.17l0.11-.48a4.07,4.07,0,0,1,.22-0.67q0.13-.3.33-0.71a2.31,2.31,0,0,1,.43-0.65,4.86,4.86,0,0,1,.56-0.48,1,1,0,0,1,.72-0.2,2.27,2.27,0,0,1,1.11.26,2.61,2.61,0,0,1,.67.48,0.93,0.93,0,0,1,.24.43,0.23,0.23,0,0,0,.07.13,0.76,0.76,0,0,0,.17-0.15,3.19,3.19,0,0,1,2.41-1.13h0.06a1.69,1.69,0,0,1,1.56.89,2.06,2.06,0,0,1,.17.8,1.74,1.74,0,0,1-.28,1,1.35,1.35,0,0,1-.56.5,1.22,1.22,0,0,1-.54.09,1,1,0,0,1-.69-0.24,0.81,0.81,0,0,1-.26-0.63,1.41,1.41,0,0,1,1.21-1.39A1.66,1.66,0,0,0,450,203a2.8,2.8,0,0,0-2.23,1.6,2.88,2.88,0,0,0-.33.72q-0.11.37-.74,2.88-0.74,3-.85,3.23a1,1,0,0,1-.93.59,0.74,0.74,0,0,1-.46-0.13,0.78,0.78,0,0,1-.24-0.26,0.32,0.32,0,0,1,0-.22q0-.28.87-3.73a37.67,37.67,0,0,0,.87-3.84q0-.85-0.56-0.85a0.93,0.93,0,0,0-.78.61A6.3,6.3,0,0,0,444,205a6.18,6.18,0,0,1-.24.78,0.72,0.72,0,0,1-.35,0h-0.3A0.36,0.36,0,0,1,443,205.59Z" fill="#666"></path>
    <path d="M478.79,206.15v0.24a0.54,0.54,0,0,1-.33.43H461.91l0.37,0.3a5.92,5.92,0,0,1,.63.59q0.3,0.33.71,0.8a4.41,4.41,0,0,1,.72,1.21q0.3,0.74.56,1.54a2.44,2.44,0,0,1,.11.54q0,0.24-.43.24h-0.22a0.17,0.17,0,0,1-.13-0.09,0.85,0.85,0,0,1-.11-0.19,2.1,2.1,0,0,1-.09-0.41,6.62,6.62,0,0,0-1.47-2.82,6.68,6.68,0,0,0-2.64-1.84,0.85,0.85,0,0,1-.39-0.24,0.25,0.25,0,0,1,.09-0.22,1.44,1.44,0,0,1,.3-0.15,6.66,6.66,0,0,0,1.84-1.08,6.43,6.43,0,0,0,1.24-1.32,7.45,7.45,0,0,0,.69-1.28,10.62,10.62,0,0,0,.37-1l0.06-.37,0.07-.17a0.23,0.23,0,0,1,.11-0.09,0.67,0.67,0,0,1,.28,0q0.43,0,.43.24a2.44,2.44,0,0,1-.11.54,9.12,9.12,0,0,1-.54,1.5,6.26,6.26,0,0,1-.69,1.17q-0.37.48-.67,0.8a6.46,6.46,0,0,1-.65.61l-0.43.37h16.55a0.54,0.54,0,0,1,.33.43v-0.24Z" fill="#666"></path>
    <path d="M487.32,191.27s4.41,0,13.11,0h13l1.26,2.93q1.28,3,1.37,3.16h-0.87l-0.15-.3a7.32,7.32,0,0,0-1.21-1.69,9.09,9.09,0,0,0-2.41-1.67,11.86,11.86,0,0,0-3.06-.93,25.21,25.21,0,0,0-3.27-.37q-1.54-.06-4-0.09h-9.71l0.17,0.24q10,13.72,10.08,13.85a0.19,0.19,0,0,1,0,.13L496,213l-5.72,6.5s1.52,0,4.57,0h3.06q1.93,0,2.77,0,2.95,0,4.77-.11a27.83,27.83,0,0,0,3.62-.46,10,10,0,0,0,3.06-1.06,8.13,8.13,0,0,0,2.23-1.89,6.87,6.87,0,0,0,.89-1.56h0.87s-0.05.17-.15,0.46-0.28.76-.54,1.41-0.48,1.26-.67,1.82l-1.26,3.36-13,0q-13,0-13.11,0a0.18,0.18,0,0,1-.13-0.2,0.33,0.33,0,0,1,0-.13L498.81,208s-0.24-.34-0.71-1-1.24-1.68-2.28-3.12-2-2.73-2.82-3.86l-5.76-7.91,0-.33A0.7,0.7,0,0,1,487.32,191.27Z" fill="#666"></path>
    <path d="M499.35,230.92a1.68,1.68,0,0,1,.14-0.47,7.35,7.35,0,0,1,.37-0.78,2.53,2.53,0,0,1,.67-0.78,1.39,1.39,0,0,1,.92-0.34,1.45,1.45,0,0,1,1,.35,1.25,1.25,0,0,1,.41.95,3,3,0,0,1-.21.86q-0.21.6-.61,1.61T501.38,234a2.51,2.51,0,0,0-.08.49q0,0.38.26,0.38a1,1,0,0,0,.29,0,1,1,0,0,0,.35-0.21,2.08,2.08,0,0,0,.41-0.54,4.45,4.45,0,0,0,.38-0.9,0.63,0.63,0,0,1,.08-0.21,0.56,0.56,0,0,1,.26,0q0.31,0,.31.15a1.68,1.68,0,0,1-.14.47,6,6,0,0,1-.38.78,2.56,2.56,0,0,1-.69.77,1.54,1.54,0,0,1-.95.34,1.44,1.44,0,0,1-.9-0.32,1.2,1.2,0,0,1-.43-1,1.54,1.54,0,0,1,.08-0.49q0.08-.23.66-1.75t0.67-1.85a2.54,2.54,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.07,1.07,0,0,0-.84.51,3.57,3.57,0,0,0-.58,1.29l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,499.35,230.92Zm2.5-4.8a0.86,0.86,0,0,1,.29-0.64,1,1,0,0,1,.67-0.29,0.62,0.62,0,0,1,.46.18,0.68,0.68,0,0,1,.2.46,0.87,0.87,0,0,1-.31.64,1,1,0,0,1-.67.31,0.69,0.69,0,0,1-.43-0.15A0.64,0.64,0,0,1,501.84,226.13Z" fill="#666"></path>
    <path d="M528.53,204.7a2,2,0,0,0-.11-0.48,2.06,2.06,0,0,0-.5-0.76,1.39,1.39,0,0,0-1-.43,2.08,2.08,0,0,0-1.45.67,4.53,4.53,0,0,0-1.08,1.76,17.3,17.3,0,0,0-.89,3.55v0.24a1.16,1.16,0,0,1,0,.26,1.82,1.82,0,0,0,.39,1.34,1.4,1.4,0,0,0,.93.39,2.45,2.45,0,0,0,1.63-.72,3.64,3.64,0,0,0,1-1.11q0-.09.59-2.32T528.53,204.7Zm-6.89,3.71a6.4,6.4,0,0,1,1.65-4.16,4.85,4.85,0,0,1,3.71-2,2.46,2.46,0,0,1,2,1.06,1.08,1.08,0,0,1,1-.65,0.78,0.78,0,0,1,.5.17,0.53,0.53,0,0,1,.22.43q0,0.28-.8,3.47t-0.82,3.6a1.16,1.16,0,0,0,.15.71,0.64,0.64,0,0,0,.45.2,0.94,0.94,0,0,0,.43-0.2A4.91,4.91,0,0,0,531,209a0.81,0.81,0,0,1,.22-0.45,0.63,0.63,0,0,1,.22,0h0.09q0.41,0,.41.19a3.44,3.44,0,0,1-.11.59,6.8,6.8,0,0,1-.43,1.17,3.69,3.69,0,0,1-.69,1.08,2.14,2.14,0,0,1-.69.45,2.31,2.31,0,0,1-.52,0,2.21,2.21,0,0,1-1.24-.32,1.66,1.66,0,0,1-.65-0.67l-0.13-.33s0,0-.09,0l-0.09.09a3.8,3.8,0,0,1-2.6,1.21,3,3,0,0,1-2.1-.87A3.65,3.65,0,0,1,521.64,208.41Z" fill="#666"></path>
    <path d="M532.71,210.66a1.68,1.68,0,0,1,.14-0.47,7.35,7.35,0,0,1,.37-0.78,2.53,2.53,0,0,1,.67-0.78,1.39,1.39,0,0,1,.92-0.34,1.45,1.45,0,0,1,1,.35,1.25,1.25,0,0,1,.41.95,3,3,0,0,1-.21.86q-0.21.6-.61,1.61t-0.64,1.73a2.51,2.51,0,0,0-.08.49q0,0.38.26,0.38a1,1,0,0,0,.29,0,1,1,0,0,0,.35-0.21,2.08,2.08,0,0,0,.41-0.54,4.45,4.45,0,0,0,.38-0.9,0.63,0.63,0,0,1,.08-0.21,0.56,0.56,0,0,1,.26,0q0.31,0,.31.15a1.68,1.68,0,0,1-.14.47,6,6,0,0,1-.38.78,2.56,2.56,0,0,1-.69.77,1.54,1.54,0,0,1-.95.34,1.44,1.44,0,0,1-.9-0.32,1.2,1.2,0,0,1-.43-1,1.54,1.54,0,0,1,.08-0.49q0.08-.23.66-1.75t0.67-1.85a2.54,2.54,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.07,1.07,0,0,0-.84.51,3.57,3.57,0,0,0-.58,1.29l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,532.71,210.66Zm2.5-4.8a0.86,0.86,0,0,1,.29-0.64,1,1,0,0,1,.67-0.29,0.62,0.62,0,0,1,.46.18,0.68,0.68,0,0,1,.2.46,0.87,0.87,0,0,1-.31.64,1,1,0,0,1-.67.31,0.69,0.69,0,0,1-.43-0.15A0.64,0.64,0,0,1,535.21,205.87Z" fill="#666"></path>
    <path d="M546.11,198.18a2.36,2.36,0,0,0-1.24-.17,6.23,6.23,0,0,1-.67,0,0.18,0.18,0,0,1-.15-0.22s0-.09,0-0.24l0-.15a0.65,0.65,0,0,0,0-.11,0.38,0.38,0,0,1,0-.11q0-.09,0-0.06s0,0,.09,0a0.11,0.11,0,0,1,.11,0,0.3,0.3,0,0,0,.17,0l0.26,0h0.65l1,0h2a0.43,0.43,0,0,1,.35.11q0,0.09.8,6.11l0.78,6,0.5-.8q0.52-.78,1.39-2.17l1.91-3q3.79-6,3.84-6.09l0.07-.07,0.09-.06,0.13,0h2.95a5.27,5.27,0,0,0,.63,0q0.74,0,.74.24a1.78,1.78,0,0,1-.07.37q-0.07.26-.07,0.28a1.28,1.28,0,0,1-.8.13,9.64,9.64,0,0,0-1.11.07,0.62,0.62,0,0,0-.39.24q-0.06.11-1.56,6.13t-1.52,6.09a0.17,0.17,0,0,0,0,.11l0.15,0.09a0.7,0.7,0,0,0,.37,0,3.47,3.47,0,0,1,.71,0H559a0.78,0.78,0,0,1,.13.24,1.43,1.43,0,0,1-.15.65,0.48,0.48,0,0,1-.35.11l-0.89,0-2,0h-2a6.4,6.4,0,0,0-.76,0q-0.37,0-.37-0.22s0-.13,0-0.3a0.68,0.68,0,0,1,.17-0.39,1.8,1.8,0,0,1,.5-0.07q0.59,0,1.3-.07a0.58,0.58,0,0,0,.41-0.26q0-.09.82-3.16t1.54-6.13l0.76-3.06-4.2,6.7q-4.25,6.76-4.35,6.87l-0.09,0a0.7,0.7,0,0,1-.35.07,0.39,0.39,0,0,1-.39-0.15q0-.09-0.89-6.72l-0.85-6.65-1.47,5.85q-1.45,5.76-1.45,6,0.13,0.72,1.56.72H546a0.42,0.42,0,0,1,.15.2,1,1,0,0,1-.07.39,0.68,0.68,0,0,1-.17.39l-0.24,0h-0.26l-0.74,0-1.39,0-1.34,0-0.8,0a1.17,1.17,0,0,1-.41,0,0.2,0.2,0,0,1-.09-0.2,2.3,2.3,0,0,1,.07-0.3,1.32,1.32,0,0,1,.11-0.33,0.51,0.51,0,0,1,.48-0.13,1.92,1.92,0,0,0,1.93-.87q0.09-.13,1.49-5.81T546.11,198.18Z" fill="#666"></path>
    <path d="M561.18,210.66a1.68,1.68,0,0,1,.14-0.47,7.37,7.37,0,0,1,.37-0.78,2.53,2.53,0,0,1,.67-0.78,1.39,1.39,0,0,1,.92-0.34,1.45,1.45,0,0,1,1,.35,1.25,1.25,0,0,1,.41.95,3,3,0,0,1-.21.86q-0.21.6-.61,1.61t-0.64,1.73a2.51,2.51,0,0,0-.08.49q0,0.38.26,0.38a1,1,0,0,0,.29,0,1,1,0,0,0,.35-0.21,2.08,2.08,0,0,0,.41-0.54,4.45,4.45,0,0,0,.38-0.9,0.63,0.63,0,0,1,.08-0.21,0.56,0.56,0,0,1,.26,0q0.31,0,.31.15a1.68,1.68,0,0,1-.14.47,6,6,0,0,1-.38.78,2.56,2.56,0,0,1-.69.77,1.54,1.54,0,0,1-.95.34,1.44,1.44,0,0,1-.9-0.32,1.2,1.2,0,0,1-.43-1,1.54,1.54,0,0,1,.08-0.49q0.08-.23.66-1.75t0.67-1.85a2.54,2.54,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.07,1.07,0,0,0-.84.51,3.57,3.57,0,0,0-.58,1.29l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,561.18,210.66Zm2.5-4.8a0.86,0.86,0,0,1,.29-0.64,1,1,0,0,1,.67-0.29,0.62,0.62,0,0,1,.46.18,0.68,0.68,0,0,1,.2.46,0.87,0.87,0,0,1-.31.64,1,1,0,0,1-.67.31,0.69,0.69,0,0,1-.43-0.15A0.64,0.64,0,0,1,563.68,205.87Z" fill="#666"></path>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>Similarly, we write everywhere at once to different extents. Again, an attention distribution describes how much we write at every location. We do this by having the new value of a position in memory be a convex combination of the old memory content and the write value, with the position between the two decided by the attention weight.</p>

  <p></p><figure class="l-body-outset" id="rnn-write">
    <dt-include src="assets/rnn_write.svg"><svg id="edges" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 300">
  <defs>
    <symbol id="array-1" data-name="array-1" viewBox="0 0 37.5 37.5">
      <rect x="0.75" y="0.75" width="36" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="array-7" data-name="array-7" viewBox="0 0 253.5 37.5">
      <rect x="0.75" y="0.75" width="252" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
      <line x1="36.25" y1="36.75" x2="36.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="72.25" y1="36.75" x2="72.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="108.25" y1="36.75" x2="108.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="144.25" y1="36.75" x2="144.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="180.25" y1="36.75" x2="180.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="216.25" y1="36.75" x2="216.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
    </symbol>
    <symbol id="array-positive-value" data-name="array-positive-value" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#0080f7" opacity="0"></rect>
      <rect x="4.42" y="4.42" width="27.17" height="27.17" rx="6" ry="6" fill="#3a5edd" opacity="0.8"></rect>
    </symbol>
    <symbol id="array-vector" data-name="array-vector" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#d8c2f2" opacity="0"></rect>
      <g opacity="0.5">
        <g>
          <line x1="18" y1="24" x2="18" y2="13.08" fill="none" stroke="#000" stroke-miterlimit="10"></line>
          <polygon points="22.09 16.4 21.36 17.08 18 13.47 14.64 17.08 13.91 16.4 18 12 22.09 16.4"></polygon>
        </g>
      </g>
    </symbol>
    <symbol id="pointer" data-name="pointer" viewBox="0 0 26.87 26.87">
      <circle cx="13.43" cy="13.43" r="12.93" fill="none" stroke="#ffdc8c" stroke-miterlimit="10"></circle>
      <circle cx="13.43" cy="13.43" r="10.38" fill="#ffb200"></circle>
      <polygon points="11.32 19.26 11.32 17.43 10.72 17.43 10.71 16.14 10.1 16.21 10.1 15 9.54 14.99 9.46 13.78 8.88 13.78 8.89 13.16 8.28 13.16 8.28 11.34 10.11 11.34 10.11 11.94 10.71 11.94 10.71 6.46 11.33 6.45 11.33 5.86 12.54 5.86 12.54 6.45 13.16 6.47 13.16 8.89 14.37 8.89 14.39 9.49 16.21 9.51 16.21 10.12 17.43 10.12 17.43 10.79 18.04 10.73 18.05 11.39 18.65 11.33 18.65 15.61 18.04 15.52 17.98 17.43 17.43 17.43 17.43 19.26 11.32 19.26" fill="#fff" opacity="0.2"></polygon>
      <g>
        <path d="M10.11,11.94c0-.09,0-0.19,0-0.28s0-.21,0-0.32H8.28v1.82H8.89V11.95h1.23v0.63h0.6v0.6h0.61V13.09q0-2.4,0-4.8,0-.92,0-1.85h1.21V5.85H11.33v0.6H10.71v5.47h-0.6Zm4.28-2.44a0.45,0.45,0,0,1,0-.07c0-.15,0-0.3,0-0.45s0,0,0-.08H13.16V6.47H12.55v5.47h0.61V9.51h1.24s0,0.06,0,.09q0,1.12,0,2.25s0,0.07,0,.1H15V10.12h1.23v2.43h0.6V10.71l0.57,0s0,0,0,.05,0,0.29,0,.44,0,0.07,0,.11H18a0,0,0,0,1,.06.06c0,0.24,0,.48,0,0.72q0,1.71,0,3.41s0,0,0,.08h-0.6s0,0,0,0q0,0.86,0,1.72s0,0,0,.06H16.81v1.21H11.94V17.42H11.33V16.21h-0.6a11.4,11.4,0,0,0,0,1.22h0.6v1.83c2,0,4.07,0,6.11,0,0-.1,0-0.19,0-0.28,0-.46,0-0.93,0-1.39a1.53,1.53,0,0,0,0-.16H18c0.05,0,.07,0,0.07-0.07,0-.45,0-0.89,0-1.34,0-.13,0-0.26,0-0.4l0.3,0h0.3V11.33H18v-0.6H17.43V10.11H16.21V9.51H14.39ZM10.1,15v1.21h0.52a0.07,0.07,0,0,0,.08-0.08c0-.32,0-0.65,0-1,0-.06,0-0.11,0-0.17H10.11V13.77H9.49V13.16H8.91a2.7,2.7,0,0,0,0,.62H9.47s0,0,0,.07,0,0.27,0,.41,0,0.45,0,.68a0,0,0,0,0,.05.06H10.1Z" fill="#fff"></path>
        <path d="M17.43,17.43s0,0,0-.06q0-.86,0-1.72s0,0,0,0H18s0-.06,0-0.08q0-1.71,0-3.41c0-.24,0-0.48,0-0.72A0,0,0,0,0,18,11.33H17.44s0-.07,0-0.11,0-.29,0-0.44,0-.05,0-0.05l-0.57,0v1.84h-0.6V10.12H15v1.82H14.38s0-.07,0-0.1q0-1.12,0-2.25s0-.06,0-0.09h1.81v0.6h1.22v0.62H18v0.6h0.61v4.28h-0.3l-0.3,0c0,0.14,0,.27,0,0.4,0,0.45,0,.89,0,1.34,0,0.05,0,.07-0.07.07H17.43Z" fill="#fff"></path>
        <path d="M17.43,17.43a1.53,1.53,0,0,1,0,.16c0,0.46,0,.93,0,1.39,0,0.09,0,.17,0,0.28-2,0-4.06,0-6.11,0V17.43h-0.6a11.4,11.4,0,0,1,0-1.22h0.6v1.21h0.61v1.22h4.88V17.43h0.62Z" fill="#fff"></path>
        <path d="M11.33,6.45q0,0.92,0,1.85,0,2.4,0,4.8v0.07H10.72v-0.6h-0.6V11.93h0.6V6.46h0.61Z" fill="#fff"></path>
        <path d="M14.39,9.49H13.16v2.43H12.55V6.47h0.61V8.89h1.21s0,0.06,0,.08,0,0.3,0,.45a0.44,0.44,0,0,0,0,.07h0Z" fill="#fff"></path>
        <path d="M10.1,15H9.54a0,0,0,0,1-.05-0.06c0-.23,0-0.45,0-0.68s0-.27,0-0.41,0,0,0-.07H8.88a2.7,2.7,0,0,1,0-.62H9.49v0.61h0.62V15h0.61c0,0.06,0,.12,0,0.17,0,0.32,0,.65,0,1a0.07,0.07,0,0,1-.08.08H10.1V15Z" fill="#fff"></path>
        <path d="M10.11,11.93H8.89v1.21H8.28V11.34h1.83c0,0.11,0,.21,0,0.32s0,0.19,0,.28h0Z" fill="#fff"></path>
        <path d="M11.33,6.45V5.85h1.21v0.6H11.33Z" fill="#fff"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="paths">
    <path id="path24182" d="M168,48.7c0,52.66-101.44,52.89-102,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24184" d="M170,48.7c0,52.66-67.44,52.89-68,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24186" d="M172,48.7c0,52.66-33.44,52.89-34,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24249" d="M174,48V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24264" d="M176,48.7c0,52.66,33.37,52.89,33.93,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24262" d="M178,48.7c0,52.66,67.44,52.89,68,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path id="path24260" d="M180,48.7c0,52.66,101.44,52.89,102,76.88V251" fill="none" stroke="#2a71d8" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <use id="array-1-3" data-name="array-1" width="37.5" height="37.5" transform="translate(154.75 11.75)" xlink:href="#array-1"></use>
  <use id="array-7-3" data-name="array-7" width="253.5" height="37.5" transform="translate(47.75 131.75)" xlink:href="#array-7"></use>
  <use width="253.5" height="37.5" transform="translate(47.75 190.75)" xlink:href="#array-7"></use>
  <use id="array-7-8" data-name="array-7" width="253.5" height="37.5" transform="translate(47.75 250.75)" xlink:href="#array-7"></use>
  <g id="attention">
    <use width="36" height="36" transform="translate(48 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(84 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(120 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(156 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(192 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(228 132)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(264 132)" xlink:href="#array-positive-value"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(316 151)" font-size="13" font-family="Open Sans">attention</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(316 216)" font-size="13" font-family="Open Sans">old memory</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(316 276)" font-size="13" font-family="Open Sans">new memory</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(204 36)" font-size="13" font-family="Open Sans">write value</text>
  </g>
  <g id="write-result">
    <use width="36" height="36" transform="translate(156 12)" xlink:href="#array-vector"></use>
  </g>
  <g id="memory">
    <use width="36" height="36" transform="translate(48 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(84 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(120 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(156 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(192 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(228 192)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(264 192)" xlink:href="#array-vector"></use>
  </g>
  <g id="new-memory">
    <use width="36" height="36" transform="translate(48 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(84 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(120 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(156 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(192 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(228 252)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(264 252)" xlink:href="#array-vector"></use>
  </g>
  <use width="26.87" height="26.87" transform="translate(9.37 136.54)" xlink:href="#pointer"></use>
  <g opacity="0.6">
    <text transform="translate(438 150.88)" font-size="13" font-family="Open Sans">The RNN gives an attention distribution, <tspan x="0" y="20">describing how much we should change </tspan><tspan x="0" y="40">each memory position towards the write </tspan><tspan x="0" y="60">value.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(440 65.88)" font-size="13" font-family="Open Sans">Instead of writing to one location, we write <tspan x="0" y="20">everywhere, just to different extents.</tspan></text>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="202" y1="73" x2="203" y2="73" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="205.01" y1="73" x2="413" y2="73" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.01 2.01"></line>
      <line x1="414" y1="73" x2="415" y2="73" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g>
    <path d="M450.73,262a2.39,2.39,0,0,0-1.25-.18,6.31,6.31,0,0,1-.68,0,0.19,0.19,0,0,1-.15-0.22s0-.09,0-0.24l0-.15a0.66,0.66,0,0,0,0-.11,0.38,0.38,0,0,1,0-.11q0-.09,0-0.07s0,0,.09,0a0.11,0.11,0,0,1,.11,0,0.31,0.31,0,0,0,.18,0l0.26,0h0.66l1,0h2a0.44,0.44,0,0,1,.35.11q0,0.09.81,6.18l0.79,6.11,0.5-.81q0.53-.79,1.4-2.19l1.93-3.07q3.83-6.11,3.88-6.16l0.07-.07,0.09-.07,0.13,0h3a5.33,5.33,0,0,0,.64,0q0.74,0,.74.24a1.8,1.8,0,0,1-.07.37q-0.07.26-.07,0.28a1.3,1.3,0,0,1-.81.13,9.75,9.75,0,0,0-1.12.07,0.63,0.63,0,0,0-.39.24q-0.07.11-1.58,6.2t-1.53,6.16a0.17,0.17,0,0,0,0,.11l0.15,0.09a0.7,0.7,0,0,0,.37,0,3.5,3.5,0,0,1,.72,0h0.68a0.79,0.79,0,0,1,.13.24,1.45,1.45,0,0,1-.15.66,0.48,0.48,0,0,1-.35.11l-0.9,0-2,0h-2a6.47,6.47,0,0,0-.77,0q-0.37,0-.37-0.22s0-.13,0-0.31a0.69,0.69,0,0,1,.18-0.39,1.82,1.82,0,0,1,.5-0.07q0.59,0,1.31-.07a0.58,0.58,0,0,0,.42-0.26q0-.09.83-3.2t1.56-6.2l0.77-3.09-4.25,6.77q-4.29,6.83-4.4,6.94l-0.09,0a0.71,0.71,0,0,1-.35.07,0.39,0.39,0,0,1-.39-0.15q0-.09-0.9-6.79l-0.85-6.73L450.25,268q-1.47,5.83-1.47,6,0.13,0.72,1.58.72h0.22a0.42,0.42,0,0,1,.15.2,1,1,0,0,1-.07.39,0.69,0.69,0,0,1-.18.39l-0.24,0H450l-0.74,0-1.4,0-1.36,0-0.81,0a1.18,1.18,0,0,1-.42,0,0.2,0.2,0,0,1-.09-0.2,2.33,2.33,0,0,1,.07-0.31,1.34,1.34,0,0,1,.11-0.33,0.51,0.51,0,0,1,.48-0.13,1.94,1.94,0,0,0,1.95-.88q0.09-.13,1.51-5.87T450.73,262Z" fill="#666"></path>
    <path d="M466,274.57a1.7,1.7,0,0,1,.14-0.48,7.43,7.43,0,0,1,.37-0.79,2.56,2.56,0,0,1,.68-0.79,1.4,1.4,0,0,1,.93-0.34,1.46,1.46,0,0,1,1,.36,1.26,1.26,0,0,1,.42,1,3,3,0,0,1-.22.87q-0.22.6-.62,1.63T468,277.73a2.54,2.54,0,0,0-.08.5q0,0.39.26,0.39a1,1,0,0,0,.29,0,1.06,1.06,0,0,0,.36-0.22,2.1,2.1,0,0,0,.42-0.54,4.5,4.5,0,0,0,.39-0.91,0.64,0.64,0,0,1,.08-0.22,0.57,0.57,0,0,1,.26,0q0.31,0,.31.15a1.69,1.69,0,0,1-.14.48,6.1,6.1,0,0,1-.39.79,2.59,2.59,0,0,1-.7.77,1.56,1.56,0,0,1-1,.34,1.46,1.46,0,0,1-.91-0.33,1.22,1.22,0,0,1-.43-1,1.56,1.56,0,0,1,.08-0.5q0.08-.23.67-1.77t0.68-1.87a2.57,2.57,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.08,1.08,0,0,0-.85.51,3.61,3.61,0,0,0-.59,1.3l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,466,274.57Zm2.52-4.85a0.87,0.87,0,0,1,.29-0.65,1,1,0,0,1,.68-0.29,0.63,0.63,0,0,1,.46.19,0.69,0.69,0,0,1,.2.46,0.88,0.88,0,0,1-.31.65,1,1,0,0,1-.68.31,0.7,0.7,0,0,1-.43-0.15A0.64,0.64,0,0,1,468.5,269.73Z" fill="#666"></path>
    <path d="M499.93,270v0.24a0.54,0.54,0,0,1-.33.44H482.86l0.37,0.31a6,6,0,0,1,.64.59q0.31,0.33.72,0.81a4.46,4.46,0,0,1,.72,1.23q0.31,0.74.57,1.56a2.46,2.46,0,0,1,.11.55q0,0.24-.44.24h-0.22a0.18,0.18,0,0,1-.13-0.09,0.86,0.86,0,0,1-.11-0.2,2.12,2.12,0,0,1-.09-0.42,6.69,6.69,0,0,0-1.49-2.85,6.76,6.76,0,0,0-2.67-1.86,0.86,0.86,0,0,1-.39-0.24,0.26,0.26,0,0,1,.09-0.22,1.45,1.45,0,0,1,.31-0.15,6.73,6.73,0,0,0,1.86-1.1,6.5,6.5,0,0,0,1.25-1.34,7.54,7.54,0,0,0,.7-1.29,10.74,10.74,0,0,0,.37-1l0.07-.37,0.07-.18a0.24,0.24,0,0,1,.11-0.09,0.68,0.68,0,0,1,.28,0q0.44,0,.44.24a2.46,2.46,0,0,1-.11.55,9.23,9.23,0,0,1-.55,1.51,6.32,6.32,0,0,1-.7,1.18q-0.37.48-.68,0.81a6.53,6.53,0,0,1-.66.61l-0.44.37H499.6a0.54,0.54,0,0,1,.33.44V270Z" fill="#666"></path>
    <path d="M514.93,268.55a2,2,0,0,0-.11-0.48,2.08,2.08,0,0,0-.5-0.77,1.4,1.4,0,0,0-1-.44,2.1,2.1,0,0,0-1.47.68,4.58,4.58,0,0,0-1.1,1.77,17.49,17.49,0,0,0-.9,3.59v0.24a1.17,1.17,0,0,1,0,.26,1.84,1.84,0,0,0,.39,1.36,1.41,1.41,0,0,0,.94.39,2.47,2.47,0,0,0,1.64-.72,3.68,3.68,0,0,0,1-1.12q0-.09.59-2.34T514.93,268.55Zm-7,3.75a6.47,6.47,0,0,1,1.66-4.21,4.9,4.9,0,0,1,3.75-2,2.48,2.48,0,0,1,2,1.07,1.1,1.1,0,0,1,1-.66,0.78,0.78,0,0,1,.5.18,0.54,0.54,0,0,1,.22.44q0,0.28-.81,3.5t-0.83,3.64a1.17,1.17,0,0,0,.15.72,0.64,0.64,0,0,0,.46.2,1,1,0,0,0,.44-0.2,5,5,0,0,0,.9-2.1,0.82,0.82,0,0,1,.22-0.46,0.64,0.64,0,0,1,.22,0h0.09q0.42,0,.42.2a3.48,3.48,0,0,1-.11.59,6.87,6.87,0,0,1-.44,1.18,3.73,3.73,0,0,1-.7,1.1,2.17,2.17,0,0,1-.7.46,2.34,2.34,0,0,1-.53,0,2.24,2.24,0,0,1-1.25-.33,1.68,1.68,0,0,1-.66-0.68l-0.13-.33s0,0-.09,0l-0.09.09A3.84,3.84,0,0,1,511,276a3,3,0,0,1-2.12-.88A3.69,3.69,0,0,1,508,272.29Z" fill="#666"></path>
    <path d="M519.16,274.57a1.7,1.7,0,0,1,.14-0.48,7.43,7.43,0,0,1,.37-0.79,2.56,2.56,0,0,1,.68-0.79,1.4,1.4,0,0,1,.93-0.34,1.46,1.46,0,0,1,1,.36,1.26,1.26,0,0,1,.42,1,3,3,0,0,1-.22.87q-0.22.6-.62,1.63t-0.65,1.75a2.54,2.54,0,0,0-.08.5q0,0.39.26,0.39a1,1,0,0,0,.29,0,1.06,1.06,0,0,0,.36-0.22,2.1,2.1,0,0,0,.42-0.54,4.5,4.5,0,0,0,.39-0.91,0.64,0.64,0,0,1,.08-0.22,0.57,0.57,0,0,1,.26,0q0.31,0,.31.15a1.7,1.7,0,0,1-.14.48,6.09,6.09,0,0,1-.39.79,2.59,2.59,0,0,1-.7.77,1.56,1.56,0,0,1-1,.34,1.46,1.46,0,0,1-.91-0.33,1.22,1.22,0,0,1-.43-1,1.56,1.56,0,0,1,.08-0.5q0.08-.23.67-1.77t0.68-1.87a2.57,2.57,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.08,1.08,0,0,0-.85.51,3.61,3.61,0,0,0-.59,1.3l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,519.16,274.57Zm2.52-4.85a0.87,0.87,0,0,1,.29-0.65,1,1,0,0,1,.68-0.29,0.63,0.63,0,0,1,.46.19,0.69,0.69,0,0,1,.2.46,0.88,0.88,0,0,1-.31.65,1,1,0,0,1-.68.31,0.7,0.7,0,0,1-.43-0.15A0.64,0.64,0,0,1,521.68,269.73Z" fill="#666"></path>
    <path d="M539.07,267.3a1.17,1.17,0,0,1,.42-0.85,1.4,1.4,0,0,1,.92-0.42,0.94,0.94,0,0,1,.72.39,2,2,0,0,1,.35,1.25,14.75,14.75,0,0,1-.42,2.52q-0.33,1.23-.59,2a13,13,0,0,1-.77,1.77,4.06,4.06,0,0,1-1.2,1.49,2.64,2.64,0,0,1-1.58.5,4,4,0,0,1-1.71-.35,2.29,2.29,0,0,1-1.07-.94l-0.07.09a2.66,2.66,0,0,1-2.19,1.2,4.5,4.5,0,0,1-1.1-.13,4.12,4.12,0,0,1-1-.42,2.09,2.09,0,0,1-.81-0.85,2.88,2.88,0,0,1-.31-1.38,9.89,9.89,0,0,1,.74-3.2,12,12,0,0,0,.77-2.56v-0.31a0.24,0.24,0,0,0-.09-0.15,0.33,0.33,0,0,0-.24-0.09h-0.09a1.28,1.28,0,0,0-.92.42,3.46,3.46,0,0,0-.66.9,5.79,5.79,0,0,0-.37.92,2.14,2.14,0,0,1-.18.48,0.73,0.73,0,0,1-.35,0H527a0.37,0.37,0,0,1-.13-0.2,2.57,2.57,0,0,1,.18-0.61,9.73,9.73,0,0,1,.5-1.12,3.53,3.53,0,0,1,1-1.14,2.23,2.23,0,0,1,1.42-.5,1.87,1.87,0,0,1,1.45.55,1.82,1.82,0,0,1,.5,1.27,11.71,11.71,0,0,1-.72,2.37,9.67,9.67,0,0,0-.72,3,1.85,1.85,0,0,0,.46,1.42,1.75,1.75,0,0,0,1.16.44,2,2,0,0,0,1.66-1.34l0.11-.2v-0.7a0.45,0.45,0,0,1,0-.18,0.38,0.38,0,0,0,0-.15,0.82,0.82,0,0,1,0-.2l0.07-.28q0-.2.07-0.37a3.35,3.35,0,0,1,.13-0.53,6.15,6.15,0,0,0,.18-0.7q0.07-.35.24-0.94,0.64-2.5.72-2.69a1,1,0,0,1,.94-0.59,0.65,0.65,0,0,1,.57.22,0.91,0.91,0,0,1,.18.42,27.52,27.52,0,0,1-.64,2.8q-0.64,2.52-.7,2.89a4.76,4.76,0,0,0,0,.77v0.15a3,3,0,0,0,.07.64,1.29,1.29,0,0,0,.42.64,1.46,1.46,0,0,0,1,.35q1.56,0,2.48-2.67a13.52,13.52,0,0,0,.44-1.42,7.71,7.71,0,0,0,.26-1.31,2,2,0,0,0-.28-1.14,4.92,4.92,0,0,0-.57-0.7A0.86,0.86,0,0,1,539.07,267.3Z" fill="#666"></path>
    <path d="M551.8,270.54v-0.28a0.48,0.48,0,0,1,.31-0.44h6.55v-3.29l0-3.29a0.58,0.58,0,0,1,.42-0.28,0.48,0.48,0,0,1,.44.33v6.53h6.53a0.46,0.46,0,0,1,0,.88h-6.53v6.53a0.49,0.49,0,0,1-.39.31h-0.09a0.42,0.42,0,0,1-.39-0.31V270.7h-6.55a0.48,0.48,0,0,1-.31-0.44v0.28Z" fill="#666"></path>
    <path d="M578.2,270.26a18,18,0,0,1,.22-2.87,20.09,20.09,0,0,1,.5-2.34,9.18,9.18,0,0,1,.81-1.93q0.53-.94.83-1.47a5.82,5.82,0,0,1,.92-1.14q0.61-.61.72-0.74a3.94,3.94,0,0,1,.55-0.46h0.37q0.31,0,.31.2a1.77,1.77,0,0,1-.37.46,10,10,0,0,0-.9,1.16,15.15,15.15,0,0,0-1.07,1.88,12.47,12.47,0,0,0-.92,3,22.11,22.11,0,0,0-.37,4.23,21.77,21.77,0,0,0,.37,4.21,14.24,14.24,0,0,0,.9,3,9.92,9.92,0,0,0,1.07,1.88q0.55,0.72.92,1.16a4.94,4.94,0,0,1,.37.46q0,0.2-.33.2h-0.35l-0.61-.53a10.81,10.81,0,0,1-3-4.64A17.91,17.91,0,0,1,578.2,270.26Z" fill="#666"></path>
    <path d="M589.33,263.07l-0.28.11a6.28,6.28,0,0,1-.88.22,10.1,10.1,0,0,1-1.27.15h-0.42v-1h0.42a7.12,7.12,0,0,0,1.91-.33,5.18,5.18,0,0,0,1.23-.53,5.62,5.62,0,0,0,.61-0.48,0.33,0.33,0,0,1,.26-0.07,0.61,0.61,0,0,1,.37.13v6.55l0,6.57a0.87,0.87,0,0,0,.26.2,2.6,2.6,0,0,0,.53.09q0.42,0,1.36,0H594v1h-0.24q-0.46-.07-3.48-0.07t-3.44.07h-0.26v-1H588l0.55,0a2.14,2.14,0,0,0,.35-0.07l0.18,0a0.44,0.44,0,0,0,.13-0.11,0.17,0.17,0,0,1,.13-0.09V263.07Z" fill="#666"></path>
    <path d="M598.66,270.54v-0.28a0.48,0.48,0,0,1,.31-0.44h12.73a0.46,0.46,0,0,1,0,.88H599a0.48,0.48,0,0,1-.31-0.44v0.28Z" fill="#666"></path>
    <path d="M622.78,268.55a2,2,0,0,0-.11-0.48,2.08,2.08,0,0,0-.5-0.77,1.4,1.4,0,0,0-1-.44,2.1,2.1,0,0,0-1.47.68,4.59,4.59,0,0,0-1.1,1.77,17.49,17.49,0,0,0-.9,3.59v0.24a1.17,1.17,0,0,1,0,.26,1.84,1.84,0,0,0,.39,1.36,1.41,1.41,0,0,0,.94.39,2.47,2.47,0,0,0,1.64-.72,3.68,3.68,0,0,0,1-1.12q0-.09.59-2.34T622.78,268.55Zm-7,3.75a6.47,6.47,0,0,1,1.66-4.21,4.9,4.9,0,0,1,3.75-2,2.48,2.48,0,0,1,2,1.07,1.1,1.1,0,0,1,1-.66,0.78,0.78,0,0,1,.5.18,0.54,0.54,0,0,1,.22.44q0,0.28-.81,3.5t-0.83,3.64a1.17,1.17,0,0,0,.15.72,0.64,0.64,0,0,0,.46.2,1,1,0,0,0,.44-0.2,5,5,0,0,0,.9-2.1,0.82,0.82,0,0,1,.22-0.46,0.64,0.64,0,0,1,.22,0h0.09q0.42,0,.42.2a3.48,3.48,0,0,1-.11.59,6.87,6.87,0,0,1-.44,1.18,3.73,3.73,0,0,1-.7,1.1,2.17,2.17,0,0,1-.7.46,2.34,2.34,0,0,1-.53,0,2.24,2.24,0,0,1-1.25-.33,1.68,1.68,0,0,1-.66-0.68l-0.13-.33s0,0-.09,0l-0.09.09a3.84,3.84,0,0,1-2.63,1.23,3,3,0,0,1-2.12-.88A3.69,3.69,0,0,1,615.81,272.29Z" fill="#666"></path>
    <path d="M627,274.57a1.69,1.69,0,0,1,.14-0.48,7.45,7.45,0,0,1,.37-0.79,2.56,2.56,0,0,1,.68-0.79,1.4,1.4,0,0,1,.93-0.34,1.46,1.46,0,0,1,1,.36,1.26,1.26,0,0,1,.42,1,3,3,0,0,1-.22.87q-0.22.6-.62,1.63t-0.65,1.75a2.53,2.53,0,0,0-.08.5q0,0.39.26,0.39a1,1,0,0,0,.29,0,1.06,1.06,0,0,0,.36-0.22,2.1,2.1,0,0,0,.42-0.54,4.5,4.5,0,0,0,.39-0.91,0.64,0.64,0,0,1,.08-0.22,0.57,0.57,0,0,1,.26,0q0.31,0,.31.15a1.7,1.7,0,0,1-.14.48,6.11,6.11,0,0,1-.39.79,2.59,2.59,0,0,1-.7.77,1.56,1.56,0,0,1-1,.34,1.46,1.46,0,0,1-.91-0.33,1.22,1.22,0,0,1-.43-1,1.56,1.56,0,0,1,.08-0.5q0.08-.23.67-1.77t0.68-1.87a2.57,2.57,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.08,1.08,0,0,0-.85.51,3.61,3.61,0,0,0-.59,1.3l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,627,274.57Zm2.52-4.85a0.87,0.87,0,0,1,.29-0.65,1,1,0,0,1,.68-0.29,0.63,0.63,0,0,1,.46.19,0.69,0.69,0,0,1,.2.46,0.88,0.88,0,0,1-.31.65,1,1,0,0,1-.68.31,0.7,0.7,0,0,1-.43-0.15A0.64,0.64,0,0,1,629.53,269.73Z" fill="#666"></path>
    <path d="M635.53,259.33l0.09,0h0.48l0.61,0.53a10.81,10.81,0,0,1,3,4.64,17.91,17.91,0,0,1,.94,5.78,18.29,18.29,0,0,1-.22,2.87,18.84,18.84,0,0,1-.5,2.34,9.87,9.87,0,0,1-.81,1.93q-0.53,1-.83,1.47a6.67,6.67,0,0,1-.9,1.12l-0.7.72q-0.11.11-.5,0.42l-0.09.09h-0.5a0.13,0.13,0,0,1-.11-0.07,0.52,0.52,0,0,1-.07-0.2l0.24-.28q3.4-3.53,3.4-10.41t-3.4-10.41l-0.24-.28A0.26,0.26,0,0,1,635.53,259.33Z" fill="#666"></path>
    <path d="M649.06,262a2.39,2.39,0,0,0-1.25-.18,6.3,6.3,0,0,1-.68,0,0.19,0.19,0,0,1-.15-0.22s0-.09,0-0.24l0-.15a0.66,0.66,0,0,0,0-.11,0.38,0.38,0,0,1,0-.11q0-.09,0-0.07s0,0,.09,0a0.11,0.11,0,0,1,.11,0,0.31,0.31,0,0,0,.18,0l0.26,0h0.66l1,0h2a0.44,0.44,0,0,1,.35.11q0,0.09.81,6.18l0.79,6.11,0.5-.81q0.53-.79,1.4-2.19l1.93-3.07q3.83-6.11,3.88-6.16l0.07-.07,0.09-.07,0.13,0h3a5.33,5.33,0,0,0,.64,0q0.74,0,.74.24a1.8,1.8,0,0,1-.07.37q-0.07.26-.07,0.28a1.3,1.3,0,0,1-.81.13,9.74,9.74,0,0,0-1.12.07,0.63,0.63,0,0,0-.39.24q-0.07.11-1.58,6.2t-1.53,6.16a0.17,0.17,0,0,0,0,.11l0.15,0.09a0.71,0.71,0,0,0,.37,0,3.5,3.5,0,0,1,.72,0h0.68a0.79,0.79,0,0,1,.13.24,1.45,1.45,0,0,1-.15.66,0.48,0.48,0,0,1-.35.11l-0.9,0-2,0h-2a6.47,6.47,0,0,0-.77,0q-0.37,0-.37-0.22s0-.13,0-0.31a0.69,0.69,0,0,1,.18-0.39,1.82,1.82,0,0,1,.5-0.07q0.59,0,1.31-.07a0.58,0.58,0,0,0,.42-0.26q0-.09.83-3.2t1.56-6.2l0.77-3.09-4.25,6.77q-4.29,6.83-4.4,6.94l-0.09,0a0.71,0.71,0,0,1-.35.07,0.39,0.39,0,0,1-.39-0.15q0-.09-0.9-6.79l-0.85-6.73L648.58,268q-1.47,5.83-1.47,6,0.13,0.72,1.58.72h0.22a0.42,0.42,0,0,1,.15.2,1,1,0,0,1-.07.39,0.69,0.69,0,0,1-.18.39l-0.24,0h-0.26l-0.74,0-1.4,0-1.36,0-0.81,0a1.18,1.18,0,0,1-.42,0,0.2,0.2,0,0,1-.09-0.2,2.33,2.33,0,0,1,.07-0.31,1.34,1.34,0,0,1,.11-0.33,0.51,0.51,0,0,1,.48-0.13,1.94,1.94,0,0,0,1.95-.88q0.09-.13,1.51-5.87T649.06,262Z" fill="#666"></path>
    <path d="M664.31,274.57a1.7,1.7,0,0,1,.14-0.48,7.44,7.44,0,0,1,.37-0.79,2.56,2.56,0,0,1,.68-0.79,1.4,1.4,0,0,1,.93-0.34,1.46,1.46,0,0,1,1,.36,1.26,1.26,0,0,1,.42,1,3,3,0,0,1-.22.87q-0.22.6-.62,1.63t-0.65,1.75a2.53,2.53,0,0,0-.08.5q0,0.39.26,0.39a1,1,0,0,0,.29,0,1.06,1.06,0,0,0,.36-0.22,2.1,2.1,0,0,0,.42-0.54,4.5,4.5,0,0,0,.39-0.91,0.64,0.64,0,0,1,.08-0.22,0.57,0.57,0,0,1,.26,0q0.31,0,.31.15a1.7,1.7,0,0,1-.14.48,6.11,6.11,0,0,1-.39.79,2.59,2.59,0,0,1-.7.77,1.56,1.56,0,0,1-1,.34,1.46,1.46,0,0,1-.91-0.33,1.22,1.22,0,0,1-.43-1,1.56,1.56,0,0,1,.08-0.5q0.08-.23.67-1.77t0.68-1.87a2.57,2.57,0,0,0,.11-0.6q0-.37-0.26-0.37h0a1.08,1.08,0,0,0-.85.51,3.61,3.61,0,0,0-.59,1.3l0,0a0.12,0.12,0,0,0,0,0,0,0,0,0,1,0,0l0,0h-0.4A0.26,0.26,0,0,1,664.31,274.57Zm2.52-4.85a0.87,0.87,0,0,1,.29-0.65,1,1,0,0,1,.68-0.29,0.63,0.63,0,0,1,.46.19,0.69,0.69,0,0,1,.2.46,0.88,0.88,0,0,1-.31.65,1,1,0,0,1-.68.31,0.7,0.7,0,0,1-.43-0.15A0.64,0.64,0,0,1,666.83,269.73Z" fill="#666"></path>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p><dt-include src="assets/rnn_write.html"><script>
"use strict";
(function() {

  function appendArrowhead(selection) {
    selection.append("marker")
        .attr("id", "arrowhead")
        .attr("viewBox", "0 -5 10 10")
        .attr("refX", 5)
        .attr("refY", 0)
        .attr("markerWidth", 10)
        .attr("markerHeight", 10)
        .attr("orient", "auto")
      .append("path")
        .attr("d", "M0,-5L5,0L0,5")
        .style("fill", "none")
        .style("stroke", "grey");
  }

  var vectorScale = d3.scaleLinear()
      .domain([0, 1])
      .range([-14, 14]);

  var memoryData = [
    {x: 0.9, y: 0.9},
    {x: 0.8, y: 0.8},
    {x: 0.1, y: 0.9},
    {x: 0.4, y: 0.2},
    {x: 0.2, y: 0.2},
    {x: 0.4, y: 0.3},
    {x: 0.1, y: 0.5}
  ];

  var writeData = {x: 0.9, y: 0};

  //
  // Read
  //
  var nodeWidth = 36;
  var readHtml = d3.selectAll("#rnn-read");
  var svg = readHtml.select("svg");
  var result = svg.select("#read-result").style("opacity", 0);
  var resultBBox = result.node().getBBox();
  var memory = svg.selectAll("#memory use");
  var memoryBBox = svg.select("#memory").node().getBBox();
  var attention = svg.selectAll("#attention use");
  var attentionBBox = svg.select("#attention").node().getBBox();
  var path = svg.selectAll("#paths path");

  appendArrowhead(svg);
  var resultArrow = svg.append("line")
      .attr("class", "result-line")
      .attr("marker-end", "url(#arrowhead)")
      .style("stroke", "grey");

  memory.data(memoryData)
    .each(function(d, i) {
      this.style.opacity = 0;
      d.top = memoryBBox.y;
      d.left = memoryBBox.x + nodeWidth * i;
      d.width = nodeWidth;
    });

  var memoryVectors = svg.selectAll(".vector")
      .data(memoryData)
    .enter().append("line")
      .attr("class", "vector")
      .attr("transform", function(d) {
        return `translate(${d.left + d.width / 2 - vectorScale(d.x) / 2}, ${d.top + d.width / 2 - vectorScale(d.y) / 2})`
      })
      .attr("x2", function(d) { return  vectorScale(d.x); })
      .attr("y2", function(d) { return  vectorScale(d.y); })
      .attr("marker-end", "url(#arrowhead)")
      .style("stroke", "grey");

  function updateReadAttention(data) {
    attention.data(data)
        .style("opacity", function(d) { return  d + 0.05; });

    path.data(data)
        .style("stroke-opacity", function(d) { return  d + 0.1; });

    var resultX = d3.sum(memoryData, function(d, i) { return d.x * data[i]; }) / d3.sum(data);
    var resultY = d3.sum(memoryData, function(d, i) { return d.y * data[i]; }) / d3.sum(data);

    resultArrow
        .attr("transform",`translate(${resultBBox.x + resultBBox.width / 2 - vectorScale(resultX) / 2}, ${resultBBox.y + resultBBox.width / 2 - vectorScale(resultY) / 2})`)
        .attr("x2", function(d) { return  vectorScale(resultX); })
        .attr("y2", function(d) { return  vectorScale(resultY); });
  }

  var length = memory.size();
  var attentionData = d3.range(length).map(function() { return Math.random(); });
  updateReadAttention(attentionData);

  readHtml.on("mousemove", function() {
    var data = [];
    attention.each(function() {
      var bbox = this.getBoundingClientRect()
      var distance = Math.abs(bbox.left - d3.event.clientX + bbox.width / 2);
      data.push(Math.exp(-distance / 25));
    });
    data = data.map(function(d) { return  d / d3.sum(data); });
    updateReadAttention(data);
  });

  var initReadData = d3.range(attention.size()).map(function(d) { return  Math.exp(-d); });
  initReadData = initReadData.map(function(d) { return  d / d3.sum(initReadData); });
  updateReadAttention(initReadData);

  //
  // Write
  //

  var writeHtml = d3.selectAll("#rnn-write");
  var writeSvg = writeHtml.select("svg");
  var writeMemory = writeSvg.selectAll("#memory use");
  var writeMemoryBBox = writeSvg.select("#memory").node().getBBox();
  var writeNewMemory = writeSvg.selectAll("#new-memory use");
  var writeNewMemoryBBox = writeSvg.select("#new-memory").node().getBBox();
  var writeAttention = writeSvg.selectAll("#attention use");
  var writeAttentionBBox = writeSvg.select("#attention").node().getBBox();
  var writePath = writeSvg.selectAll("#paths path");
  var writeResult = writeSvg.select("#write-result").style("opacity", 0);
  var writeResultBBox = writeResult.node().getBBox();
  var newMemoryData = memoryData.map(function(){ return {}; });

  appendArrowhead(writeSvg);
  var writeArrow = writeSvg.append("line")
      .attr("class", "write-line")
      .attr("marker-end", "url(#arrowhead)")
      .style("stroke", "grey")
      .attr("transform", "translate(" + (writeResultBBox.x + writeResultBBox.width / 2 - vectorScale(writeData.x) / 2) + ", " + (writeResultBBox.y + writeResultBBox.width / 2 - vectorScale(writeData.y) / 2) + ")")
      .attr("x2", vectorScale(writeData.x))
      .attr("y2", vectorScale(writeData.y));

  writeMemory.data(memoryData)
    .each(function(d, i) {
      this.style.opacity = 0;
      d.top = writeMemoryBBox.y;
      d.left = writeMemoryBBox.x + i * nodeWidth;
      d.width = nodeWidth;
    });

  var writeMemoryVectors = writeSvg.selectAll(".vector")
      .data(memoryData)
    .enter().append("line")
      .attr("class", "vector")
      .attr("transform", function(d) {
        return "translate(" + (d.left + d.width / 2 - vectorScale(d.x) / 2) + ", " + (d.top + d.width / 2 - vectorScale(d.y) / 2) + ")";
      })
      .attr("x2", function(d) { return  vectorScale(d.x); })
      .attr("y2", function(d) { return  vectorScale(d.y); })
      .attr("marker-end", "url(#arrowhead)")
      .style("stroke", "grey");

  writeNewMemory.data(newMemoryData)
    .each(function(d, i) {
      this.style.opacity = 0;
      d.top = writeNewMemoryBBox.y;
      d.left = writeNewMemoryBBox.x + i * nodeWidth;
      d.width = nodeWidth;
    });

  var writeNewMemoryVectors = writeSvg.selectAll(".new-vector")
      .data(newMemoryData)
    .enter().append("line")
      .attr("class", "new-vector")
      .attr("marker-end", "url(#arrowhead)")
      .style("stroke", "grey");

  function updateWriteAttention(data) {
    newMemoryData.forEach(function(d, i) {
      d.x = (memoryData[i].x + writeData.x * data[i]) / (1 + data[i]);
      d.y = (memoryData[i].y + writeData.y * data[i]) / (1 + data[i]);
    });
    writeNewMemoryVectors
        .attr("transform", function(d) {
          return "translate(" + (d.left + d.width / 2 - vectorScale(d.x) / 2) + ", " + (d.top + d.width / 2 - vectorScale(d.y) / 2) + ")";
        })
        .attr("x2", function(d) { return  vectorScale(d.x); })
        .attr("y2", function(d) { return  vectorScale(d.y); });

    writeAttention.data(data)
        .style("opacity", function(d) { return  d + 0.05; });

    writePath.data(data)
        .style("stroke-opacity", function(d) { return  d + 0.1; });
  }

  writeHtml.on("mousemove", function() {
    var data = [];
    writeAttention.each(function() {
      var bbox = this.getBoundingClientRect()
      var distance = Math.abs(bbox.left - d3.event.clientX + bbox.width / 2);
      data.push(Math.exp(-distance / 25));
    });
    data = data.map(function(d) { return  d / d3.sum(data); });
    updateWriteAttention(data);
  });

  var initWriteData = d3.range(writeAttention.size()).map(function(d) { return  Math.exp(-d); });
  initWriteData = initWriteData.map(function(d) { return  d / d3.sum(initWriteData); });
  updateWriteAttention(initWriteData);

})();
</script>
</dt-include></p>

  <p>But how do NTMs decide which positions in memory to focus their attention on? They actually use a combination of two different methods: content-based attention and location-based attention. Content-based attention allows NTMs to search through their memory and focus on places that match what they’re looking for, while location-based attention allows relative movement in memory, enabling the NTM to loop.</p>

  <p></p><figure class="l-page" id="rnn-write-detail">
    <dt-include src="assets/rnn_write_detail.svg"><svg id="edges" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 984 756">
  <defs>
    <symbol id="array-5" data-name="array-5" viewBox="0 0 181.5 37.5">
      <rect x="0.75" y="0.75" width="180" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
      <line x1="36.5" y1="36.75" x2="36.5" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="72.5" y1="36.75" x2="72.5" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="108.5" y1="36.75" x2="108.5" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="144.5" y1="36.75" x2="144.5" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
    </symbol>
    <symbol id="array-1" data-name="array-1" viewBox="0 0 37.5 37.5">
      <rect x="0.75" y="0.75" width="36" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="array-3" data-name="array-3" viewBox="0 0 109 37.5">
      <rect x="0.75" y="0.75" width="107.5" height="36" rx="6" ry="6" fill="#fff" stroke="#8c8c8c" stroke-miterlimit="10" stroke-width="1.5"></rect>
      <line x1="36.25" y1="36.75" x2="36.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
      <line x1="72.25" y1="36.75" x2="72.25" y2="0.75" fill="none" stroke="#8c8c8c" stroke-miterlimit="10"></line>
    </symbol>
    <symbol id="array-negative-value" data-name="array-negative-value" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#0080f7" opacity="0"></rect>
      <rect x="4.42" y="4.42" width="27.17" height="27.17" rx="6" ry="6" fill="#ff2bb6" opacity="0.8"></rect>
    </symbol>
    <symbol id="array-positive-value" data-name="array-positive-value" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#0080f7" opacity="0"></rect>
      <rect x="4.42" y="4.42" width="27.17" height="27.17" rx="6" ry="6" fill="#3a5edd" opacity="0.8"></rect>
    </symbol>
    <symbol id="array-vector" data-name="array-vector" viewBox="0 0 36 36">
      <rect width="36" height="36" fill="#d8c2f2" opacity="0"></rect>
      <g opacity="0.5">
        <g>
          <line x1="18" y1="24" x2="18" y2="13.08" fill="none" stroke="#000" stroke-miterlimit="10"></line>
          <polygon points="22.09 16.4 21.36 17.08 18 13.47 14.64 17.08 13.91 16.4 18 12 22.09 16.4"></polygon>
        </g>
      </g>
    </symbol>
    <symbol id="pointer" data-name="pointer" viewBox="0 0 26.87 26.87">
      <circle cx="13.43" cy="13.43" r="12.93" fill="none" stroke="#ffdc8c" stroke-miterlimit="10"></circle>
      <circle cx="13.43" cy="13.43" r="10.38" fill="#ffb200"></circle>
      <polygon points="11.32 19.26 11.32 17.43 10.72 17.43 10.71 16.14 10.1 16.21 10.1 15 9.54 14.99 9.46 13.78 8.88 13.78 8.89 13.16 8.28 13.16 8.28 11.34 10.11 11.34 10.11 11.94 10.71 11.94 10.71 6.46 11.33 6.45 11.33 5.86 12.54 5.86 12.54 6.45 13.16 6.47 13.16 8.89 14.37 8.89 14.39 9.49 16.21 9.51 16.21 10.12 17.43 10.12 17.43 10.79 18.04 10.73 18.05 11.39 18.65 11.33 18.65 15.61 18.04 15.52 17.98 17.43 17.43 17.43 17.43 19.26 11.32 19.26" fill="#fff" opacity="0.2"></polygon>
      <g>
        <path d="M10.11,11.94c0-.09,0-0.19,0-0.28s0-.21,0-0.32H8.28v1.82H8.89V11.95h1.23v0.63h0.6v0.6h0.61V13.09q0-2.4,0-4.8,0-.92,0-1.85h1.21V5.85H11.33v0.6H10.71v5.47h-0.6Zm4.28-2.44a0.45,0.45,0,0,1,0-.07c0-.15,0-0.3,0-0.45s0,0,0-.08H13.16V6.47H12.55v5.47h0.61V9.51h1.24s0,0.06,0,.09q0,1.12,0,2.25s0,0.07,0,.1H15V10.12h1.23v2.43h0.6V10.71l0.57,0s0,0,0,.05,0,0.29,0,.44,0,0.07,0,.11H18a0,0,0,0,1,.06.06c0,0.24,0,.48,0,0.72q0,1.71,0,3.41s0,0,0,.08h-0.6s0,0,0,0q0,0.86,0,1.72s0,0,0,.06H16.81v1.21H11.94V17.42H11.33V16.21h-0.6a11.4,11.4,0,0,0,0,1.22h0.6v1.83c2,0,4.07,0,6.11,0,0-.1,0-0.19,0-0.28,0-.46,0-0.93,0-1.39a1.53,1.53,0,0,0,0-.16H18c0.05,0,.07,0,0.07-0.07,0-.45,0-0.89,0-1.34,0-.13,0-0.26,0-0.4l0.3,0h0.3V11.33H18v-0.6H17.43V10.11H16.21V9.51H14.39ZM10.1,15v1.21h0.52a0.07,0.07,0,0,0,.08-0.08c0-.32,0-0.65,0-1,0-.06,0-0.11,0-0.17H10.11V13.77H9.49V13.16H8.91a2.7,2.7,0,0,0,0,.62H9.47s0,0,0,.07,0,0.27,0,.41,0,0.45,0,.68a0,0,0,0,0,.05.06H10.1Z" fill="#fff"></path>
        <path d="M17.43,17.43s0,0,0-.06q0-.86,0-1.72s0,0,0,0H18s0-.06,0-0.08q0-1.71,0-3.41c0-.24,0-0.48,0-0.72A0,0,0,0,0,18,11.33H17.44s0-.07,0-0.11,0-.29,0-0.44,0-.05,0-0.05l-0.57,0v1.84h-0.6V10.12H15v1.82H14.38s0-.07,0-0.1q0-1.12,0-2.25s0-.06,0-0.09h1.81v0.6h1.22v0.62H18v0.6h0.61v4.28h-0.3l-0.3,0c0,0.14,0,.27,0,0.4,0,0.45,0,.89,0,1.34,0,0.05,0,.07-0.07.07H17.43Z" fill="#fff"></path>
        <path d="M17.43,17.43a1.53,1.53,0,0,1,0,.16c0,0.46,0,.93,0,1.39,0,0.09,0,.17,0,0.28-2,0-4.06,0-6.11,0V17.43h-0.6a11.4,11.4,0,0,1,0-1.22h0.6v1.21h0.61v1.22h4.88V17.43h0.62Z" fill="#fff"></path>
        <path d="M11.33,6.45q0,0.92,0,1.85,0,2.4,0,4.8v0.07H10.72v-0.6h-0.6V11.93h0.6V6.46h0.61Z" fill="#fff"></path>
        <path d="M14.39,9.49H13.16v2.43H12.55V6.47h0.61V8.89h1.21s0,0.06,0,.08,0,0.3,0,.45a0.44,0.44,0,0,0,0,.07h0Z" fill="#fff"></path>
        <path d="M10.1,15H9.54a0,0,0,0,1-.05-0.06c0-.23,0-0.45,0-0.68s0-.27,0-0.41,0,0,0-.07H8.88a2.7,2.7,0,0,1,0-.62H9.49v0.61h0.62V15h0.61c0,0.06,0,.12,0,0.17,0,0.32,0,.65,0,1a0.07,0.07,0,0,1-.08.08H10.1V15Z" fill="#fff"></path>
        <path d="M10.11,11.93H8.89v1.21H8.28V11.34h1.83c0,0.11,0,.21,0,0.32s0,0.19,0,.28h0Z" fill="#fff"></path>
        <path d="M11.33,6.45V5.85h1.21v0.6H11.33Z" fill="#fff"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g>
    <line x1="763.09" y1="7" x2="763.59" y2="748" fill="#fff"></line>
    <g>
      <line x1="763.09" y1="7" x2="763.09" y2="8" fill="none" stroke="#aaa" stroke-miterlimit="10"></line>
      <line x1="763.09" y1="10" x2="763.59" y2="746" fill="none" stroke="#aaa" stroke-miterlimit="10" stroke-dasharray="2 2"></line>
      <line x1="763.59" y1="747" x2="763.59" y2="748" fill="none" stroke="#aaa" stroke-miterlimit="10"></line>
    </g>
  </g>
  <g>
    <g opacity="0">
      <g>
        <line x1="643.34" y1="208" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.17">
      <g>
        <line x1="643.34" y1="213" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.33">
      <g>
        <line x1="643.34" y1="218" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.5">
      <g>
        <line x1="643.34" y1="223" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.67">
      <g>
        <line x1="643.34" y1="228" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.83">
      <g>
        <line x1="643.34" y1="233" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
        <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
      </g>
    </g>
    <g>
      <line x1="643.34" y1="238" x2="643.34" y2="250.92" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M643.34,256.35a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,643.34,256.35Z" fill="#666"></path>
    </g>
  </g>
  <g>
    <line x1="375" y1="55" x2="375" y2="79.75" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,85.18a27.2,27.2,0,0,0-4.28-7.69L375,79l4.28-1.55A27.18,27.18,0,0,0,375,85.18Z" fill="#666"></path>
  </g>
  <g>
    <line x1="794.09" y1="103" x2="428.43" y2="103" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M423,103a27.2,27.2,0,0,0,7.69-4.28L429.14,103l1.55,4.28A27.18,27.18,0,0,0,423,103Z" fill="#666"></path>
  </g>
  <g>
    <line x1="794.09" y1="373" x2="428.43" y2="373" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M423,373a27.2,27.2,0,0,0,7.69-4.28L429.14,373l1.55,4.28A27.18,27.18,0,0,0,423,373Z" fill="#666"></path>
  </g>
  <g>
    <line x1="794.09" y1="499" x2="428.43" y2="499" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M423,499a27.2,27.2,0,0,0,7.69-4.28L429.14,499l1.55,4.28A27.18,27.18,0,0,0,423,499Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="114.82" x2="375" y2="139.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,145a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,145Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="186.82" x2="375" y2="211.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,217a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,217Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="247" x2="375" y2="271.75" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,277.18a27.2,27.2,0,0,0-4.28-7.69L375,271l4.28-1.55A27.18,27.18,0,0,0,375,277.18Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="318.82" x2="375" y2="343.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,349a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,349Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="378.82" x2="375" y2="403.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,409a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,409Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="451" x2="375" y2="475.75" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,481.18a27.2,27.2,0,0,0-4.28-7.69L375,475l4.28-1.55A27.18,27.18,0,0,0,375,481.18Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="510.82" x2="375" y2="535.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,541a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,541Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="583.82" x2="375" y2="608.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,614a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,614Z" fill="#666"></path>
  </g>
  <g>
    <line x1="375" y1="642.82" x2="375" y2="667.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M375,673a27.2,27.2,0,0,0-4.28-7.69l4.28,1.55,4.28-1.55A27.18,27.18,0,0,0,375,673Z" fill="#666"></path>
  </g>
  <g>
    <path d="M643.34,319v32a10,10,0,0,1-10,10H428.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M423,361a27.2,27.2,0,0,0,7.69-4.28L429.14,361l1.55,4.28A27.18,27.18,0,0,0,423,361Z" fill="#666"></path>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="334" y="621" width="84" height="24" rx="12" ry="12"></rect>
      <rect x="334" y="621" width="84" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
    <g>
      <rect x="333" y="619" width="84" height="24" rx="12" ry="12" fill="#fff"></rect>
      <rect x="333" y="619" width="84" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="334" y="489" width="84" height="24" rx="12" ry="12"></rect>
      <rect x="334" y="489" width="84" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
    <g>
      <rect x="333" y="487" width="84" height="24" rx="12" ry="12" fill="#fff"></rect>
      <rect x="333" y="487" width="84" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="334" y="357" width="84" height="24" rx="12" ry="12"></rect>
      <rect x="334" y="357" width="84" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
    <g>
      <rect x="333" y="355" width="84" height="24" rx="12" ry="12" fill="#fff"></rect>
      <rect x="333" y="355" width="84" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="334" y="225" width="84" height="24" rx="12" ry="12"></rect>
      <rect x="334" y="225" width="84" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
    <g>
      <rect x="333" y="223" width="84" height="24" rx="12" ry="12" fill="#fff"></rect>
      <rect x="333" y="223" width="84" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="334" y="93" width="84" height="24" rx="12" ry="12"></rect>
      <rect x="334" y="93" width="84" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
    <g>
      <rect x="333" y="91" width="84" height="24" rx="12" ry="12" fill="#fff"></rect>
      <rect x="333" y="91" width="84" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
    </g>
  </g>
  <use id="array-5-3" data-name="array-5" width="181.5" height="37.5" transform="translate(284 281.75)" xlink:href="#array-5"></use>
  <use width="181.5" height="37.5" transform="translate(552.34 282.75)" xlink:href="#array-5"></use>
  <use width="181.5" height="37.5" transform="translate(284 413.75)" xlink:href="#array-5"></use>
  <use id="array-5-10" data-name="array-5" width="181.5" height="37.5" transform="translate(284 546.75)" xlink:href="#array-5"></use>
  <use width="181.5" height="37.5" transform="translate(284 677.75)" xlink:href="#array-5"></use>
  <use width="37.5" height="37.5" transform="translate(794.84 348.75)" xlink:href="#array-1"></use>
  <use id="array-3-3" data-name="array-3" width="109" height="37.5" transform="translate(794.84 479.75)" xlink:href="#array-3"></use>
  <use width="181.5" height="37.5" transform="translate(284 149.75)" xlink:href="#array-5"></use>
  <g id="dot">
    <use width="36" height="36" transform="translate(285 150.25)" xlink:href="#array-negative-value"></use>
    <use width="36" height="36" transform="translate(321 150)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(357 150)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(393 150)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(429 150)" xlink:href="#array-positive-value"></use>
  </g>
  <use id="array-5-17" data-name="array-5" width="181.5" height="37.5" transform="translate(284 18.75)" xlink:href="#array-5"></use>
  <g id="softmax">
    <use width="36" height="36" transform="translate(285 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(321 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(357 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(393 283)" xlink:href="#array-positive-value"></use>
    <use id="array-positive-value-19" data-name="array-positive-value" width="36" height="36" transform="translate(429 283)" xlink:href="#array-positive-value"></use>
  </g>
  <g id="shift">
    <use width="36" height="36" transform="translate(795.59 480)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(831.59 480)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(867.59 480)" xlink:href="#array-positive-value"></use>
  </g>
  <use id="interpolate-amount" width="36" height="36" transform="translate(795.59 349)" xlink:href="#array-positive-value"></use>
  <g id="previous">
    <use width="36" height="36" transform="translate(553.34 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(589.34 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(625.34 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(661.34 283)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(697.34 283)" xlink:href="#array-positive-value"></use>
  </g>
  <g id="interpolate">
    <use width="36" height="36" transform="translate(285 414)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(321 414)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(357 414)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(393 414)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(429 414)" xlink:href="#array-positive-value"></use>
  </g>
  <g id="convolve">
    <use width="36" height="36" transform="translate(284.5 548)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(321 548)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(357 548)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(393 548)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(429 548)" xlink:href="#array-positive-value"></use>
  </g>
  <g id="new-attention">
    <use width="36" height="36" transform="translate(285 678)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(321 678)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(357 678)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(393 678)" xlink:href="#array-positive-value"></use>
    <use width="36" height="36" transform="translate(429 678)" xlink:href="#array-positive-value"></use>
  </g>
  <use width="37.5" height="37.5" transform="translate(794.84 83.75)" xlink:href="#array-1"></use>
  <g opacity="0.6">
    <text transform="translate(76 75.88)" font-size="13" font-family="Open Sans">First, the controller gives a query <tspan x="0" y="20">vector and each memory entry is </tspan><tspan x="0" y="40">scored for similarity with the </tspan><tspan x="0" y="60">query.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(77.83 213.88)" font-size="13" font-family="Open Sans">The scores are then converted <tspan x="0" y="20">into a distribution using softmax.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(77.83 352.88)" font-size="13" font-family="Open Sans">Next, we interpolate the <tspan x="0" y="20">attention from the previous </tspan><tspan x="0" y="40">time step. </tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(77.83 465.88)" font-size="13" font-family="Open Sans">We convolve the attention with <tspan x="0" y="20">a shift filter—this allows the </tspan><tspan x="0" y="40">controller to move its focus.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(77.83 598.88)" font-size="13" font-family="Open Sans">Finally, we sharpen the <tspan x="0" y="20">attention distribution. This </tspan><tspan x="0" y="40">final attention distribution is </tspan><tspan x="0" y="60">fed to the read or write </tspan><tspan x="0" y="80">operation.</tspan></text>
  </g>
  <g>
    <path d="M346.26,362.49a0.7,0.7,0,0,1,.19-0.52,0.72,0.72,0,0,1,.53-0.18,0.71,0.71,0,0,1,.52.18,0.7,0.7,0,0,1,.19.52,0.68,0.68,0,0,1-.19.51,0.7,0.7,0,0,1-.52.19,0.71,0.71,0,0,1-.53-0.19A0.68,0.68,0,0,1,346.26,362.49ZM347.6,370h-1.26v-5.94h1.26V370Z" fill="#666"></path>
    <path d="M354.63,370h-1.27v-3.65a1.6,1.6,0,0,0-.28-1,1.07,1.07,0,0,0-.88-0.34,1.4,1.4,0,0,0-1.17.47,2.61,2.61,0,0,0-.37,1.58v3H349.4v-5.94h1l0.18,0.78h0.06a1.75,1.75,0,0,1,.76-0.66,2.55,2.55,0,0,1,1.1-.23,1.91,1.91,0,0,1,2.14,2.18V370Z" fill="#666"></path>
    <path d="M358.6,369.09a3.07,3.07,0,0,0,.92-0.14v1a2.49,2.49,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89V365h-0.81v-0.56l0.87-.46,0.43-1.26h0.78v1.32h1.69v1h-1.69v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,358.6,369.09Z" fill="#666"></path>
    <path d="M363.3,370.11a2.87,2.87,0,0,1-2.17-.81,3.07,3.07,0,0,1-.78-2.23,3.37,3.37,0,0,1,.73-2.29,2.5,2.5,0,0,1,2-.83,2.45,2.45,0,0,1,1.86.71,2.73,2.73,0,0,1,.68,2v0.68h-4a2,2,0,0,0,.47,1.33,1.62,1.62,0,0,0,1.24.46,4.57,4.57,0,0,0,1-.1,5.06,5.06,0,0,0,1-.33v1a3.92,3.92,0,0,1-.93.31A5.76,5.76,0,0,1,363.3,370.11Zm-0.23-5.2a1.27,1.27,0,0,0-1,.38,1.81,1.81,0,0,0-.43,1.11h2.7a1.64,1.64,0,0,0-.35-1.11A1.21,1.21,0,0,0,363.07,364.91Z" fill="#666"></path>
    <path d="M370.06,364a3.08,3.08,0,0,1,.63.05l-0.12,1.18a2.39,2.39,0,0,0-.56-0.06,1.61,1.61,0,0,0-1.23.49,1.78,1.78,0,0,0-.47,1.28V370H367v-5.94h1l0.17,1h0.06a2.35,2.35,0,0,1,.77-0.84A1.84,1.84,0,0,1,370.06,364Z" fill="#666"></path>
    <path d="M374.8,370.11a2.08,2.08,0,0,1-1.75-.81H373q0.08,0.75.08,0.91v2.43h-1.26v-8.58h1q0,0.17.18,0.79h0.06a2,2,0,0,1,1.77-.9,2.06,2.06,0,0,1,1.73.81,4.42,4.42,0,0,1,0,4.53A2.08,2.08,0,0,1,374.8,370.11ZM374.5,365a1.31,1.31,0,0,0-1.1.44,2.29,2.29,0,0,0-.35,1.41V367a2.78,2.78,0,0,0,.34,1.57,1.28,1.28,0,0,0,1.12.49,1.14,1.14,0,0,0,1-.54,2.77,2.77,0,0,0,.35-1.53,2.68,2.68,0,0,0-.35-1.51A1.17,1.17,0,0,0,374.5,365Z" fill="#666"></path>
    <path d="M383.91,367a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.84,2.84,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,383.91,367Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,379.59,367Z" fill="#666"></path>
    <path d="M386.62,370h-1.26v-8.36h1.26V370Z" fill="#666"></path>
    <path d="M392.14,370l-0.25-.83h0a2.42,2.42,0,0,1-.86.74,2.73,2.73,0,0,1-1.12.2,1.89,1.89,0,0,1-1.37-.47,1.77,1.77,0,0,1-.49-1.34,1.57,1.57,0,0,1,.68-1.39,3.94,3.94,0,0,1,2.08-.51l1,0v-0.32a1.2,1.2,0,0,0-.27-0.85,1.08,1.08,0,0,0-.82-0.28,2.84,2.84,0,0,0-.88.13,6.6,6.6,0,0,0-.81.32l-0.41-.9a4.41,4.41,0,0,1,1.06-.38,4.86,4.86,0,0,1,1.08-.13,2.57,2.57,0,0,1,1.71.49A1.94,1.94,0,0,1,393,366v4h-0.9Zm-1.88-.86a1.56,1.56,0,0,0,1.1-.38,1.39,1.39,0,0,0,.42-1.08v-0.52l-0.76,0a2.62,2.62,0,0,0-1.3.3,0.91,0.91,0,0,0-.41.81,0.79,0.79,0,0,0,.24.61A1,1,0,0,0,390.26,369.14Z" fill="#666"></path>
    <path d="M397,369.09a3.07,3.07,0,0,0,.92-0.14v1a2.49,2.49,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89V365h-0.81v-0.56L395,364l0.43-1.26h0.78v1.32h1.69v1h-1.69v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,397,369.09Z" fill="#666"></path>
    <path d="M401.73,370.11a2.87,2.87,0,0,1-2.17-.81,3.07,3.07,0,0,1-.78-2.23,3.37,3.37,0,0,1,.73-2.29,2.5,2.5,0,0,1,2-.83,2.45,2.45,0,0,1,1.86.71,2.73,2.73,0,0,1,.68,2v0.68h-4a2,2,0,0,0,.47,1.33,1.62,1.62,0,0,0,1.24.46,4.57,4.57,0,0,0,1-.1,5.06,5.06,0,0,0,1-.33v1a3.92,3.92,0,0,1-.93.31A5.76,5.76,0,0,1,401.73,370.11Zm-0.23-5.2a1.27,1.27,0,0,0-1,.38,1.81,1.81,0,0,0-.43,1.11h2.7a1.64,1.64,0,0,0-.35-1.11A1.21,1.21,0,0,0,401.5,364.91Z" fill="#666"></path>
  </g>
  <g>
    <path d="M354.78,502.11a2.6,2.6,0,0,1-2-.79,4,4,0,0,1,0-4.56,2.72,2.72,0,0,1,2.12-.81,4,4,0,0,1,1.69.35l-0.38,1a3.84,3.84,0,0,0-1.32-.31q-1.54,0-1.54,2a2.45,2.45,0,0,0,.38,1.5,1.33,1.33,0,0,0,1.13.5,3.23,3.23,0,0,0,1.6-.42v1.1a2.49,2.49,0,0,1-.72.28A4.31,4.31,0,0,1,354.78,502.11Z" fill="#666"></path>
    <path d="M363.1,499a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.84,2.84,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,363.1,499Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,358.77,499Z" fill="#666"></path>
    <path d="M369.77,502H368.5v-3.65a1.6,1.6,0,0,0-.28-1,1.07,1.07,0,0,0-.88-0.34,1.4,1.4,0,0,0-1.17.47,2.61,2.61,0,0,0-.37,1.58v3h-1.26v-5.94h1l0.18,0.78h0.06a1.75,1.75,0,0,1,.76-0.66,2.55,2.55,0,0,1,1.1-.23,1.91,1.91,0,0,1,2.14,2.18V502Z" fill="#666"></path>
    <path d="M372.88,502l-2.26-5.94H372l1.21,3.45a6.85,6.85,0,0,1,.38,1.41h0a9.45,9.45,0,0,1,.38-1.41l1.21-3.45h1.34L374.25,502h-1.36Z" fill="#666"></path>
    <path d="M382.68,499a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.84,2.84,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,382.68,499Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,378.36,499Z" fill="#666"></path>
    <path d="M385.4,502h-1.26v-8.36h1.26V502Z" fill="#666"></path>
    <path d="M388.55,502l-2.26-5.94h1.33l1.21,3.45a6.85,6.85,0,0,1,.38,1.41h0a9.45,9.45,0,0,1,.38-1.41l1.21-3.45h1.34L389.92,502h-1.36Z" fill="#666"></path>
    <path d="M395.68,502.11a2.87,2.87,0,0,1-2.17-.81,3.07,3.07,0,0,1-.78-2.23,3.37,3.37,0,0,1,.73-2.29,2.5,2.5,0,0,1,2-.83,2.45,2.45,0,0,1,1.86.71,2.73,2.73,0,0,1,.68,2v0.68h-4a2,2,0,0,0,.47,1.33,1.62,1.62,0,0,0,1.24.46,4.57,4.57,0,0,0,1-.1,5.06,5.06,0,0,0,1-.33v1a3.92,3.92,0,0,1-.93.31A5.76,5.76,0,0,1,395.68,502.11Zm-0.23-5.2a1.27,1.27,0,0,0-1,.38,1.81,1.81,0,0,0-.43,1.11h2.7a1.64,1.64,0,0,0-.35-1.11A1.21,1.21,0,0,0,395.45,496.91Z" fill="#666"></path>
  </g>
  <g>
    <path d="M358.08,632.31a1.55,1.55,0,0,1-.63,1.33,3,3,0,0,1-1.82.46,4.29,4.29,0,0,1-1.91-.36v-1.09a4.68,4.68,0,0,0,1.95.48q1.17,0,1.17-.7a0.56,0.56,0,0,0-.13-0.38,1.53,1.53,0,0,0-.42-0.31,7.3,7.3,0,0,0-.82-0.37,3.81,3.81,0,0,1-1.39-.79,1.47,1.47,0,0,1-.36-1,1.35,1.35,0,0,1,.62-1.18A2.92,2.92,0,0,1,356,628a4.74,4.74,0,0,1,2,.42l-0.41,1a4.4,4.4,0,0,0-1.62-.4q-1,0-1,.57a0.57,0.57,0,0,0,.26.47,5.72,5.72,0,0,0,1.14.53,5.19,5.19,0,0,1,1.07.52,1.56,1.56,0,0,1,.49.54A1.58,1.58,0,0,1,358.08,632.31Z" fill="#666"></path>
    <path d="M364.67,634H363.4v-3.65a1.6,1.6,0,0,0-.28-1,1.07,1.07,0,0,0-.88-0.34,1.39,1.39,0,0,0-1.17.48,2.62,2.62,0,0,0-.37,1.59V634h-1.26v-8.36h1.26v2.12a9.9,9.9,0,0,1-.06,1.09h0.08a1.76,1.76,0,0,1,.72-0.67,2.31,2.31,0,0,1,1.07-.24,1.92,1.92,0,0,1,2.16,2.18V634Z" fill="#666"></path>
    <path d="M370.14,634l-0.25-.83h0a2.43,2.43,0,0,1-.86.74,2.73,2.73,0,0,1-1.12.2,1.89,1.89,0,0,1-1.37-.47,1.77,1.77,0,0,1-.49-1.34,1.57,1.57,0,0,1,.68-1.39,3.93,3.93,0,0,1,2.08-.51l1,0v-0.32a1.2,1.2,0,0,0-.27-0.85,1.08,1.08,0,0,0-.82-0.28,2.86,2.86,0,0,0-.88.13,6.61,6.61,0,0,0-.81.32l-0.41-.9a4.37,4.37,0,0,1,1.06-.38,4.86,4.86,0,0,1,1.08-.13,2.57,2.57,0,0,1,1.71.49A1.94,1.94,0,0,1,371,630v4h-0.9Zm-1.88-.86a1.56,1.56,0,0,0,1.1-.38,1.39,1.39,0,0,0,.42-1.08v-0.52l-0.76,0a2.62,2.62,0,0,0-1.3.3,0.91,0.91,0,0,0-.41.81,0.79,0.79,0,0,0,.24.61A1,1,0,0,0,368.26,633.14Z" fill="#666"></path>
    <path d="M375.82,628a3,3,0,0,1,.63.05l-0.12,1.18a2.39,2.39,0,0,0-.56-0.06,1.61,1.61,0,0,0-1.23.49,1.79,1.79,0,0,0-.47,1.28V634H372.8v-5.94h1l0.17,1H374a2.35,2.35,0,0,1,.77-0.84A1.83,1.83,0,0,1,375.82,628Z" fill="#666"></path>
    <path d="M380.56,634.11a2.08,2.08,0,0,1-1.75-.81h-0.08q0.08,0.75.08,0.91v2.43h-1.26v-8.58h1q0,0.17.18,0.79h0.06a2,2,0,0,1,1.77-.9,2.06,2.06,0,0,1,1.73.81,4.42,4.42,0,0,1,0,4.53A2.08,2.08,0,0,1,380.56,634.11ZM380.25,629a1.31,1.31,0,0,0-1.1.44,2.29,2.29,0,0,0-.35,1.41V631a2.78,2.78,0,0,0,.34,1.57,1.28,1.28,0,0,0,1.12.49,1.14,1.14,0,0,0,1-.54,2.77,2.77,0,0,0,.35-1.53,2.68,2.68,0,0,0-.35-1.51A1.17,1.17,0,0,0,380.25,629Z" fill="#666"></path>
    <path d="M387,634.11a2.87,2.87,0,0,1-2.17-.81,3.07,3.07,0,0,1-.78-2.23,3.37,3.37,0,0,1,.73-2.29,2.5,2.5,0,0,1,2-.83,2.45,2.45,0,0,1,1.86.71,2.73,2.73,0,0,1,.68,2v0.68h-4a2,2,0,0,0,.47,1.33,1.63,1.63,0,0,0,1.24.46,4.57,4.57,0,0,0,1-.1,5.13,5.13,0,0,0,1-.33v1a3.88,3.88,0,0,1-.93.31A5.71,5.71,0,0,1,387,634.11Zm-0.23-5.2a1.27,1.27,0,0,0-1,.38,1.81,1.81,0,0,0-.43,1.11h2.7a1.64,1.64,0,0,0-.35-1.11A1.21,1.21,0,0,0,386.76,628.91Z" fill="#666"></path>
    <path d="M396,634H394.7v-3.65a1.6,1.6,0,0,0-.28-1,1.07,1.07,0,0,0-.88-0.34,1.4,1.4,0,0,0-1.17.47A2.61,2.61,0,0,0,392,631v3h-1.26v-5.94h1l0.18,0.78H392a1.76,1.76,0,0,1,.76-0.66,2.56,2.56,0,0,1,1.1-.23,1.91,1.91,0,0,1,2.14,2.18V634Z" fill="#666"></path>
  </g>
  <g>
    <path d="M358.22,236.31a1.55,1.55,0,0,1-.63,1.33,3,3,0,0,1-1.82.46,4.29,4.29,0,0,1-1.91-.36v-1.09a4.68,4.68,0,0,0,1.95.48q1.17,0,1.17-.7a0.56,0.56,0,0,0-.13-0.38,1.53,1.53,0,0,0-.42-0.31,7.3,7.3,0,0,0-.82-0.37,3.81,3.81,0,0,1-1.39-.79,1.47,1.47,0,0,1-.36-1,1.35,1.35,0,0,1,.62-1.18,2.92,2.92,0,0,1,1.67-.42,4.74,4.74,0,0,1,2,.42l-0.41,1a4.4,4.4,0,0,0-1.62-.4q-1,0-1,.57a0.57,0.57,0,0,0,.26.47,5.72,5.72,0,0,0,1.14.53,5.19,5.19,0,0,1,1.07.52,1.56,1.56,0,0,1,.49.54A1.58,1.58,0,0,1,358.22,236.31Z" fill="#666"></path>
    <path d="M364.85,235a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.85,2.85,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,364.85,235Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,360.53,235Z" fill="#666"></path>
    <path d="M369.29,233h-1.45v5h-1.27v-5h-1v-0.59l1-.39v-0.39a2.16,2.16,0,0,1,.49-1.56,2,2,0,0,1,1.51-.51,4,4,0,0,1,1.31.22l-0.33,1a2.92,2.92,0,0,0-.89-0.15,0.73,0.73,0,0,0-.63.27,1.34,1.34,0,0,0-.2.8v0.39h1.45v1Z" fill="#666"></path>
    <path d="M372.51,237.09a3.07,3.07,0,0,0,.92-0.15v1a2.55,2.55,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89V233H369.6v-0.56l0.87-.46,0.43-1.26h0.78v1.32h1.69v1h-1.69v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,372.51,237.09Z" fill="#666"></path>
    <path d="M379.62,238h-1.27v-3.66a1.66,1.66,0,0,0-.26-1,1,1,0,0,0-.81-0.34,1.23,1.23,0,0,0-1.07.48,2.78,2.78,0,0,0-.34,1.58v3h-1.26v-5.94h1l0.18,0.78h0.06a1.64,1.64,0,0,1,.72-0.66,2.31,2.31,0,0,1,1-.23,1.81,1.81,0,0,1,1.82.93h0.09a1.81,1.81,0,0,1,.74-0.69,2.36,2.36,0,0,1,1.1-.25,2,2,0,0,1,1.55.54,2.38,2.38,0,0,1,.49,1.64V238h-1.26v-3.66a1.65,1.65,0,0,0-.26-1A1,1,0,0,0,381,233a1.25,1.25,0,0,0-1.08.46,2.37,2.37,0,0,0-.34,1.41V238Z" fill="#666"></path>
    <path d="M388.85,238l-0.25-.83h0a2.43,2.43,0,0,1-.86.74,2.73,2.73,0,0,1-1.12.2,1.89,1.89,0,0,1-1.37-.47,1.77,1.77,0,0,1-.49-1.34,1.57,1.57,0,0,1,.68-1.39,3.93,3.93,0,0,1,2.08-.51l1,0v-0.32a1.2,1.2,0,0,0-.27-0.85,1.08,1.08,0,0,0-.82-0.28,2.86,2.86,0,0,0-.88.13,6.61,6.61,0,0,0-.81.32l-0.41-.9a4.37,4.37,0,0,1,1.06-.38,4.86,4.86,0,0,1,1.08-.13,2.57,2.57,0,0,1,1.71.49,1.94,1.94,0,0,1,.58,1.55v4h-0.9Zm-1.88-.86a1.56,1.56,0,0,0,1.1-.38,1.39,1.39,0,0,0,.42-1.08v-0.52l-0.76,0a2.62,2.62,0,0,0-1.3.3,0.91,0.91,0,0,0-.41.81,0.79,0.79,0,0,0,.24.61A1,1,0,0,0,387,237.14Z" fill="#666"></path>
    <path d="M392.84,235l-2-2.91h1.44l1.35,2.08,1.36-2.08h1.43l-2,2.91,2.1,3H395.1l-1.47-2.22L392.18,238h-1.43Z" fill="#666"></path>
  </g>
  <g>
    <path d="M346.57,106.27a2.07,2.07,0,0,1-1.73-.81,4.42,4.42,0,0,1,0-4.54,2.09,2.09,0,0,1,1.75-.81,2,2,0,0,1,1.78.86h0.06a7.54,7.54,0,0,1-.09-1V97.81h1.27v8.36h-1l-0.22-.78h-0.06A2,2,0,0,1,346.57,106.27Zm0.34-1a1.37,1.37,0,0,0,1.13-.44,2.31,2.31,0,0,0,.37-1.42v-0.18a2.66,2.66,0,0,0-.37-1.6,1.36,1.36,0,0,0-1.14-.47,1.16,1.16,0,0,0-1,.54,2.77,2.77,0,0,0-.36,1.54,2.69,2.69,0,0,0,.35,1.51A1.18,1.18,0,0,0,346.91,105.25Z" fill="#666"></path>
    <path d="M356.69,103.19a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.85,2.85,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,356.69,103.19Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,352.36,103.19Z" fill="#666"></path>
    <path d="M360.35,105.25a3.07,3.07,0,0,0,.92-0.15v1a2.55,2.55,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89v-3.2h-0.81v-0.56l0.87-.46,0.43-1.26h0.78v1.32h1.69v1h-1.69v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,360.35,105.25Z" fill="#666"></path>
    <path d="M368.33,106.27a2.08,2.08,0,0,1-1.75-.81h-0.08q0.08,0.75.08,0.91v2.43h-1.26v-8.58h1q0,0.17.18,0.79h0.06a2,2,0,0,1,1.77-.9,2.06,2.06,0,0,1,1.73.81,4.42,4.42,0,0,1,0,4.53A2.08,2.08,0,0,1,368.33,106.27ZM368,101.15a1.31,1.31,0,0,0-1.1.44,2.29,2.29,0,0,0-.35,1.41v0.19a2.78,2.78,0,0,0,.34,1.57,1.28,1.28,0,0,0,1.12.49,1.14,1.14,0,0,0,1-.54,2.77,2.77,0,0,0,.35-1.53,2.68,2.68,0,0,0-.35-1.51A1.17,1.17,0,0,0,368,101.15Z" fill="#666"></path>
    <path d="M375.19,100.12a3,3,0,0,1,.63.05l-0.12,1.18a2.39,2.39,0,0,0-.56-0.06,1.61,1.61,0,0,0-1.23.49,1.79,1.79,0,0,0-.47,1.28v3.1h-1.26v-5.94h1l0.17,1h0.06a2.35,2.35,0,0,1,.77-0.84A1.83,1.83,0,0,1,375.19,100.12Z" fill="#666"></path>
    <path d="M382.18,103.19a3.24,3.24,0,0,1-.75,2.27,2.67,2.67,0,0,1-2.08.82,2.85,2.85,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,382.18,103.19Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.68,2.68,0,0,0,377.86,103.19Z" fill="#666"></path>
    <path d="M385.64,106.27a2.07,2.07,0,0,1-1.73-.81,4.42,4.42,0,0,1,0-4.54,2.09,2.09,0,0,1,1.75-.81,2,2,0,0,1,1.78.86h0.06a7.54,7.54,0,0,1-.09-1V97.81h1.27v8.36h-1l-0.22-.78h-0.06A2,2,0,0,1,385.64,106.27Zm0.34-1a1.37,1.37,0,0,0,1.13-.44,2.31,2.31,0,0,0,.37-1.42v-0.18a2.66,2.66,0,0,0-.37-1.6,1.36,1.36,0,0,0-1.14-.47,1.16,1.16,0,0,0-1,.54,2.77,2.77,0,0,0-.36,1.54,2.69,2.69,0,0,0,.35,1.51A1.18,1.18,0,0,0,386,105.25Z" fill="#666"></path>
    <path d="M394.68,106.17l-0.18-.78h-0.06a1.79,1.79,0,0,1-.75.65,2.5,2.5,0,0,1-1.11.24,2.18,2.18,0,0,1-1.61-.54,2.23,2.23,0,0,1-.53-1.63v-3.88h1.27v3.66a1.59,1.59,0,0,0,.28,1,1.07,1.07,0,0,0,.88.34,1.39,1.39,0,0,0,1.17-.48,2.62,2.62,0,0,0,.37-1.59v-3h1.27v5.94h-1Z" fill="#666"></path>
    <path d="M399.87,106.27a2.6,2.6,0,0,1-2-.79,4,4,0,0,1,0-4.56,2.72,2.72,0,0,1,2.12-.81,4,4,0,0,1,1.69.35l-0.38,1a3.83,3.83,0,0,0-1.32-.31q-1.54,0-1.54,2a2.45,2.45,0,0,0,.38,1.5,1.33,1.33,0,0,0,1.13.5,3.23,3.23,0,0,0,1.6-.42v1.1a2.49,2.49,0,0,1-.72.28A4.34,4.34,0,0,1,399.87,106.27Z" fill="#666"></path>
    <path d="M405.13,105.25a3.07,3.07,0,0,0,.92-0.15v1a2.55,2.55,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89v-3.2h-0.81v-0.56l0.87-.46,0.43-1.26h0.78v1.32H406v1H404.3v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,405.13,105.25Z" fill="#666"></path>
  </g>
  <g id="query">
    <use id="q" width="36" height="36" transform="translate(795.59 85)" xlink:href="#array-vector"></use>
  </g>
  <g id="memory">
    <use width="36" height="36" transform="translate(285 19)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(321 19)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(357 19)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(393 19)" xlink:href="#array-vector"></use>
    <use width="36" height="36" transform="translate(429 19)" xlink:href="#array-vector"></use>
  </g>
  <use width="26.87" height="26.87" transform="translate(840.37 89.78)" xlink:href="#pointer"></use>
  <use width="26.87" height="26.87" transform="translate(841.72 353.66)" xlink:href="#pointer"></use>
  <use width="26.87" height="26.87" transform="translate(912.89 484.66)" xlink:href="#pointer"></use>
  <g opacity="0.6">
    <text transform="translate(558 -161.12)" font-size="13" font-family="Open Sans">The RNN gives an attention distribution, <tspan x="0" y="20">describing how much we should change </tspan><tspan x="0" y="40">each memory position towards the write </tspan><tspan x="0" y="60">value.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(475.41 40)" font-size="13" font-family="Open Sans">memory</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(478.5 163.63)" font-size="13" font-family="Open Sans" font-style="italic">Blue shows high similarity, <tspan x="0" y="20">pink high dissimilarity.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(795.09 335)" font-size="13" font-family="Open Sans">interpolation amount</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(795.09 467)" font-size="13" font-family="Open Sans">shift filter</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(775.09 19)" font-size="13" font-family="Open Sans" font-style="italic">RNN controller</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(628.56 19)" font-size="13" font-family="Open Sans" font-style="italic">attention mechanism</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(795.09 71)" font-size="13" font-family="Open Sans">query vector</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(557.03 273)" font-size="13" font-family="Open Sans">attention from previous step</text>
  </g>
  <g opacity="0.6">
    <text transform="translate(296.09 735)" font-size="13" font-family="Open Sans">new attention distribution</text>
  </g>
  <circle id="query-hover" cx="812.96" cy="102.44" r="87.04" fill="#fff" fill-opacity="0"></circle>
  <circle id="interpolate-hover" cx="812.96" cy="364.04" r="41.37" fill="#fff" fill-opacity="0"></circle>
  <rect id="shift-hover" x="775.59" y="456" width="168" height="84" fill-opacity="0" opacity="0.6"></rect>
</svg>
</dt-include>
  </figure><p></p>

  <p><dt-include src="assets/rnn_write_detail.html"><script>
"use strict";
//
// Data
//

var vectorScale = d3.scaleLinear().domain([0, 1]).range([-14, 14]);

var memoryData = [{ x: 0.4, y: 0.2 }, { x: 0.2, y: 0.2 }, { x: 0.1, y: 0.9 }, { x: 0.9, y: 0.9 }, { x: 0.4, y: 0.3 }];
var interpolationData = [0.3];
var shiftData = [0, 0.2, 0.8];
var previousAttentionData = [0, 0.2, 0, 0.2, 0.6];

//
// DOM
//

var nodeWidth = 36;
var html = d3.selectAll("#rnn-write-detail");
var svg = html.select("svg");
var query = svg.selectAll("#query").style("opacity", 0);
var memory = svg.selectAll("#memory use").style("opacity", 0);
var memoryBBox = svg.select("#memory").node().getBBox();
var shift = svg.selectAll("#shift use");

//
// Render
//

// Store positions of vectors
function cachePositions(selection) {
  selection.each(function (d) {
    var bBox = this.getBBox();
    d.top = bBox.y;
    d.left = bBox.x;
    d.width = bBox.width;
  });
}

// Render new vector lines
function renderVector(selection) {
  selection.attr("transform", function (d) {
    return "translate(" + (d.left + d.width / 2 - vectorScale(d.x) / 2) + ", " + (d.top + d.width / 2 - vectorScale(d.y) / 2) + ")";
  }).attr("x2", function (d) {
    return vectorScale(d.x);
  }).attr("y2", function (d) {
    return vectorScale(d.y);
  }).attr("marker-end", "url(#arrowhead)").style("stroke", "grey");
}

// Memory
memory.data(memoryData);
memory.each(function(d, i) {
  d.top = memoryBBox.y;
  d.left = memoryBBox.x + nodeWidth * i;
  d.width = nodeWidth;
})
// cachePositions(memory);
var memoryVector = svg.selectAll(".memory-vector").data(memoryData).enter().append("line").attr("class", "memory-vector");
renderVector(memoryVector);

var queryData = [{ x: 0.7, y: 0.8 }];
query.data(queryData);
cachePositions(query);

var queryVector = svg.selectAll(".query-vector").data(queryData).enter().append("line").attr("class", "query-vector");

var clamp = d3.scaleLinear().clamp(true);

function redraw() {

  renderVector(queryVector);

  // Dot
  var dotData = memoryData.map(function (v) {
    return 2 * (v.x - 0.5) * 2 * (queryData[0].x - 0.5) + 2 * (v.y - 0.5) * 2 * (queryData[0].y - 0.5);
  });
  svg.selectAll("#dot use").data(dotData).attr("xlink:href", function (d) {
    return d < 0 ? "#array-negative-value" : "#array-positive-value";
  }).style("opacity", function (d) {
    return Math.abs(d);
  });

  // Softmax
  var expDotData = dotData.map(Math.exp);
  var softmaxData = expDotData.map(function (x) {
    return x / d3.sum(expDotData);
  });
  svg.selectAll("#softmax use").data(softmaxData).style("opacity", function (d) {
    return d;
  });

  // Interpolate
  svg.selectAll("#previous use").data(previousAttentionData).style("opacity", function (d) {
    return d;
  });

  svg.selectAll("#interpolate-amount").data(interpolationData).style("opacity", function (d) {
    return d;
  });

  var interpolateData = previousAttentionData.map(function (d, i) {
    return interpolationData * d + (1 - interpolationData) * softmaxData[i];
  });
  svg.selectAll("#interpolate use").data(interpolateData).style("opacity", function (d) {
    return d;
  });

  // Convolve
  shift.data(shiftData).style("opacity", function (d) {
    return d;
  });

  var convolveData = dotData.map(function (x) {
    return 0;
  });
  for (var n in shiftData) {
    for (var i in convolveData) {
      if (i - (1 - n) >= 0) {
        convolveData[i - (1 - n)] += shiftData[n] * interpolateData[i];
      }
    }
  }
  // = dotData;
  svg.selectAll("#convolve use").data(convolveData).style("opacity", function (d) {
    return d;
  });

  // Sharpen
  var sharpenData = convolveData.map(function (x) {
    return x * x;
  });
  sharpenData = sharpenData.map(function (x) {
    return x / d3.sum(sharpenData);
  });
  svg.selectAll("#new-attention use").data(sharpenData).style("opacity", function (d) {
    return d;
  });
}

svg.select("#query-hover").on("mousemove", function () {
  var bbox = svg.select("#query").node().getBoundingClientRect();
  var x = d3.event.clientX - bbox.left - bbox.width / 2;
  var y = d3.event.clientY - bbox.top - bbox.height / 2;
  //TODO: this clamping is awkward
  queryData[0].x = clamp((x + 25) / 50);
  queryData[0].y = clamp((y + 25) / 50);
  redraw();
});
svg.select("#interpolate-hover").on("mousemove", function () {
  var bbox = svg.select("#interpolate-amount").node().getBoundingClientRect();
  interpolationData = [Math.max(0, Math.min(1, (d3.event.clientX - bbox.left) / bbox.width))];
  redraw();
});
// .on("mouseout", function() {
//   interpolationData = [0.3];
//   redraw();
// });

svg.select("#shift-hover").on("mousemove", function () {
  //  shiftData = [0, 0.2, 0.8];
  shiftData = [];
  shift.each(function () {
    var bbox = this.getBoundingClientRect();
    var distance = Math.abs(bbox.left - d3.event.clientX + bbox.width / 2);
    shiftData.push(Math.exp(-distance / 25));
  });
  shiftData = shiftData.map(function (d) {
    return d / d3.sum(shiftData);
  });
  redraw();
});
redraw();

</script>
</dt-include></p>

  <p>This capability to read and write allows NTMs to perform many simple algorithms, previously beyond neural networks. For example, they can learn to store a long sequence in memory, and then loop over it, repeating it back repeatedly. As they do this, we can watch where they read and write, to better understand what they're doing:</p>

  <p></p><figure class="l-body side">
    <img src="assets/NTM-Copy-ReadWrite.svg">
    <figcaption style="bottom: 0px;">See more experiments in <dt-cite key="xu2015show"></dt-cite>. This figure is based on the Repeat Copy experiment.</figcaption>
  </figure><p></p>

  <p>They can also learn to mimic a lookup table, or even learn to sort numbers (although they kind of cheat)! On the other hand, they still can’t do many basic things, like add or multiply numbers.</p>

  <p>Since the original NTM paper, there have been a number of exciting papers exploring similar directions. The Neural GPU <dt-cite key="kaiser2015neural"></dt-cite> overcomes the NTM's inability to add and multiply numbers.  <dt-cite key="zaremba2015reinforcement">Zaremba &amp; Sutskever</dt-cite> train NTMs using reinforcement learning instead of the differentiable read/writes used by the original. Neural Random Access Machines <dt-cite key="kurach2015neural"></dt-cite> work based on pointers. Some papers have explored differentiable data structures, like stacks and queues <dt-cite key="grefenstette2015learning,joulin2015inferring"></dt-cite>. And memory networks <dt-cite key="weston2014memory,kumar2015ask"></dt-cite> are another approach to attacking similar problems.</p>

  <p>In some objective sense, many of the tasks these models can perform--such as learning how to add numbers--aren't that objectively hard. The traditional program synthesis community would eat them for lunch. But neural networks are capable of many other things, and models like the Neural Turing Machine seem to have knocked away a very profound limit on their abilities.</p>

  <h3>Code</h3>

  <p>There are a number of open source implementations of these models. Open source implementations of the Neural Turing Machine include <a href="https://github.com/carpedm20/NTM-tensorflow">Taehoon Kim's</a> (TensorFlow), <a href="https://github.com/shawntan/neural-turing-machines">Shawn Tan's</a> (Theano), <a href="https://github.com/fumin/ntm">Fumin's</a> (Go), <a href="https://github.com/kaishengtai/torch-ntm">Kai Sheng Tai's</a> (Torch), and <a href="https://github.com/snipsco/ntm-lasagne">Snip's</a> (Lasagne). Code for the Neural GPU publication was open sourced and put in the <a href="https://github.com/tensorflow/models/tree/master/research/neural_gpu">TensorFlow Models repository</a>. Open source implementations of Memory Networks include <a href="https://github.com/facebook/MemNN">Facebook's</a> (Torch/Matlab), <a href="https://github.com/YerevaNN/Dynamic-memory-networks-in-Theano">YerevaNN's</a> (Theano), and <a href="https://github.com/carpedm20/MemN2N-tensorflow">Taehoon Kim's</a> (TensorFlow). </p><p></p>

  <hr>

  <h2 id="attentional-interfaces">Attentional Interfaces</h2>

  <p>When I’m translating a sentence, I pay special attention to the word I’m presently translating. When I’m transcribing an audio recording, I listen carefully to the segment I’m actively writing down. And if you ask me to describe the room I’m sitting in, I’ll glance around at the objects I’m describing as I do so.</p>

  <p>Neural networks can achieve this same behavior using <em>attention</em>, focusing on part of a subset of the information they're given. For example, an RNN can attend over the output of another RNN. At every time step, it focuses on different positions in the other RNN.</p>

  <p>We'd like attention to be differentiable, so that we can learn where to focus. To do this, we use the same trick Neural Turing Machines use: we focus everywhere, just to different extents.</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_attentional_01.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 258">
  <defs>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-b" data-name="rnn-b" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M19.83,16.21h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25,6,6,0,0,1-3.94,1.17H19.83V16.21Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58H21.64v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68H21.64Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-15" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect x="281.56" y="15" width="360.44" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect x="281.56" y="15" width="360.44" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <rect x="1.56" y="171" width="360.44" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect x="1.56" y="171" width="360.44" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <g>
    <line x1="413" y1="111.81" x2="413" y2="85.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M413,80a27.2,27.2,0,0,0,4.28,7.69L413,86.14l-4.28,1.55A27.17,27.17,0,0,0,413,80Z" fill="#666"></path>
  </g>
  <g>
    <line x1="317" y1="111.81" x2="317" y2="85.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M317,80a27.2,27.2,0,0,0,4.28,7.69L317,86.14l-4.28,1.55A27.17,27.17,0,0,0,317,80Z" fill="#666"></path>
  </g>
  <g>
    <line x1="339.92" y1="51.73" x2="378.57" y2="51.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M384,51.73A27.2,27.2,0,0,0,376.31,56l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,384,51.73Z" fill="#666"></path>
  </g>
  <g>
    <line x1="59.92" y1="207" x2="98.57" y2="207" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M104,207a27.2,27.2,0,0,0-7.69,4.28L97.86,207l-1.55-4.28A27.18,27.18,0,0,0,104,207Z" fill="#666"></path>
  </g>
  <g>
    <line x1="155.92" y1="207" x2="194.57" y2="207" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M200,207a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,200,207Z" fill="#666"></path>
  </g>
  <g>
    <line x1="251.92" y1="207" x2="290.57" y2="207" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M296,207a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,296,207Z" fill="#666"></path>
  </g>
  <g>
    <line x1="436.92" y1="51.73" x2="474.57" y2="51.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M480,51.73A27.2,27.2,0,0,0,472.31,56l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,480,51.73Z" fill="#666"></path>
  </g>
  <g>
    <line x1="531.92" y1="51.73" x2="570.57" y2="51.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M576,51.73A27.2,27.2,0,0,0,568.31,56l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,576,51.73Z" fill="#666"></path>
  </g>
  <g>
    <line x1="509" y1="111.81" x2="509" y2="85.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M509,80a27.2,27.2,0,0,0,4.28,7.69L509,86.14l-4.28,1.55A27.17,27.17,0,0,0,509,80Z" fill="#666"></path>
  </g>
  <g>
    <line x1="605" y1="111.81" x2="605" y2="85.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M605,80a27.2,27.2,0,0,0,4.28,7.69L605,86.14l-4.28,1.55A27.17,27.17,0,0,0,605,80Z" fill="#666"></path>
  </g>
  <g>
    <g opacity="0.2">
      <path d="M38.5,202V166.5a11.56,11.56,0,0,1,9.93-11.17l253.64-29.89c5.46-.64,9.93-4.16,9.93-7.81V111" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.4">
      <path d="M134,202V170.29a12.42,12.42,0,0,1,9.85-11.75l161.31-28.72c5.41-1,9.85-5.59,9.85-10.28V111" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <path d="M230,202V174.08a15.4,15.4,0,0,1,9.39-13.44l69.22-25.35A15.4,15.4,0,0,0,318,121.85V111" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g opacity="0.2">
      <path d="M325.5,202V174.08a167.71,167.71,0,0,0-1.44-19.9l-1.25-8.64a167.71,167.71,0,0,1-1.44-19.9V111" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
  </g>
  <g>
    <path d="M408.67,115a36.23,36.23,0,0,1,.33,6c-2,9-12,9-20.38,9.39L367.5,131.5" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M369.42,131.4l19.42-1C397.17,130,408,130.08,409,121a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M371.34,131.3l17.73-.93C397.34,130,408,130,409,121a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M373.26,131.2l16-.84C397.51,130,408,129.92,409,121a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M375.18,131.09l14.33-.75C397.67,130,408,129.84,409,121a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M377.1,131l12.64-.66c8.1-.37,18.3-0.57,19.26-9.34a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M379,130.89l10.94-.57c8-.37,18.08-0.64,19-9.33a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M380.94,130.79l9.25-.47c8-.37,17.87-0.71,18.81-9.32a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M382.86,130.69l7.55-.38c7.94-.37,17.65-0.78,18.59-9.31a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M384.78,130.59l5.85-.29c7.88-.36,17.44-0.85,18.37-9.3a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M386.7,130.49l4.16-.2c7.83-.36,17.23-0.93,18.14-9.29a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M388.62,130.39l2.46-.11c7.77-.36,16.11-1.14,17.92-9.28a36.23,36.23,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M411.67,115c0,5.08,1,10.8-2.73,14.82-4,4.25-11,4.32-16.43,5.14L369,137.5" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M371.14,137.27L392.57,135c5.43-.78,12.38-0.9,16.36-5.13,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M373.27,137l19.37-2.1c5.41-.77,12.33-0.91,16.29-5.12,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.16"></path>
    <path d="M375.41,136.81l17.3-1.88c5.4-.77,12.28-0.92,16.22-5.11,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.25"></path>
    <path d="M377.55,136.58l15.23-1.65c5.39-.76,12.23-0.93,16.16-5.1,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.33"></path>
    <path d="M379.68,136.35l13.16-1.43c5.38-.76,12.18-0.93,16.09-5.09s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.41"></path>
    <path d="M381.82,136.12l11.09-1.21c5.37-.75,12.13-0.94,16-5.08s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.49"></path>
    <path d="M384,135.88l9-1c5.36-.75,12.08-1,16-5.07s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.57"></path>
    <path d="M386.1,135.65l7-.77c5.35-.75,12-1,15.88-5.06s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.65"></path>
    <path d="M388.23,135.42l4.88-.55c5.33-.75,12-1,15.82-5.06s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.74"></path>
    <path d="M390.37,135.19l2.82-.33c5.32-.74,11.92-1,15.75-5s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.82"></path>
    <path d="M392.51,135l0.75-.11c5.31-.73,11.87-1,15.68-5s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.9"></path>
  </g>
  <g>
    <path d="M414.67,115v8.09c0,6.89-2.61,13.08-9.7,15.37-1.66.54-3.39,0.91-5.07,1.36L379,147" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M380.9,146.35L400,139.79c1.65-.43,3.33-0.81,5-1.33,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M382.8,145.69l17.33-5.93c1.61-.42,3.26-0.79,4.84-1.3,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M384.7,145l15.54-5.31c1.57-.41,3.18-0.77,4.72-1.27,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M386.6,144.39c0.15,0,13.6-4.65,13.76-4.69,1.53-.4,3.1-0.75,4.61-1.24,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M388.5,143.74c0.19-.05,11.78-4,12-4.06,1.5-.38,3-0.74,4.49-1.21,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M390.4,143.08c0.23-.06,10-3.38,10.19-3.44,1.46-.37,2.94-0.72,4.38-1.18,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M392.3,142.43c0.27-.07,8.14-2.75,8.41-2.82,1.42-.36,2.87-0.7,4.26-1.15,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.06"></path>
    <path d="M394.2,141.78c0.31-.08,6.31-2.12,6.62-2.2,1.39-.35,2.79-0.68,4.14-1.12,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.07"></path>
    <path d="M396.1,141.13c0.34-.09,4.49-1.49,4.84-1.57,1.35-.34,2.71-0.67,4-1.09,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M398,140.47c0.38-.1,2.67-0.85,3.05-1,1.31-.33,2.63-0.65,3.91-1.06,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.09"></path>
    <path d="M399.9,139.82l1.27-.33c1.27-.32,2.56-0.63,3.8-1,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.1"></path>
  </g>
  <g>
    <path d="M418,115c0,10.32,1.14,20.66-5.19,29.6L404,153" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M404.8,152.24c0-.07,8.13-7.78,8.18-7.84,5.74-9.18,5.06-19.15,5.06-29.39" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M405.61,151.47c0.1-.14,7.42-7.15,7.51-7.29,5.63-9.1,4.93-19,4.93-29.18" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M406.41,150.71c0.15-.21,6.71-6.53,6.83-6.74,5.53-9,4.79-18.89,4.79-29" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M407.22,149.95c0.2-.28,6-5.91,6.16-6.19C418.8,134.82,418,125,418,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M408,149.18c0.25-.35,5.28-5.28,5.49-5.63,5.31-8.86,4.53-18.63,4.53-28.55" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M408.83,148.42c0.29-.42,4.57-4.66,4.82-5.08,5.21-8.78,4.39-18.5,4.39-28.34" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M409.63,147.66c0.34-.49,3.86-4,4.15-4.53,5.1-8.7,4.26-18.37,4.26-28.13" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M410.44,146.89c0.39-.55,3.15-3.41,3.48-4,5-8.62,4.13-18.24,4.13-27.92" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M411.24,146.13c0.44-.62,2.44-2.79,2.81-3.42,4.89-8.54,4-18.11,4-27.71" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M412,145.37c0.49-.69,1.73-2.16,2.13-2.87C419,134,418,124.52,418,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M412.85,144.6a25.6,25.6,0,0,0,1.46-2.32C419,133.9,418,124.44,418,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M504.33,115a36.23,36.23,0,0,1,.33,6c-2,9-12,9-20.38,9.39l-21.12,1.11" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M465.09,131.4l19.42-1c8.33-.38,19.16-0.29,20.16-9.38a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M467,131.3l17.73-.93C493,130,503.68,130,504.67,121a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.16"></path>
    <path d="M468.93,131.2l16-.84c8.21-.38,18.73-0.43,19.71-9.36a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.25"></path>
    <path d="M470.85,131.09l14.33-.75c8.16-.38,18.51-0.5,19.49-9.35a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.33"></path>
    <path d="M472.77,131l12.64-.66c8.1-.37,18.3-0.57,19.26-9.34a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.41"></path>
    <path d="M474.69,130.89l10.94-.57c8-.37,18.08-0.64,19-9.33a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.49"></path>
    <path d="M476.61,130.79l9.25-.47c8-.37,17.87-0.71,18.81-9.32a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.57"></path>
    <path d="M478.53,130.69l7.55-.38c7.94-.37,17.65-0.78,18.59-9.31a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.65"></path>
    <path d="M480.45,130.59l5.85-.29c7.88-.36,17.44-0.85,18.37-9.3a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.74"></path>
    <path d="M482.37,130.49l4.16-.2c7.83-.36,17.23-0.93,18.14-9.29a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.82"></path>
    <path d="M484.29,130.39l2.46-.11c7.77-.36,16.11-1.14,17.92-9.28a36.23,36.23,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.9"></path>
  </g>
  <g>
    <path d="M507.33,115c0,5.08,1,10.8-2.73,14.82-4,4.25-11,4.32-16.43,5.14l-23.51,2.54" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M466.8,137.27L488.24,135c5.43-.78,12.38-0.9,16.36-5.13,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M468.94,137l19.37-2.1c5.41-.77,12.33-0.91,16.29-5.12,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M471.08,136.81l17.3-1.88c5.4-.77,12.28-0.92,16.22-5.11,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M473.21,136.58l15.23-1.65c5.39-.76,12.23-0.93,16.16-5.1,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M475.35,136.35l13.16-1.43c5.38-.76,12.18-0.93,16.09-5.09s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M477.49,136.12l11.09-1.21c5.37-.75,12.13-0.94,16-5.08s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M479.63,135.88l9-1c5.36-.75,12.08-1,16-5.07s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.06"></path>
    <path d="M481.76,135.65l7-.77c5.35-.75,12-1,15.88-5.06s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.07"></path>
    <path d="M483.9,135.42l4.88-.55c5.33-.75,12-1,15.82-5.06s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M486,135.19l2.82-.33c5.32-.74,11.92-1,15.75-5s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.09"></path>
    <path d="M488.17,135l0.75-.11c5.31-.73,11.87-1,15.68-5s2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.1"></path>
  </g>
  <g>
    <path d="M510.33,115v8.09c0,6.89-2.61,13.08-9.7,15.37-1.66.54-3.39,0.91-5.07,1.36L474.67,147" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M476.57,146.35l19.11-6.56c1.65-.43,3.33-0.81,5-1.33,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M478.47,145.69l17.33-5.93c1.61-.42,3.26-0.79,4.84-1.3,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M480.37,145l15.54-5.31c1.57-.41,3.18-0.77,4.72-1.27,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M482.27,144.39c0.15,0,13.6-4.65,13.76-4.69,1.53-.4,3.1-0.75,4.61-1.24,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M484.16,143.74c0.19-.05,11.78-4,12-4.06,1.5-.38,3-0.74,4.49-1.21,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M486.06,143.08c0.23-.06,10-3.38,10.19-3.44,1.46-.37,2.94-0.72,4.38-1.18,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M488,142.43c0.27-.07,8.14-2.75,8.41-2.82,1.42-.36,2.87-0.7,4.26-1.15,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M489.86,141.78c0.31-.08,6.31-2.12,6.62-2.2,1.39-.35,2.79-0.68,4.14-1.12,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M491.76,141.13c0.34-.09,4.49-1.49,4.84-1.57,1.35-.34,2.71-0.67,4-1.09,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M493.66,140.47c0.38-.1,2.67-0.85,3.05-1,1.31-.33,2.63-0.65,3.91-1.06,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M495.56,139.82l1.27-.33c1.27-.32,2.56-0.63,3.8-1,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M513.71,115c0,10.32,1.14,20.66-5.19,29.6l-8.85,8.4" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M500.47,152.24c0-.07,8.13-7.78,8.18-7.84,5.74-9.18,5.06-19.15,5.06-29.39" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M501.28,151.47c0.1-.14,7.42-7.15,7.51-7.29,5.63-9.1,4.93-19,4.93-29.18" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M502.08,150.71c0.15-.21,6.71-6.53,6.83-6.74,5.53-9,4.79-18.89,4.79-29" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M502.88,149.95c0.2-.28,6-5.91,6.16-6.19,5.42-8.94,4.66-18.76,4.66-28.76" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M503.69,149.18c0.25-.35,5.28-5.28,5.49-5.63,5.31-8.86,4.53-18.63,4.53-28.55" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M504.49,148.42c0.29-.42,4.57-4.66,4.82-5.08,5.21-8.78,4.39-18.5,4.39-28.34" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M505.3,147.66c0.34-.49,3.86-4,4.15-4.53,5.1-8.7,4.26-18.37,4.26-28.13" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M506.1,146.89c0.39-.55,3.15-3.41,3.48-4,5-8.62,4.13-18.24,4.13-27.92" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M506.91,146.13c0.44-.62,2.44-2.79,2.81-3.42,4.89-8.54,4-18.11,4-27.71" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M507.71,145.37c0.49-.69,1.73-2.16,2.13-2.87,4.79-8.46,3.86-18,3.86-27.5" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M508.52,144.6a25.6,25.6,0,0,0,1.46-2.32c4.68-8.39,3.73-17.85,3.73-27.28" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M601,115a36.23,36.23,0,0,1,.33,6c-2,9-12,9-20.38,9.39l-21.12,1.11" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M561.75,131.4l19.42-1c8.33-.38,19.16-0.29,20.16-9.38a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M563.67,131.3l17.73-.93c8.27-.38,18.94-0.36,19.93-9.37a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M565.59,131.2l16-.84c8.21-.38,18.73-0.43,19.71-9.36a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M567.51,131.09l14.33-.75c8.16-.38,18.51-0.5,19.49-9.35a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M569.43,131l12.64-.66c8.1-.37,18.3-0.57,19.26-9.34a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M571.35,130.89l10.94-.57c8-.37,18.08-0.64,19-9.33a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M573.27,130.79l9.25-.47c8-.37,17.87-0.71,18.81-9.32a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M575.19,130.69l7.55-.38c7.94-.37,17.65-0.78,18.59-9.31a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M577.11,130.59l5.85-.29c7.88-.36,17.44-0.85,18.37-9.3a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M579,130.49l4.16-.2c7.83-.36,17.23-0.93,18.14-9.29a22,22,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M581,130.39l2.46-.11c7.77-.36,16.11-1.14,17.92-9.28a36.23,36.23,0,0,0-.33-6" fill="none" stroke="#d6baf7" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M604,115c0,5.08,1,10.8-2.73,14.82-4,4.25-11,4.32-16.43,5.14l-23.51,2.54" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M563.47,137.27L584.91,135c5.43-.78,12.38-0.9,16.36-5.13,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M565.61,137l19.37-2.1c5.41-.77,12.33-0.91,16.29-5.12,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M567.74,136.81l17.3-1.88c5.4-.77,12.28-0.92,16.22-5.11,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M569.88,136.58l15.23-1.65c5.39-.76,12.23-0.93,16.16-5.1,3.78-4,2.73-9.74,2.73-14.82" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M572,136.35l13.16-1.43c5.38-.76,12.18-0.93,16.09-5.09S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M574.16,136.12l11.09-1.21c5.37-.75,12.13-0.94,16-5.08S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M576.29,135.88l9-1c5.36-.75,12.08-1,16-5.07S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.06"></path>
    <path d="M578.43,135.65l7-.77c5.35-.75,12-1,15.88-5.06S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.07"></path>
    <path d="M580.57,135.42l4.88-.55c5.33-.75,12-1,15.82-5.06S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M582.7,135.19l2.82-.33c5.32-.74,11.92-1,15.75-5S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.09"></path>
    <path d="M584.84,135l0.75-.11c5.31-.73,11.87-1,15.68-5S604,120.08,604,115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.1"></path>
  </g>
  <g>
    <path d="M607,115v8.09c0,6.89-2.61,13.08-9.7,15.37-1.66.54-3.39,0.91-5.07,1.36L571.33,147" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M573.23,146.35l19.11-6.56c1.65-.43,3.33-0.81,5-1.33,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M575.13,145.69l17.33-5.93c1.61-.42,3.26-0.79,4.84-1.3,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M577,145l15.54-5.31c1.57-.41,3.18-0.77,4.72-1.27,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.01"></path>
    <path d="M578.93,144.39c0.15,0,13.6-4.65,13.76-4.69,1.53-.4,3.1-0.75,4.61-1.24,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M580.83,143.74c0.19-.05,11.78-4,12-4.06,1.5-.38,3-0.74,4.49-1.21,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.02"></path>
    <path d="M582.73,143.08c0.23-.06,10-3.38,10.19-3.44,1.46-.37,2.94-0.72,4.38-1.18,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M584.63,142.43c0.27-.07,8.14-2.75,8.41-2.82,1.42-.36,2.87-0.7,4.26-1.15,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.03"></path>
    <path d="M586.53,141.78c0.31-.08,6.31-2.12,6.62-2.2,1.39-.35,2.79-0.68,4.14-1.12,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M588.43,141.13c0.34-.09,4.49-1.49,4.84-1.57,1.35-.34,2.71-0.67,4-1.09,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.04"></path>
    <path d="M590.33,140.47c0.38-.1,2.67-0.85,3.05-1,1.31-.33,2.63-0.65,3.91-1.06,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
    <path d="M592.23,139.82l1.27-.33c1.27-.32,2.56-0.63,3.8-1,7.09-2.29,9.7-8.48,9.7-15.37V115" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.05"></path>
  </g>
  <g>
    <path d="M610.38,115c0,10.32,1.14,20.66-5.19,29.6L596,154.75" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0"></path>
    <path d="M596.83,153.83c0-.07,8.44-9.37,8.48-9.44,5.74-9.18,5.06-19.15,5.06-29.39" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.08"></path>
    <path d="M597.67,152.91c0.1-.14,7.69-8.58,7.78-8.72,5.63-9.1,4.93-19,4.93-29.18" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.16"></path>
    <path d="M598.5,152c0.15-.21,6.95-7.8,7.08-8,5.53-9,4.79-18.89,4.79-29" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.25"></path>
    <path d="M599.34,151.06c0.2-.28,6.21-7,6.38-7.3,5.42-8.94,4.66-18.76,4.66-28.76" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.33"></path>
    <path d="M600.17,150.14c0.25-.35,5.46-6.24,5.67-6.59,5.31-8.86,4.53-18.63,4.53-28.55" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.41"></path>
    <path d="M601,149.22c0.29-.42,4.72-5.46,5-5.88,5.21-8.78,4.39-18.5,4.39-28.34" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.49"></path>
    <path d="M601.84,148.29c0.34-.49,4-4.67,4.27-5.17,5.1-8.7,4.26-18.37,4.26-28.13" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.57"></path>
    <path d="M602.68,147.37c0.39-.55,3.24-3.89,3.57-4.45,5-8.62,4.13-18.24,4.13-27.92" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.65"></path>
    <path d="M603.51,146.45c0.44-.62,2.5-3.11,2.87-3.74,4.89-8.54,4-18.11,4-27.71" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.74"></path>
    <path d="M604.35,145.53c0.49-.69,1.76-2.32,2.17-3,4.79-8.46,3.86-18,3.86-27.5" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.82"></path>
    <path d="M605.18,144.6a25.6,25.6,0,0,0,1.46-2.32c4.68-8.39,3.73-17.85,3.73-27.28" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5" opacity="0.9"></path>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <rect x="294" y="29" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="294" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="294" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="294" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M313.08,44.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,318.5,60h-5.42V44.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(292.25 26.25)" xlink:href="#rnn-b"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="390" y="29" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="390" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="390" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="390" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M409.08,44.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,414.5,60h-5.42V44.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(388.25 26.25)" xlink:href="#rnn-b"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="486" y="29" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="486" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="486" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="486" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M505.08,44.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,510.5,60h-5.42V44.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(484.25 26.25)" xlink:href="#rnn-b"></use>
  </g>
  <g id="_Group_4" data-name="<Group>">
    <g opacity="0.1">
      <rect x="582" y="29" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="582" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="582" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="582" y="29" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M601.08,44.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,606.5,60h-5.42V44.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(580.25 26.25)" xlink:href="#rnn-b"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="14" y="185" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="14" y="185" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M43,216l-1.93-4.94H34.85L32.94,216H31.11l6.14-15.61h1.52L44.89,216H43Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(12.25 182.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="110" y="185" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="110" y="185" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M139,216l-1.93-4.94h-6.23L128.94,216h-1.83l6.14-15.61h1.52L140.89,216H139Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(108.25 182.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <rect x="206" y="185" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="206" y="185" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M235,216l-1.93-4.94h-6.23L224.94,216h-1.83l6.14-15.61h1.52L236.89,216H235Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(204.25 182.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_6" data-name="<Group>">
    <g opacity="0.1">
      <rect x="302" y="185" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="302" y="185" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M331,216l-1.93-4.94h-6.23L320.94,216h-1.83l6.14-15.61h1.52L332.89,216H331Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(300.25 182.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_7" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="318" cy="112.75" r="11.25"></circle>
      <circle cx="318" cy="112.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M313.88,113.25v-1.31h3.41V108.5h1.34v3.43H322v1.31h-3.41v3.42h-1.34v-3.42h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(305 98.75)" xlink:href="#op-sum"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="510" cy="112.75" r="11.25"></circle>
      <circle cx="510" cy="112.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M505.88,113.25v-1.31h3.41V108.5h1.34v3.43H514v1.31h-3.41v3.42h-1.34v-3.42h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(497 98.75)" xlink:href="#op-sum"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="606" cy="112.75" r="11.25"></circle>
      <circle cx="606" cy="112.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M601.88,113.25v-1.31h3.41V108.5h1.34v3.43H610v1.31h-3.41v3.42h-1.34v-3.42h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(593 98.75)" xlink:href="#op-sum"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(1 38.88)" font-size="13" font-family="Open Sans">Network B focuses on different <tspan x="0" y="20">information from network A at </tspan><tspan x="0" y="40">every step.</tspan></text>
  </g>
  <g id="_Group_8" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="414.25" cy="112.75" r="11.25"></circle>
      <circle cx="414.25" cy="112.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M410.13,113.25v-1.31h3.41V108.5h1.34v3.43h3.41v1.31h-3.41v3.42h-1.34v-3.42h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(401.25 98.75)" xlink:href="#op-sum"></use>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="121" y1="138" x2="121" y2="137" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="121" y1="134.97" x2="121" y2="71.02" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.03 2.03"></line>
      <line x1="121" y1="70" x2="121" y2="69" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>The attention distribution is usually generated with content-based attention. The attending RNN generates a query describing what it wants to focus on. Each item is dot-producted with the query to produce a score, describing how well it matches the query. The scores are fed into a softmax to create the attention distribution.</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_attentional_02.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 444">
  <defs>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-b" data-name="rnn-b" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-15" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M19.83,16.21h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25,6,6,0,0,1-3.94,1.17H19.83V16.21Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58H21.64v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68H21.64Z" fill="#666"></path>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
    <symbol id="op-dot" data-name="op-dot" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M14.46,12.51a2.33,2.33,0,0,1-.67,1.71,2.3,2.3,0,0,1-1.7.68,2.3,2.3,0,0,1-1.7-.68,2.32,2.32,0,0,1-.67-1.71,2.29,2.29,0,0,1,.67-1.7,2.31,2.31,0,0,1,1.7-.67,2.32,2.32,0,0,1,1.7.67A2.29,2.29,0,0,1,14.46,12.51Z" fill="#666"></path>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-14" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect x="285.56" y="17" width="360.44" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect x="285.56" y="17" width="360.44" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <line x1="37" y1="371" x2="37" y2="231" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="37" y1="235" x2="37" y2="209" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M44,335h9.63a9.85,9.85,0,0,0,9.63-10V295" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M324,335l0.58-14c0.23-5.5,4.44-12,9.36-14.46L349,299" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M229,335l0.58-14c0.23-5.5,4.44-12,9.36-14.46L254,299" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M133,335l0.58-14c0.23-5.5,4.44-12,9.36-14.46L158,299" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M37,335l0.58-14c0.23-5.5,4.44-12,9.36-14.46L62,299" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="133" y1="371" x2="133" y2="268" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="133" y1="235" x2="133" y2="209" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M142,335h9.13c5,0,9.13-4.5,9.13-10V295" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="229" y1="371" x2="229" y2="268" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="229" y1="235" x2="229" y2="209" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="324" y1="235" x2="324" y2="209" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M238,335h9.13c5,0,9.13-4.5,9.13-10V295" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="324" y1="371" x2="324" y2="266" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M328,335h13.25a10,10,0,0,0,10-10V295" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="41" y1="335" x2="129" y2="335" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="137" y1="335" x2="225" y2="335" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="232.67" y1="335" x2="319.67" y2="335" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <g>
    <g opacity="0.2">
      <path d="M37,211V175.5a11.11,11.11,0,0,1,10-10.85l358.7-30.53c5.48-.47,10-3.83,10-7.48V120" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.4">
      <path d="M132.5,211V179.29a11.49,11.49,0,0,1,9.94-11.12l266.25-30c5.47-.62,9.94-5,9.94-9.65V120" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <path d="M228.5,211V183.08a12.25,12.25,0,0,1,9.86-11.65l173.4-28.94a12.25,12.25,0,0,0,9.86-11.65V120" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g opacity="0.2">
      <path d="M324,211V183.08a14,14,0,0,1,9.63-12.71l81.75-23A14,14,0,0,0,425,134.65V120" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <rect y="359" width="360.44" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect y="359" width="360.44" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <rect x="14" y="373" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="14" y="373" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M43,404l-1.93-4.94H34.85L32.94,404H31.11l6.14-15.61h1.52L44.89,404H43Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(12.25 370.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="110" y="373" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="110" y="373" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M139,404l-1.93-4.94h-6.23L128.94,404h-1.83l6.14-15.61h1.52L140.89,404H139Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(108.25 370.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="206" y="373" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="206" y="373" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M235,404l-1.93-4.94h-6.23L224.94,404h-1.83l6.14-15.61h1.52L236.89,404H235Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(204.25 370.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_4" data-name="<Group>">
    <g opacity="0.1">
      <rect x="302" y="373" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="302" y="373" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M331,404l-1.93-4.94h-6.23L320.94,404h-1.83l6.14-15.61h1.52L332.89,404H331Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(300.25 370.25)" xlink:href="#rnn-a"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(5.28 30.88)" font-size="13" font-family="Open Sans">The attending RNN generates a <tspan x="-0.07" y="20">query describing what it wants </tspan><tspan x="-0.13" y="40">to focus on.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(394 228.88)" font-size="13" font-family="Open Sans">Each item is dot producted with the <tspan x="0" y="20">query to produce a score, describing </tspan><tspan x="0" y="40">how well it matches the query. The </tspan><tspan x="0" y="60">scores are fed into a softmax to </tspan><tspan x="0" y="80">create the attention distribution.</tspan></text>
  </g>
  <path d="M33,335H16A10,10,0,0,1,6,325V123a10,10,0,0,1,10-10H361a10,10,0,0,0,10-10V63a10,10,0,0,0-10-10H348.37" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g>
    <line x1="59.92" y1="394.73" x2="97.57" y2="394.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M103,394.73A27.2,27.2,0,0,0,95.31,399l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,103,394.73Z" fill="#666"></path>
  </g>
  <g>
    <line x1="155.92" y1="394.73" x2="193.57" y2="394.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M199,394.73a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,199,394.73Z" fill="#666"></path>
  </g>
  <g>
    <line x1="251.92" y1="394.73" x2="289.57" y2="394.73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M295,394.73a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,295,394.73Z" fill="#666"></path>
  </g>
  <g>
    <path d="M351,242v-6c0-3.3-3.49-8.84-7.76-12.31l-4-3.27" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M335,217a27.2,27.2,0,0,0,8.67,1.53l-3.9,2.35-1.5,4.3A27.18,27.18,0,0,0,335,217Z" fill="#666"></path>
  </g>
  <g>
    <line x1="63.25" y1="287" x2="63.25" y2="272.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M63.25,267a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55L59,274.69A27.17,27.17,0,0,0,63.25,267Z" fill="#666"></path>
  </g>
  <g>
    <path d="M255,242v-6c0-3.3-3.49-8.84-7.76-12.31l-4-3.27" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M239,217a27.2,27.2,0,0,0,8.67,1.53l-3.9,2.35-1.5,4.3A27.18,27.18,0,0,0,239,217Z" fill="#666"></path>
  </g>
  <g>
    <line x1="159.25" y1="287" x2="159.25" y2="272.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M159.25,267a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55L155,274.69A27.17,27.17,0,0,0,159.25,267Z" fill="#666"></path>
  </g>
  <g>
    <path d="M159,242v-6c0-3.3-3.49-8.84-7.76-12.31l-4-3.27" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M143,217a27.2,27.2,0,0,0,8.67,1.53l-3.9,2.35-1.5,4.3A27.18,27.18,0,0,0,143,217Z" fill="#666"></path>
  </g>
  <g>
    <line x1="255.25" y1="287" x2="255.25" y2="272.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M255.25,267a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55L251,274.69A27.17,27.17,0,0,0,255.25,267Z" fill="#666"></path>
  </g>
  <g>
    <path d="M63,242v-6c0-3.3-3.49-8.84-7.76-12.31l-4-3.27" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M47,217a27.2,27.2,0,0,0,8.67,1.53l-3.9,2.35-1.5,4.3A27.18,27.18,0,0,0,47,217Z" fill="#666"></path>
  </g>
  <g>
    <line x1="351.25" y1="287" x2="351.25" y2="272.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M351.25,267a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55L347,274.69A27.17,27.17,0,0,0,351.25,267Z" fill="#666"></path>
  </g>
  <g>
    <line x1="345.92" y1="53" x2="383.57" y2="53" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M389,53a27.2,27.2,0,0,0-7.69,4.28L382.86,53l-1.55-4.28A27.18,27.18,0,0,0,389,53Z" fill="#666"></path>
  </g>
  <g>
    <line x1="442.92" y1="53" x2="480.57" y2="53" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M486,53a27.2,27.2,0,0,0-7.69,4.28L479.86,53l-1.55-4.28A27.18,27.18,0,0,0,486,53Z" fill="#666"></path>
  </g>
  <g>
    <line x1="537.92" y1="53" x2="575.57" y2="53" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M581,53a27.2,27.2,0,0,0-7.69,4.28L574.86,53l-1.55-4.28A27.18,27.18,0,0,0,581,53Z" fill="#666"></path>
  </g>
  <g>
    <line x1="419" y1="113.81" x2="419" y2="87.08" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M419,81.65a27.2,27.2,0,0,0,4.28,7.69L419,87.79l-4.28,1.55A27.18,27.18,0,0,0,419,81.65Z" fill="#666"></path>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <rect x="299" y="31" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="299" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="299" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="299" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M318.08,46.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,323.5,62h-5.42V46.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(297.25 28.25)" xlink:href="#rnn-b"></use>
  </g>
  <g id="_Group_6" data-name="<Group>">
    <g opacity="0.1">
      <rect x="395" y="31" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="395" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="395" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="395" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M414.08,46.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,419.5,62h-5.42V46.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(393.25 28.25)" xlink:href="#rnn-b"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="491" y="31" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="491" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="491" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="491" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M510.08,46.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,515.5,62h-5.42V46.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(489.25 28.25)" xlink:href="#rnn-b"></use>
  </g>
  <g id="_Group_7" data-name="<Group>">
    <g opacity="0.1">
      <rect x="587" y="31" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="587" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="587" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="587" y="31" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M606.08,46.46h4.39a8.29,8.29,0,0,1,4.48.92,3.27,3.27,0,0,1,1.38,2.92,3.38,3.38,0,0,1-.77,2.28,3.72,3.72,0,0,1-2.25,1.16v0.11q3.54,0.6,3.54,3.72a4,4,0,0,1-1.41,3.25A6,6,0,0,1,611.5,62h-5.42V46.46Zm1.81,6.66h3a4.85,4.85,0,0,0,2.75-.6,2.32,2.32,0,0,0,.84-2,2,2,0,0,0-.94-1.89,5.84,5.84,0,0,0-3-.58h-2.66v5.09Zm0,1.53v5.82h3.24a4.62,4.62,0,0,0,2.83-.73,2.69,2.69,0,0,0,1-2.28,2.42,2.42,0,0,0-1-2.13,5.2,5.2,0,0,0-3-.68h-3.09Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(585.25 28.25)" xlink:href="#rnn-b"></use>
  </g>
  <g id="_Group_8" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="420.75" cy="114.25" r="11.25"></circle>
      <circle cx="420.75" cy="114.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M416.63,114.75v-1.31H420V110h1.34v3.43h3.41v1.31h-3.41v3.42H420v-3.42h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(407.75 100.25)" xlink:href="#op-sum"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="48" y="241" width="322.72" height="24" rx="12" ry="12"></rect>
      <rect x="48" y="241" width="322.72" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.4"></rect>
    </g>
    <g>
      <rect x="47" y="239" width="322.72" height="24" rx="12" ry="12" fill="#e0cef5"></rect>
      <rect x="47" y="239" width="322.72" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.4"></rect>
    </g>
  </g>
  <g>
    <path d="M171.86,253.3a1.55,1.55,0,0,1-.63,1.33,3,3,0,0,1-1.82.46,4.28,4.28,0,0,1-1.91-.36v-1.09a4.68,4.68,0,0,0,1.95.48q1.17,0,1.17-.7a0.56,0.56,0,0,0-.13-0.38,1.54,1.54,0,0,0-.42-0.31,7.4,7.4,0,0,0-.82-0.37,3.79,3.79,0,0,1-1.39-.79,1.47,1.47,0,0,1-.36-1,1.35,1.35,0,0,1,.62-1.18,2.92,2.92,0,0,1,1.67-.42,4.75,4.75,0,0,1,2,.42l-0.41,1a4.39,4.39,0,0,0-1.62-.4q-1,0-1,.57a0.57,0.57,0,0,0,.26.47,5.73,5.73,0,0,0,1.14.53,5.19,5.19,0,0,1,1.07.52,1.55,1.55,0,0,1,.49.54A1.58,1.58,0,0,1,171.86,253.3Z" fill="#666"></path>
    <path d="M178.49,252a3.24,3.24,0,0,1-.75,2.27,2.68,2.68,0,0,1-2.08.82,2.85,2.85,0,0,1-1.47-.38,2.48,2.48,0,0,1-1-1.08,3.68,3.68,0,0,1-.34-1.63,3.22,3.22,0,0,1,.74-2.26,2.69,2.69,0,0,1,2.09-.81,2.62,2.62,0,0,1,2,.83A3.2,3.2,0,0,1,178.49,252Zm-4.32,0q0,2.06,1.52,2.06t1.5-2.06q0-2-1.51-2a1.29,1.29,0,0,0-1.15.53A2.67,2.67,0,0,0,174.17,252Z" fill="#666"></path>
    <path d="M182.92,250h-1.45v5H180.2v-5h-1v-0.59l1-.39v-0.39a2.16,2.16,0,0,1,.49-1.56,2,2,0,0,1,1.51-.51,4,4,0,0,1,1.31.22l-0.33,1a2.9,2.9,0,0,0-.89-0.15,0.73,0.73,0,0,0-.63.27,1.34,1.34,0,0,0-.2.8v0.39h1.45v1Z" fill="#666"></path>
    <path d="M186.14,254.08a3.07,3.07,0,0,0,.92-0.15v1a2.61,2.61,0,0,1-.54.15,3.73,3.73,0,0,1-.68.06,1.63,1.63,0,0,1-1.79-1.89V250h-0.81v-0.56l0.87-.46,0.43-1.26h0.78v1.32H187v1h-1.69v3.18a0.89,0.89,0,0,0,.23.67A0.83,0.83,0,0,0,186.14,254.08Z" fill="#666"></path>
    <path d="M193.26,255H192v-3.66a1.66,1.66,0,0,0-.26-1,1,1,0,0,0-.81-0.34,1.23,1.23,0,0,0-1.07.48,2.78,2.78,0,0,0-.34,1.58v3h-1.26v-5.94h1l0.18,0.78h0.06a1.65,1.65,0,0,1,.72-0.66,2.32,2.32,0,0,1,1-.23,1.81,1.81,0,0,1,1.82.93h0.09a1.8,1.8,0,0,1,.74-0.69,2.35,2.35,0,0,1,1.1-.25,2,2,0,0,1,1.55.54,2.38,2.38,0,0,1,.49,1.64V255h-1.26v-3.66a1.65,1.65,0,0,0-.26-1,1,1,0,0,0-.81-0.34,1.25,1.25,0,0,0-1.08.46,2.37,2.37,0,0,0-.34,1.41V255Z" fill="#666"></path>
    <path d="M202.49,255l-0.25-.83h0a2.44,2.44,0,0,1-.86.74,2.73,2.73,0,0,1-1.12.2,1.9,1.9,0,0,1-1.37-.47,1.77,1.77,0,0,1-.49-1.34,1.57,1.57,0,0,1,.68-1.39,3.93,3.93,0,0,1,2.08-.51l1,0V251a1.2,1.2,0,0,0-.27-0.85,1.08,1.08,0,0,0-.82-0.28,2.87,2.87,0,0,0-.88.13,6.61,6.61,0,0,0-.81.32l-0.41-.9a4.33,4.33,0,0,1,1.06-.38,4.86,4.86,0,0,1,1.08-.13,2.57,2.57,0,0,1,1.71.49,1.93,1.93,0,0,1,.58,1.55v4h-0.9Zm-1.88-.86a1.56,1.56,0,0,0,1.1-.38,1.39,1.39,0,0,0,.42-1.08v-0.52l-0.76,0a2.62,2.62,0,0,0-1.3.3,0.91,0.91,0,0,0-.41.81,0.79,0.79,0,0,0,.24.62A1,1,0,0,0,200.61,254.13Z" fill="#666"></path>
    <path d="M206.47,252l-2-2.91h1.44l1.35,2.08,1.36-2.08h1.43l-2,2.91,2.1,3h-1.43l-1.47-2.22L205.81,255h-1.43Z" fill="#666"></path>
  </g>
  <g id="_Group_9" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="65" cy="301" r="11.25"></circle>
      <circle cx="65" cy="301" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M67.46,301.51a2.33,2.33,0,0,1-.67,1.71,2.48,2.48,0,0,1-3.41,0,2.32,2.32,0,0,1-.67-1.71,2.29,2.29,0,0,1,.67-1.7A2.37,2.37,0,0,1,67.46,301.51Z"></path>
    </g>
    <use width="24" height="24" transform="translate(52 287)" xlink:href="#op-dot"></use>
  </g>
  <g id="_Group_10" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="257" cy="301" r="11.25"></circle>
      <circle cx="257" cy="301" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M259.46,301.51a2.33,2.33,0,0,1-.67,1.71,2.48,2.48,0,0,1-3.41,0,2.32,2.32,0,0,1-.67-1.71,2.29,2.29,0,0,1,.67-1.7A2.37,2.37,0,0,1,259.46,301.51Z"></path>
    </g>
    <use width="24" height="24" transform="translate(244 287)" xlink:href="#op-dot"></use>
  </g>
  <g id="_Group_11" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="353" cy="301" r="11.25"></circle>
      <circle cx="353" cy="301" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M355.46,301.51a2.33,2.33,0,0,1-.67,1.71,2.48,2.48,0,0,1-3.41,0,2.32,2.32,0,0,1-.67-1.71,2.29,2.29,0,0,1,.67-1.7A2.37,2.37,0,0,1,355.46,301.51Z"></path>
    </g>
    <use width="24" height="24" transform="translate(340 287)" xlink:href="#op-dot"></use>
  </g>
  <g id="_Group_12" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="161" cy="301" r="11.25"></circle>
      <circle cx="161" cy="301" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M163.46,301.51a2.33,2.33,0,0,1-.67,1.71,2.48,2.48,0,0,1-3.41,0,2.32,2.32,0,0,1-.67-1.71,2.29,2.29,0,0,1,.67-1.7A2.37,2.37,0,0,1,163.46,301.51Z"></path>
    </g>
    <use width="24" height="24" transform="translate(148 287)" xlink:href="#op-dot"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="37" cy="210.25" r="11.25"></circle>
      <circle cx="37" cy="210.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M34.16,213.53l-1-1L35.73,210l-2.58-2.58,1-1L36.74,209l2.56-2.56,1,1L37.72,210l2.57,2.57-1,1L36.72,211Z"></path>
    </g>
    <use width="24" height="24" transform="translate(24 196.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="133" cy="210.25" r="11.25"></circle>
      <circle cx="133" cy="210.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M130.16,213.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L133.72,210l2.57,2.57-1,1L132.72,211Z"></path>
    </g>
    <use width="24" height="24" transform="translate(120 196.25)" xlink:href="#op-x"></use>
  </g>
  <g id="_Group_13" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="229" cy="210.25" r="11.25"></circle>
      <circle cx="229" cy="210.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M226.16,213.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L229.72,210l2.57,2.57-1,1L228.72,211Z"></path>
    </g>
    <use width="24" height="24" transform="translate(216 196.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="325" cy="210.25" r="11.25"></circle>
      <circle cx="325" cy="210.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M322.16,213.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L325.72,210l2.57,2.57-1,1L324.72,211Z"></path>
    </g>
    <use width="24" height="24" transform="translate(312 196.25)" xlink:href="#op-x"></use>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="54" y1="77" x2="54" y2="78" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="54" y1="80" x2="54" y2="111" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2 2"></line>
      <line x1="54" y1="112" x2="54" y2="113" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>One use of attention between RNNs is translation <dt-cite key="bahdanau2014neural"></dt-cite>. A traditional sequence-to-sequence model has to boil the entire input down into a single vector and then expands it back out. Attention avoids this by allowing the RNN processing the input to pass along information about each word it sees, and then for the RNN generating the output to focus on words as they become relevant.</p>

  <p><dt-include src="assets/rnn_attentional_ex2.html">
<figure id="attentional-ex2" class="l-page">
  <pre id="attentional-ex2-data" style="display: none;">0.50, 0.02, 0.04, 0.00, 0.00, 0.00, 0.00, 0.00, 0.01, 0.01, 0.00, 0.00, 0.00, 0.05, 0.05
0.14, 0.89, 0.07, 0.00, 0.00, 0.00, 0.00, 0.00, 0.01, 0.06, 0.00, 0.00, 0.00, 0.02, 0.00
0.02, 0.00, 0.56, 0.00, 0.00, 0.00, 0.00, 0.01, 0.00, 0.00, 0.00, 0.00, 0.00, 0.02, 0.00
0.00, 0.00, 0.01, 0.61, 0.02, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00
0.00, 0.00, 0.02, 0.03, 0.01, 0.21, 0.97, 0.05, 0.00, 0.00, 0.00, 0.00, 0.00, 0.01, 0.00
0.00, 0.00, 0.02, 0.07, 0.25, 0.76, 0.02, 0.04, 0.00, 0.00, 0.00, 0.00, 0.00, 0.02, 0.00
0.02, 0.04, 0.03, 0.27, 0.71, 0.02, 0.00, 0.02, 0.00, 0.00, 0.02, 0.00, 0.00, 0.05, 0.01
0.02, 0.00, 0.07, 0.00, 0.00, 0.00, 0.00, 0.60, 0.40, 0.01, 0.04, 0.00, 0.00, 0.13, 0.01
0.13, 0.02, 0.02, 0.00, 0.01, 0.00, 0.00, 0.23, 0.52, 0.91, 0.07, 0.00, 0.00, 0.10, 0.00
0.04, 0.00, 0.01, 0.00, 0.00, 0.00, 0.00, 0.01, 0.03, 0.00, 0.67, 0.00, 0.00, 0.16, 0.02
0.02, 0.00, 0.04, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.14, 0.96, 0.00, 0.02, 0.07
0.02, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.02, 0.02, 1.00, 0.02, 0.03
0.02, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.01, 0.00, 0.01, 0.00, 0.00, 0.32, 0.11
0.04, 0.00, 0.08, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.01, 0.00, 0.00, 0.04, 0.67</pre>
  <svg>
    <defs>
      <marker id="edgeArrowhead" viewBox="0 -5 10 10" markerWidth="6" markerHeight="10" orient="auto" refX="5" refY="0">
        <path d="M0,-5L5,0L0,5" fill="none" stroke="#666"></path>
      </marker>
      <marker id="edgeArrowheadLeft" viewBox="0 -5 10 10" markerWidth="6" markerHeight="10" orient="auto" refX="0" refY="0">
        <path d="M5,-5L0,0L5,5" fill="none" stroke="#666"></path>
      </marker>
    </defs>
    <g class="labels" style="display: none;">
      <text transform="translate(0, 20)">output text</text>
      <text transform="translate(0, 65)">network B</text>
      <text transform="translate(0, 185)">network A</text>
      <text transform="translate(0, 233)">input text</text>
    </g>
  </svg>
  <figcaption>Diagram derived from Fig. 3 of <a href="https://arxiv.org/pdf/1409.0473.pdf">Bahdanau, <i>et al.</i> 2014</a></figcaption>
  <img class="pointer" src="assets/pointer.svg">
</figure>

<style>
  #attentional-ex2 svg {
  width: 100%;
  margin-bottom: 24px;
}
#attentional-ex2 .pointer {
  position: absolute;
  width: 26px;
  height: 26px;
  top: 36px;
  left: -48px;
}
#attentional-ex2 figcaption {
  text-align: center;
}
#attentional-ex2 svg .labels {
  font-size: 12px;
  fill-opacity: 0.5;
}
#attentional-ex2 .background {
  fill: rgb(240, 240, 245);
  fill-opacity: 0.8;
}
#attentional-ex2 .cell .node {
  fill: white;
  fill-opacity: 0.9;
  stroke: black;
  stroke-width: 1px;
  stroke-opacity: 0.25;
  /*transition: stroke-opacity, 0.2s, linear;*/
}
#attentional-ex2 .cell:hover .node {
  stroke-opacity: 1;
}
#attentional-ex2 .cell .shadow {
  fill: black;
  fill-opacity: 0.07;
}
#attentional-ex2 .cell text {
  font-size: 13px;
  fill-opacity: 0.6;
  text-anchor: middle;
  alignment-baseline: middle;
}
#attentional-ex2 .cell text.label {
  font-size: 13px;
  /*fill-opacity: 0.9;*/
  text-anchor: middle;
  alignment-baseline: middle;
}
#attentional-ex2 .link-group {
  transition: opacity, 0.3s, linear;
}
#attentional-ex2 .link-group .node-highlight {
  transition: stroke-opacity, 0.3s, linear;
  stroke: black;
  stroke-opacity: 0;
  fill: none;
}
#attentional-ex2 .link-group:hover .node-highlight {
  stroke-opacity: 1;
}
#attentional-ex2 .link {
  fill: none;
  stroke: rgb(131, 89, 178);
  stroke-width: 2px;
  pointer-events: none;
}
#attentional-ex2 .arrow {
  stroke: black;
  stroke-opacity: 0.6;
}
#attentional-ex2 .cell:last-child .arrow:first-of-type {
  display: none;
}
</style>

<script>
(function() {

var labelsA = [
  "the",
  "agreement",
  "on",
  "the",
  "European",
  "Economic",
  "Area",
  "was",
  "signed",
  "in",
  "August",
  "1992",
  ".",
  "<end>"
];

var labelsB = [
  "l’",
  "accord",
  "sur",
  "la",
  "zone",
  "économique",
  "européenne",
  "a",
  "été",
  "signé",
  "en",
  "août",
  "1992",
  ".",
  "<end>"
];

var data = d3.csvParseRows(d3.select("#attentional-ex2-data").text());
// console.log(data)
var linkData = [];
data.forEach(function(a, ai) {
  a.forEach(function(b, bi) {
    linkData.push({
      ai: +ai,
      bi: +bi,
      v: +data[ai][bi]
    });
  });
});

var nodeMargin = 10;
var networkMargin = 120;

var html = d3.select("#attentional-ex2");
var outerWidth = 984;//html.node().getBoundingClientRect().width;
var outerHeight = 240;//html.node().getBoundingClientRect().height;
var margin = {top: 36, right: nodeMargin, bottom: 24, left: nodeMargin};
var width = outerWidth - margin.left - margin.right;
var height = outerHeight - margin.top - margin.bottom;

var xa = d3.scaleBand()
    .domain(d3.range(labelsA.length))
    .paddingInner(0.5)
    .range([nodeMargin, width - nodeMargin]);

var xb = d3.scaleBand()
    .domain(d3.range(labelsB.length))
    .paddingInner(0.5)
    .range([nodeMargin, width - nodeMargin]);

var nodeSizeA = xa.bandwidth();
var nodeSizeB = xb.bandwidth();

var networkHeightA = nodeSizeA + nodeMargin * 2;
var networkHeightB = nodeSizeB + nodeMargin * 2;

var link = function(d) {
  // console.log(nodeSizeB, nodeSizeA, nodeMargin, d.bi, xb(d.bi))
  var p = "M" + (xb(d.bi) + nodeSizeB / 2) + "," + (nodeSizeB + nodeMargin)
      + "C" + (xb(d.bi) + nodeSizeB / 2) + "," + (nodeSizeB + networkMargin / 3 + nodeMargin)
      + " " + (xa(d.ai) + nodeSizeA / 2) + "," + (networkMargin - networkMargin / 3 + nodeMargin)
      + " " + (xa(d.ai) + nodeSizeA / 2) + "," + (networkMargin + nodeMargin);
  // console.log(p);
  return p;
};

html.select("svg .labels")
    .attr("transform", "translate(" + (width + nodeMargin * 3) + ", 0)");

var svg = html.select("svg")
    .attr("viewBox", "0 0 " + outerWidth + " " + outerHeight)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var networkA = svg.append("g")
    .attr("transform", "translate(0, " + networkMargin + ")");

networkA.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", nodeSizeA + 2 * nodeMargin)
    .attr("rx", nodeMargin * 0.7)
    .attr("ry", nodeMargin * 0.7);

var cellA = networkA.selectAll(".cell")
    .data(labelsA)
  .enter().append("g")
    .attr("class", "cell")
    .attr("transform", function(d, i) { return "translate(" + xa(i) + ", " + nodeMargin + ")"; })
    .on("mouseover", function(d, i) {
      link.style("display", function(ld) {
        return ld.ai === i ? "" : "none";
      });
    })
    .on("mouseout", function() { link.style("display", ""); });

cellA.append("rect")
    .attr("class", "shadow")
    .attr("transform", "translate(1, 3)")
    .attr("width", nodeSizeA)
    .attr("height", nodeSizeA)
    .attr("rx", 4)
    .attr("ry", 4);

cellA.append("rect")
    .attr("class", "node")
    .attr("width", nodeSizeA)
    .attr("height", nodeSizeA)
    .attr("rx", 4)
    .attr("ry", 4);

cellA.append("line")
    .attr("class", "arrow")
    .attr("marker-start", "url(#edgeArrowheadLeft)")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("x1", nodeSizeA + 8)
    .attr("x2", nodeSizeA + nodeMargin + 20)
    .attr("y1", nodeSizeA / 2)
    .attr("y2", nodeSizeA / 2);

cellA.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("transform", "translate(" + nodeSizeA / 2 + ", 0)")
    .attr("y1", nodeSizeA + nodeMargin * 2 - 2)
    .attr("y2", nodeSizeA + 4);

cellA.append("text")
    .style("opacity", 0.8)
    .text("A")
    .attr("dx", nodeSizeA / 2)
    .attr("dy", nodeSizeA / 2 + 1);

cellA.append("text")
    .attr("class", "label")
    .attr("dx", nodeSizeA / 2)
    .attr("dy", nodeSizeA + 24 + 8)
    .text(function(d) { return d; });

cellA.append("rect")
    .style("opacity", 0)
    .attr("transform", "translate(-" + ((xa.step() - nodeSizeA) / 2) + ",-" + (nodeMargin + (networkMargin - networkHeightB) / 2) + ")")
    .attr("width", xa.step())
    .attr("height", networkHeightA + (networkMargin - networkHeightA) / 2);

//
// Network B
//

var networkB = svg.append("g");

networkB.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", nodeSizeB + 2 * nodeMargin)
    .attr("rx", nodeMargin * 0.7)
    .attr("ry", nodeMargin * 0.7);

var cellB = networkB.selectAll(".cell")
    .data(labelsB)
  .enter().append("g")
    .attr("class", "cell")
    .attr("transform", function(d, i) { return "translate(" + xb(i) + "," + nodeMargin + ")"; })
    .on("mouseover", function(d, i) {
      link.style("display", function(ld) {
        return ld.bi === i ? "" : "none";
      });
    })
    .on("mouseout", function() { link.style("display", ""); });

cellB.append("rect")
    .attr("class", "shadow")
    .attr("transform", "translate(1, 3)")
    .attr("width", nodeSizeB)
    .attr("height", nodeSizeB)
    .attr("rx", 4)
    .attr("ry", 4);

cellB.append("rect")
    .attr("class", "node")
    .attr("width", nodeSizeB)
    .attr("height", nodeSizeB)
    .attr("rx", 4)
    .attr("ry", 4);

cellB.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("x1", nodeSizeB)
    .attr("x2", nodeSizeB + nodeMargin + 14)
    .attr("y1", nodeSizeB / 2)
    .attr("y2", nodeSizeB / 2);

cellB.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("transform", "translate(" + nodeSizeB / 2 + ", 0)")
    .attr("y1", 0)
    .attr("y2", -nodeMargin * 2 + 5);

cellB.append("text")
    .style("opacity", 0.8)
    .text("B")
    .attr("dx", nodeSizeB / 2)
    .attr("dy", nodeSizeB / 2 + 1);

cellB.append("text")
    .attr("class", "label")
    .attr("dx", function(d) { return d === "européenne" ? nodeSizeB / 2 + 15 : nodeSizeB / 2; })
    .attr("dy", - 24 - 5)
    .text(function(d) { return d; });

cellB.append("rect")
    .style("opacity", 0)
    .attr("transform", "translate(-" + ((xb.step() - nodeSizeB) / 2) + ",-" + nodeMargin + ")")
    .attr("width", xb.step())
    .attr("height", networkHeightB + (networkMargin - networkHeightB) / 2);
//
// Links
//
var linkGroup = svg.append("g").attr("class", ".link-group")

var link = linkGroup.selectAll(".link")
    .data(linkData)
  .enter().append("path")
    .attr("class", "link")
    .attr("d", link)
    .style("opacity", function(d) { return d.v; });
//
//
//
// var hoverB = svg.selectAll(".hover-b")
//     .data(labelsB)
//   .enter().append("rect")
//     .attr("class", "hover-b")
//     .style("opacity", 0)
//     .attr("transform", function(d, i) { return "translate(" + (xb(i) - xb.step() / 4) + ", 0)"; })
//     .attr("width", xb.step())
//     .attr("height", networkMargin / 2 + nodeSizeB)


})();</script>
</dt-include></p>

  <p>This kind of attention between RNNs has a number of other applications. It can be used in voice recognition <dt-cite key="chan2015listen"></dt-cite>, allowing one RNN to process the audio and then have another RNN skim over it, focusing on relevant parts as it generates a transcript.</p>

  <p><dt-include src="assets/rnn_attentional_ex3.html">
<figure id="attentional-ex3" class="l-page">
  <div class="stage">
    <svg>
      <g class="labels">
        <text transform="translate(0, 18)">output text</text>
        <text transform="translate(0, 55)">network B</text>
        <text transform="translate(0, 195)">network A</text>
        <text transform="translate(0, 250)">input audio</text>
      </g>
    </svg>
    <pre id="attentional-ex3-data" style="display: none;">0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.09,0.11,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.78,0.33,0.04,0.02,0.02,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.05,0.61,0.37,0.78,0.07,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.05,0.21,0.07,0.74,0.31,0.00,0.01,0.01,0.01,0.02,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.04,0.02,0.02,0.47,0.98,0.02,0.01,0.01,0.02,0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.96,0.98,0.28,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.00,0.01,0.01,0.40,0.49,0.61,0.30,0.02,0.02,0.01,0.01,0.01,0.02,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.05,0.07,0.09,0.18,0.96,0.89,0.87,0.54,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.10,0.05,0.13,0.01,0.03,0.05,0.10,0.14,0.32,0.13,0.01,0.02,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.12,0.60,0.04,0.03,0.02,0.02,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.05,0.41,0.66,0.02,0.02,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.94,0.72,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.04,0.76,0.02,0.01,0.01,0.01,0.01,0.02,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.77,0.45,0.66,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.04,0.01,0.00,0.02,0.13,0.98,0.97,0.02,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.09,0.00,0.01,0.01,0.01,0.02,0.90,0.02,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.08,0.10,0.01,0.01,0.01,0.03,0.96,0.19,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.13,0.02,0.01,0.01,0.01,0.01,0.60,0.18
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.02,0.60
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.02
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.02,0.02,0.02,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.00,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01
</pre>
    <img class="waveform" src="assets/rnn-attention-waveform-bw.png">
  </div>
  <figcaption>Figure derived from <a href="https://arxiv.org/pdf/1508.01211.pdf">Chan, <i>et al.</i> 2015</a></figcaption>
  <img class="pointer" src="assets/pointer.svg">
</figure>
<style>
#attentional-ex3 .stage {
  position: relative;
  margin-bottom: 24px;
}
#attentional-ex3 .waveform {
  position: absolute;
  opacity: 0.7;
}
#attentional-ex3 .pointer {
  position: absolute;
  width: 26px;
  height: 26px;
  top: 36px;
  left: -48px;
}
#attentional-ex3 svg {
  z-index: 1;
  position: relative;
  width: 100%;
}
#attentional-ex3 svg .labels {
  font-size: 12px;
  fill-opacity: 0.5;
}
#attentional-ex3 figcaption {
  text-align: center;
}
#attentional-ex3 .background {
  fill: rgb(240, 240, 245);
  fill-opacity: 0.8;
}
#attentional-ex3 .audio-background {
  fill: none;
  stroke: black;
  stroke-opacity: 0.3;
}
#attentional-ex3 .cell .node {
  fill: white;
  fill-opacity: 0.9;
  stroke: black;
  stroke-width: 1px;
  stroke-opacity: 0.15;
}
#attentional-ex3 .cell:hover .node {
  stroke-opacity: 1;
}
#attentional-ex3 .cell .shadow {
  fill: black;
  fill-opacity: 0.07;
}
#attentional-ex3 .cell text {
  font-size: 13px;
  fill-opacity: 0.5;
  text-anchor: middle;
  alignment-baseline: middle;
}
#attentional-ex3 .cell text.label {
  font-size: 15px;
  /*fill-opacity: 0.8;*/
  text-anchor: middle;
  alignment-baseline: middle;
}
#attentional-ex3 .cell:last-child text.label {
  font-size: 10px;
}
#attentional-ex3 .link-group {
  transition: opacity, 0.3s, linear;
}
#attentional-ex3 .link-group .node-highlight {
  transition: stroke-opacity, 0.3s, linear;
  stroke: black;
  stroke-opacity: 0;
  fill: none;
}
#attentional-ex3 .link-group:hover .node-highlight {
  stroke-opacity: 1;
}
#attentional-ex3 .link {
  fill: none;
  stroke: rgb(131, 89, 178);
  stroke-width: 2px;
  pointer-events: none;
}
#attentional-ex3 .arrow {
  stroke: black;
  stroke-opacity: 0.3;
}
#attentional-ex3 .cell:last-child .arrow:first-of-type {
  display: none;
}
#attentional-ex3 .tick {
  stroke: black;
  stroke-opacity: 0.2;
}
</style>

<script>
(function() {

var data = d3.csvParseRows(d3.select("#attentional-ex3-data").text());
var labelsB = ["h","o","w","_","m","u","c","h","_","w","o","u","l","d","_","a","_","w","o","o","d","c","h","u","c","k","_","c","h","u","c","k","<end>"];
var labelsA = d3.range(data.length);

var linkData = [];
data.forEach(function(a, ai) {
  a.forEach(function(b, bi) {
    linkData.push({
      ai: +ai,
      bi: +bi,
      v: +data[ai][bi]
    });
  });
});

var nodeMargin = 8;
var networkMargin = 140;
var audioHeight = 60;

var html = d3.select("#attentional-ex3");
var outerWidth = 984; //Math.max(700, html.node().getBoundingClientRect().width);
var outerHeight = 280;
var margin = {top: 36, right: nodeMargin + 80, bottom: 24, left: nodeMargin};
var width = outerWidth - margin.left - margin.right;
var height = outerHeight - margin.top - margin.bottom;

var xa = d3.scaleBand()
    .domain(d3.range(labelsA.length))
    .paddingInner(0.5)
    .range([nodeMargin, width - nodeMargin]);

var xb = d3.scaleBand()
    .domain(d3.range(labelsB.length))
    .paddingInner(0.5)
    .range([nodeMargin, width - nodeMargin]);

var nodeSizeA = xa.bandwidth();
var nodeSizeB = xb.bandwidth();

var networkHeightA = nodeSizeA + nodeMargin * 2;
var networkHeightB = nodeSizeB + nodeMargin * 2;

var link = function(d) {
  return "M" + (xb(d.bi) + nodeSizeB / 2) + "," + (nodeSizeB + nodeMargin)
      + "C" + (xb(d.bi) + nodeSizeB / 2) + "," + (nodeSizeB + networkMargin / 3 + nodeMargin)
      + " " + (xa(d.ai) + nodeSizeA / 2) + "," + (networkMargin - networkMargin / 3 + nodeMargin)
      + " " + (xa(d.ai) + nodeSizeA / 2) + "," + (networkMargin + nodeMargin);
};

var svg = html.select("svg")
    .attr("viewBox", "0 0 " + outerWidth + " " + outerHeight)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

html.select("svg .labels")
    .attr("transform", "translate(" + (width + nodeMargin * 3) + ", 0)");

var audio = svg.append("g")
    .attr("class", "audio")
    .attr("transform", "translate(0, " + (nodeMargin * 4 + nodeSizeA + networkMargin) + ")");

//
// Network A
//

var networkA = svg.append("g")
    .attr("transform", "translate(0, " + networkMargin + ")");

networkA.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", nodeSizeA + 2 * nodeMargin)
    .attr("rx", nodeMargin * 0.7)
    .attr("ry", nodeMargin * 0.7);

var cellA = networkA.selectAll(".cell")
    .data(labelsA)
  .enter().append("g")
    .attr("class", "cell")
    .attr("transform", function(d, i) { return "translate(" + xa(i) + ", " + nodeMargin + ")"; })
    .on("mouseover", function(d, i) {
      link.style("display", function(ld) {
        return ld.ai === i ? "" : "none";
      });
    })
    .on("mouseout", function() { link.style("display", ""); });

cellA.append("rect")
    .attr("class", "shadow")
    .attr("transform", "translate(1, 3)")
    .attr("width", nodeSizeA)
    .attr("height", nodeSizeA)
    .attr("rx", 4)
    .attr("ry", 4);

cellA.append("rect")
    .attr("class", "node")
    .attr("width", nodeSizeA)
    .attr("height", nodeSizeA)
    .attr("rx", 2)
    .attr("ry", 2);

cellA.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("x1", nodeSizeA)
    .attr("x2", nodeSizeA + nodeMargin)
    .attr("y1", nodeSizeA / 2)
    .attr("y2", nodeSizeA / 2);

cellA.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("transform", "translate(" + nodeSizeA / 2 + ", " + nodeSizeA + ")")
    .attr("y1",  nodeMargin * 3)
    .attr("y2",  4);

cellA.append("rect")
    .style("opacity", 0)
    .attr("transform", "translate(-" + ((xa.step() - nodeSizeA) / 2) + ",-" + (nodeMargin + (networkMargin - networkHeightB) / 2) + ")")
    .attr("width", xa.step())
    .attr("height", networkHeightA + (networkMargin - networkHeightA) / 2 + audioHeight + nodeMargin * 2);


//
// Network B
//

var networkB = svg.append("g");

networkB.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", nodeSizeB + 2 * nodeMargin)
    .attr("rx", nodeMargin * 0.7)
    .attr("ry", nodeMargin * 0.7);

var cellB = networkB.selectAll(".cell")
    .data(labelsB)
  .enter().append("g")
    .attr("class", "cell")
    .attr("transform", function(d, i) { return "translate(" + xb(i) + ", " + nodeMargin + ")"; })
    .on("mouseover", function(d, i) {
      link.style("display", function(ld) {
        return ld.bi === i ? "" : "none";
      });
    })
    .on("mouseout", function() { link.style("display", ""); });

cellB.append("rect")
    .attr("class", "shadow")
    .attr("transform", "translate(1, 3)")
    .attr("width", nodeSizeB)
    .attr("height", nodeSizeB)
    .attr("rx", 4)
    .attr("ry", 4);

cellB.append("rect")
    .attr("class", "node")
    .attr("width", nodeSizeB)
    .attr("height", nodeSizeB)
    .attr("rx", 2)
    .attr("ry", 2);

cellB.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("x1", nodeSizeB)
    .attr("x2", nodeSizeB + nodeMargin)
    .attr("y1", nodeSizeB / 2)
    .attr("y2", nodeSizeB / 2);

cellB.append("line")
    .attr("class", "arrow")
    .attr("marker-end", "url(#edgeArrowhead)")
    .attr("transform", "translate(" + nodeSizeB / 2 + ", 0)")
    .attr("y1", 0)
    .attr("y2", -nodeMargin * 2);

cellB.append("text")
    .attr("class", "label")
    .attr("dx", nodeSizeB / 2)
    .attr("dy", - nodeMargin * 2 - 15)
    .text(function(d) { return d; });

cellB.append("rect")
    .style("opacity", 0)
    .attr("transform", "translate(-" + ((xb.step() - nodeSizeB) / 2) + ",-" + nodeMargin + ")")
    .attr("width", xb.step())
    .attr("height", networkHeightB + (networkMargin - networkHeightB) / 2);
//
// Links
//

var linkGroup = svg.append("g").attr("class", ".link-group")

var link = linkGroup.selectAll(".link")
    .data(linkData)
  .enter().append("path")
    .attr("class", "link")
    .attr("d", link)
    .style("opacity", function(d) { return d.v; });

//
// Audio
//

html.select(".waveform")
    .style("left", "1%")
    .style("top", "76%")
    .style("width", "90%")
    .style("height", "20%")

audio.append("rect")
    .attr("class", "audio-background")
    .attr("width", width)
    .attr("height", audioHeight)
    .attr("rx", nodeMargin * 0.7)
    .attr("ry", nodeMargin * 0.7);

audio.selectAll(".tick")
    .data(labelsA)
  .enter().append("line")
    .style("display", function(d) { return d == 0 ? "none" : ""; })
    .attr("class", "tick")
    .attr("transform", "translate(-" + (xa.step() - xa.bandwidth()) / 2 + ", " + 0 + ")")
    .attr("x1", function(d) { return xa(d); })
    .attr("x2", function(d) { return xa(d); })
    .attr("y2", audioHeight)

audio.selectAll(".segment")
    .data(labelsA)
  .enter().append("rect")
    .style("opacity", 0)
    .attr("class", "segment")
    .attr("transform", function(d) {
      return "translate(" + ((-xa.step() + xa.bandwidth()) / 2 + xa(d)) + ", " + nodeMargin + ")";
    })
    .attr("width", xa.step())
    .attr("height", audioHeight)

})();
</script>
</dt-include></p>

  <p>Other uses of this kind of attention include parsing text <dt-cite key="vinyals2015grammar"></dt-cite>, where it allows the model to glance at words as it generates the parse tree, and for conversational modeling <dt-cite key="vinyals2015neural"></dt-cite>, where it lets the model focus on previous parts of the conversation as it generates its response.</p>

  <p>Attention can also be used on the interface between a convolutional neural network and an RNN. This allows the RNN to look at different position of an image every step. One popular use of this kind of attention is for image captioning. First, a conv net processes the image, extracting high-level features. Then an RNN runs, generating a description of the image. As it generates each word in the description, the RNN focuses on the conv net's interpretation of the relevant parts of the image. We can explicitly visualize this:</p>

  <p></p><figure class="l-body-outset external">
    <img src="assets/show-attend-tell.png">
    <figcaption style="bottom: 0px;">Figure from <dt-cite key="xu2015show"></dt-cite></figcaption>
  </figure><p></p>

  <p>More broadly, attentional interfaces can be used whenever one wants to interface with a neural network that has a repeating structure in its output.</p>

  <p>Attentional interfaces have been found to be an extremely general and powerful technique, and are becoming increasingly widespread.</p>

  <hr>

  <h2 id="adaptive-computation-time">Adaptive Computation Time</h2>

  <p class="equation-mimic">Standard RNNs do the same amount of computation for each time step. This seems unintuitive. Surely, one should think more when things are hard? It also limits RNNs to doing <span class="equation-mimic">O(n)</span> operations for a list of length <span class="equation-mimic">n</span>.</p>

  <p>Adaptive Computation Time <dt-cite key="graves2016adaptive"></dt-cite> is a way for RNNs to do different amounts of computation each step. The big picture idea is simple: allow the RNN to do multiple steps of computation for each time step.</p>

  <p>In order for the network to learn how many steps to do, we want the number of steps to be differentiable. We achieve this with the same trick we used before: instead of deciding to run for a discrete number of steps, we have an attention distribution over the number of steps to run. The output is a weighted combination of the outputs of each step.</p>

  <p></p><figure class="l-page">
    <dt-include src="assets/rnn_adaptive_01.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 984 294">
  <defs>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-5" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <rect x="787" y="70" width="132" height="156" rx="10" ry="10" fill="#f0f0f5"></rect>
  <path d="M893,94.5H880.5a10,10,0,0,0-10,10v28a10,10,0,0,1-10,10h-1.83" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g>
    <line x1="835" y1="238" x2="835" y2="175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M835,170a27.2,27.2,0,0,0,4.28,7.69L835,176.14l-4.28,1.55A27.18,27.18,0,0,0,835,170Z" fill="#666"></path>
  </g>
  <g>
    <path d="M895,94.5h32a10.16,10.16,0,0,1,10.11,10l0.29,27.5a10.42,10.42,0,0,0,10.1,10.21l8.57,0.18" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M961.5,142.5a27.2,27.2,0,0,0-7.78,4.12l1.64-4.25-1.46-4.31A27.18,27.18,0,0,0,961.5,142.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M895,94.5h32a10,10,0,0,0,10-10V57.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M937,52a27.2,27.2,0,0,0,4.28,7.69L937,58.14l-4.28,1.55A27.18,27.18,0,0,0,937,52Z" fill="#666"></path>
  </g>
  <g id="_Group_" data-name="<Group>">
    <g opacity="0.1">
      <rect x="812" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="812" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="812" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="812" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M840.93,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L840,137.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,840.93,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(810.25 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="836.75" cy="197.25" r="11.25"></circle>
      <circle cx="836.75" cy="197.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M834.63,194.33a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44,3.75,3.75,0,0,1,.74,2.26v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1,3.86,3.86,0,0,1-.9-2.66v-0.09a3.42,3.42,0,0,1,.64-2,2.76,2.76,0,0,1,1.63-1.14v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,834.63,194.33Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.94,1.94,0,0,0,3,0,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,835.05,199.53Z"></path>
    </g>
    <use width="24" height="24" transform="translate(823.75 183.25)" xlink:href="#op-sum_2"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="894.75" cy="96.39" r="11.25"></circle>
      <circle cx="894.75" cy="96.39" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M890.63,96.88V95.57H894V92.14h1.34v3.43h3.41v1.31h-3.41v3.42H894V96.88h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(881.75 82.39)" xlink:href="#op-sum"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(60 22.88)" font-size="13" font-family="Open Sans">For every time step the RNN can <tspan x="0" y="20">do multiple computation steps.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(330.67 22.88)" font-size="13" font-family="Open Sans">The output is a weighted combination <tspan x="0" y="20">of the computation step outputs.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(634.67 22.88)" font-size="13" font-family="Open Sans">The process is repeated for <tspan x="0" y="20">each time step.</tspan></text>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <rect x="463" y="70" width="275.67" height="156" rx="10" ry="10" fill="#f0f0f5"></rect>
  </g>
  <path d="M702.33,94h-74.5a10,10,0,0,0-10,10v28.5a10,10,0,0,1-10,10h-1.17" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g opacity="0.4">
    <path d="M714.33,98h-14.5a10,10,0,0,0-10,10v24.5a10,10,0,0,1-10,10h-1.5" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <g opacity="0.4">
    <path d="M534.33,142.5l2-.34a10.22,10.22,0,0,0,10-10.16V100.5a10.07,10.07,0,0,1,10-10l146-.47" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <g>
    <line x1="510.33" y1="238" x2="510.33" y2="175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M510.33,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,510.33,170Z" fill="#666"></path>
  </g>
  <g>
    <path d="M510.33,238V224a10,10,0,0,1,10-10h51.5a10,10,0,0,0,10-10V175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M581.83,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,581.83,170Z" fill="#666"></path>
  </g>
  <g>
    <path d="M533.83,214h110.5a10,10,0,0,0,10-10V175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M654.33,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,654.33,170Z" fill="#666"></path>
  </g>
  <g>
    <line x1="534.33" y1="142.5" x2="550.9" y2="142.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M556.33,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,556.33,142.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="606.33" y1="142.5" x2="622.9" y2="142.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M628.33,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,628.33,142.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M714.33,94.5h32.5a9.9,9.9,0,0,1,9.9,10l-0.29,28a9.9,9.9,0,0,0,9.9,10H801.4" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M806.83,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,806.83,142.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M714.33,94.5h32.5a10,10,0,0,0,10-10V57.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M756.83,52a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,756.83,52Z" fill="#666"></path>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="512.08" cy="197.25" r="11.25"></circle>
      <circle cx="512.08" cy="197.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M510,194.33a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26A4.6,4.6,0,0,1,515,197a3.75,3.75,0,0,1,.74,2.26v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1,3.86,3.86,0,0,1-.9-2.66v-0.09a3.42,3.42,0,0,1,.64-2,2.76,2.76,0,0,1,1.63-1.14v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,510,194.33Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.94,1.94,0,0,0,3,0,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,510.39,199.53Z"></path>
    </g>
    <use width="24" height="24" transform="translate(499.08 183.25)" xlink:href="#op-sum_2"></use>
  </g>
  <g id="_Group_4" data-name="<Group>">
    <g opacity="0.1">
      <rect x="487.33" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="487.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="487.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="487.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M516.27,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,508,136.3a5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85l-0.56,1.57a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,516.27,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(485.58 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <rect x="559.33" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="559.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="559.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="559.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M588.27,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,580,136.3a5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85l-0.56,1.57a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,588.27,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(557.58 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_6" data-name="<Group>">
    <g opacity="0.1">
      <rect x="631.33" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="631.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="631.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="631.33" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M660.27,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,652,136.3a5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85l-0.56,1.57a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,660.27,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(629.58 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_7" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="714.58" cy="96.39" r="11.25"></circle>
      <circle cx="714.58" cy="96.39" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M710.46,96.88V95.57h3.41V92.14h1.34v3.43h3.41v1.31h-3.41v3.42h-1.34V96.88h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(701.58 82.39)" xlink:href="#op-sum"></use>
  </g>
  <g id="_Group_8" data-name="<Group>">
    <rect x="61" y="70" width="348" height="156" rx="10" ry="10" fill="#f0f0f5"></rect>
  </g>
  <g opacity="0.2">
    <path d="M132.67,142.5h1.83a10,10,0,0,0,10-10v-34a10,10,0,0,1,10-10H384" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <g opacity="0.5">
    <path d="M205,142.5h1.5a10,10,0,0,0,10-10v-30a10,10,0,0,1,10-10H384" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <path d="M384,96.5H298.5a10,10,0,0,0-10,10v26a10,10,0,0,1-10,10h-1.17" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g opacity="0.2">
    <path d="M384,100.5H370.5a10,10,0,0,0-10,10v22a10,10,0,0,1-10,10h-1.17" fill="none" stroke="#8359b2" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <g>
    <line x1="109" y1="238" x2="109" y2="175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M109,170a27.2,27.2,0,0,0,4.28,7.69L109,176.14l-4.28,1.55A27.18,27.18,0,0,0,109,170Z" fill="#666"></path>
  </g>
  <g>
    <path d="M133,214H243.5a10,10,0,0,0,10-10V175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M253.5,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,253.5,170Z" fill="#666"></path>
  </g>
  <g>
    <path d="M109,238V224a10,10,0,0,1,10-10H315.5a10,10,0,0,0,10-10V175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M325.5,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,325.5,170Z" fill="#666"></path>
  </g>
  <g>
    <line x1="133" y1="142.5" x2="149.57" y2="142.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M155,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,155,142.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="205" y1="142.5" x2="221.57" y2="142.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M227,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,227,142.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="277" y1="142.5" x2="293.57" y2="142.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M299,142.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,299,142.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M385,94.5h32.5a9.9,9.9,0,0,1,9.9,10l-0.29,28a9.9,9.9,0,0,0,9.9,10h36.74" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M479.17,142.5a27.2,27.2,0,0,0-7.69,4.28L473,142.5l-1.55-4.28A27.18,27.18,0,0,0,479.17,142.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M382,94.5h35.5a10,10,0,0,0,10-10V57.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M427.5,52a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,427.5,52Z" fill="#666"></path>
  </g>
  <g>
    <path d="M133,214h38.5a10,10,0,0,0,10-10V175.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M181.5,170a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,181.5,170Z" fill="#666"></path>
  </g>
  <g id="_Group_9" data-name="<Group>">
    <g opacity="0.1">
      <rect x="86" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="86" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="86" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="86" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M114.93,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L114,137.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,114.93,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(84.25 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_10" data-name="<Group>">
    <g opacity="0.1">
      <rect x="158" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="158" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="158" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="158" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M186.93,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L186,137.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,186.93,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(156.25 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_11" data-name="<Group>">
    <g opacity="0.1">
      <rect x="230" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="230" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="230" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="230" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M258.93,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L258,137.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,258.93,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(228.25 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_12" data-name="<Group>">
    <g opacity="0.1">
      <rect x="302" y="120" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="302" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="302" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="302" y="120" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M330.93,146.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L330,137.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,330.93,146.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(300.25 117.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_13" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="110.75" cy="197.25" r="11.25"></circle>
      <circle cx="110.75" cy="197.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M108.63,194.33a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44,3.75,3.75,0,0,1,.74,2.26v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1,3.86,3.86,0,0,1-.9-2.66v-0.09a3.42,3.42,0,0,1,.64-2,2.76,2.76,0,0,1,1.63-1.14v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,108.63,194.33Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.94,1.94,0,0,0,3,0,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,109.05,199.53Z"></path>
    </g>
    <use width="24" height="24" transform="translate(97.75 183.25)" xlink:href="#op-sum_2"></use>
  </g>
  <g id="_Group_14" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="384.75" cy="96.39" r="11.25"></circle>
      <circle cx="384.75" cy="96.39" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M380.63,96.88V95.57H384V92.14h1.34v3.43h3.41v1.31h-3.41v3.42H384V96.88h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(371.75 82.39)" xlink:href="#op-sum"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(61 258.14)" font-size="13" font-family="Open Sans">A special bit is set to denote <tspan x="0" y="20">the first computation step.</tspan></text>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="103" y1="55" x2="103" y2="56" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="103" y1="58.03" x2="103" y2="117.98" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.03 2.03"></line>
      <line x1="103" y1="119" x2="103" y2="120" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="100" y1="202" x2="99.29" y2="202.71" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="97.79" y1="204.21" x2="80.46" y2="221.54" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.13 2.13"></line>
      <polyline points="79.71 222.29 79 223 79 224" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></polyline>
      <line x1="79" y1="225.78" x2="79" y2="239.11" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="1.78 1.78"></line>
      <line x1="79" y1="240" x2="79" y2="241" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="383" y1="55" x2="383" y2="56" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="383" y1="58" x2="383" y2="77" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2 2"></line>
      <line x1="383" y1="78" x2="383" y2="79" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="642" y1="55" x2="642" y2="56" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="642" y1="58" x2="642" y2="73" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2 2"></line>
      <line x1="642" y1="74" x2="642" y2="75" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>There are a few more details, which were left out in the previous diagram. Here's a complete diagram of a time step with three computation steps.</p>

  <p></p><figure class="l-body-outset">
    <dt-include src="assets/rnn_adaptive_02.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 270">
  <defs>
    <symbol id="op-halo" data-name="op-halo" viewBox="0 0 31.45 31.45">
      <circle cx="15.73" cy="15.73" r="14.73" fill="#e6eaf2" stroke="#fff" stroke-miterlimit="10" stroke-width="2"></circle>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_5" data-name="op-sum 5" viewBox="0 0 24 24">
      <use id="op-bg-6" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <g>
        <path d="M11,12.65L4.21,15.32V14.26l5.51-2.12L4.21,10V9L11,11.66v1Z" fill="#666"></path>
        <path d="M16.34,11.45H15.48q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28H19a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38A2.21,2.21,0,0,1,12,12.79a1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69A1.56,1.56,0,0,1,12.24,9a1.8,1.8,0,0,1,.3-1,2,2,0,0,1,.74-0.69,4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H17.36a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-sum_4" data-name="op-sum 4" viewBox="0 0 24 24">
      <use id="op-bg-9" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.51,11.21h9v1.15h-9V11.21Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_3" data-name="op-sum 3" viewBox="0 0 24 24">
      <use id="op-bg-12" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.65,10V9.21a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23h0.83V16H11.62V10h-2Z" fill="#666"></path>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-15" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-sigma" data-name="rnn-sigma" viewBox="0 0 25.17 25.17">
      <rect x="0.75" y="0.75" width="23.67" height="23.67" rx="6" ry="6" fill="#f0f0f5" stroke="#666" stroke-width="1.5"></rect>
      <path d="M19,8.67H16.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32,5.73,5.73,0,0,1,1.5-4.07,5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21H19V8.67ZM15.8,12.78a5.89,5.89,0,0,0-.74-2.92,2.87,2.87,0,0,0-2.65-1.41A2.86,2.86,0,0,0,9.8,9.79a5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,2.89,2.89,0,0,0,2.47,1.26A2.88,2.88,0,0,0,15,15.74,5.37,5.37,0,0,0,15.8,12.78Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect x="48" y="13.89" width="612" height="240" rx="10" ry="10" fill="#f0f0f5"></rect>
  </g>
  <line x1="228" y1="40.89" x2="228" y2="265.89" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="420" y1="40.89" x2="420" y2="265.89" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="612" y1="40.89" x2="612" y2="265.89" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M120,182h50a10,10,0,0,0,10-10V110" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M312,182h50a10,10,0,0,0,10-10V110" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M504,182h50a10,10,0,0,0,10-10V110" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="336" y1="134" x2="336" y2="75.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="528" y1="134" x2="528" y2="79" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M179.5,97.89V81.39a10,10,0,0,1,10-10H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M371.5,98V85.5a10,10,0,0,1,10-10H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M563.51,96V87.75c0-4.54,4.5-8.25,10-8.25H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <line x1="120" y1="49.89" x2="528" y2="49.89" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M492,78.5v9.75A9.91,9.91,0,0,0,502,98h22" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M456,49.89h26c5.5,0,10,3.83,10,8.5v8.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <use id="op-halo-3" data-name="op-halo" width="31.45" height="31.45" transform="translate(212.94 11)" xlink:href="#op-halo"></use>
  <use id="op-halo-6" data-name="op-halo" width="31.45" height="31.45" transform="translate(404.94 11)" xlink:href="#op-halo"></use>
  <use id="op-halo-9" data-name="op-halo" width="31.45" height="31.45" transform="translate(596.94 11)" xlink:href="#op-halo"></use>
  <g>
    <path d="M276,242H469.5a10,10,0,0,0,10-10V212.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M479.5,207a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,479.5,207Z" fill="#666"></path>
  </g>
  <g>
    <path d="M96,272V252a10,10,0,0,1,10-10H277.5a10,10,0,0,0,10-10V212.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M287.5,207a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,287.5,207Z" fill="#666"></path>
  </g>
  <g>
    <line x1="30" y1="182" x2="66.57" y2="182" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M72,182a27.2,27.2,0,0,0-7.69,4.28L65.86,182l-1.55-4.28A27.18,27.18,0,0,0,72,182Z" fill="#666"></path>
  </g>
  <g>
    <line x1="642" y1="74.89" x2="666.57" y2="74.89" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M672,74.89a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,672,74.89Z" fill="#666"></path>
  </g>
  <g>
    <line x1="120" y1="182" x2="258.57" y2="182" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M264,182a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,264,182Z" fill="#666"></path>
  </g>
  <g>
    <line x1="312" y1="182" x2="450.57" y2="182" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M456,182a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,456,182Z" fill="#666"></path>
  </g>
  <g>
    <path d="M120,182h14a10,10,0,0,0,10-10V151.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M144,146a27.2,27.2,0,0,0,4.28,7.69L144,152.14l-4.28,1.55A27.18,27.18,0,0,0,144,146Z" fill="#666"></path>
  </g>
  <g>
    <path d="M312,182h14a10,10,0,0,0,10-10V151.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M336,146a27.2,27.2,0,0,0,4.28,7.69L336,152.14l-4.28,1.55A27.18,27.18,0,0,0,336,146Z" fill="#666"></path>
  </g>
  <g>
    <path d="M504,182h14a10,10,0,0,0,10-10V151.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M528,146a27.2,27.2,0,0,0,4.28,7.69L528,152.14l-4.28,1.55A27.18,27.18,0,0,0,528,146Z" fill="#666"></path>
  </g>
  <g>
    <line x1="144" y1="133.89" x2="144" y2="67.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M144,61.89a27.2,27.2,0,0,0,4.28,7.69L144,68l-4.28,1.55A27.18,27.18,0,0,0,144,61.89Z" fill="#666"></path>
  </g>
  <g>
    <line x1="336" y1="68.14" x2="336" y2="67.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M336,61.89a27.2,27.2,0,0,0,4.28,7.69L336,68l-4.28,1.55A27.18,27.18,0,0,0,336,61.89Z" fill="#666"></path>
  </g>
  <g>
    <line x1="528" y1="67.89" x2="528" y2="67.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M528,61.89a27.2,27.2,0,0,0,4.28,7.69L528,68l-4.28,1.55A27.18,27.18,0,0,0,528,61.89Z" fill="#666"></path>
  </g>
  <g>
    <path d="M144,134V108a10,10,0,0,1,10-10h8.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M168,98a27.2,27.2,0,0,0-7.69,4.28L161.86,98l-1.55-4.28A27.18,27.18,0,0,0,168,98Z" fill="#666"></path>
  </g>
  <g>
    <path d="M336,134V108a10,10,0,0,1,10-10h8.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M360,98a27.2,27.2,0,0,0-7.69,4.28L353.86,98l-1.55-4.28A27.18,27.18,0,0,0,360,98Z" fill="#666"></path>
  </g>
  <g>
    <path d="M144,50.39h18a16.83,16.83,0,0,0,10.26-4.22L188,30.61a16.83,16.83,0,0,1,10.26-4.22h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M213,26.39a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,213,26.39Z" fill="#666"></path>
  </g>
  <g>
    <path d="M336,49.89h18a17.11,17.11,0,0,0,10.31-4.18l15.63-15.15a17.11,17.11,0,0,1,10.31-4.18h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M405,26.39a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,405,26.39Z" fill="#666"></path>
  </g>
  <g>
    <path d="M528,50.39h18a16.83,16.83,0,0,0,10.26-4.22L572,30.61a16.83,16.83,0,0,1,10.26-4.22h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M597,26.39a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,597,26.39Z" fill="#666"></path>
  </g>
  <g>
    <line x1="532" y1="98" x2="546.57" y2="98.12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M552,98.16a27.2,27.2,0,0,0-7.73,4.22l1.58-4.27-1.51-4.29A27.18,27.18,0,0,0,552,98.16Z" fill="#666"></path>
  </g>
  <g>
    <line x1="96" y1="260" x2="96" y2="211.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M96,206a27.2,27.2,0,0,0,4.28,7.69L96,212.14l-4.28,1.55A27.18,27.18,0,0,0,96,206Z" fill="#666"></path>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="637.75" cy="76.89" r="11.25"></circle>
      <circle cx="637.75" cy="76.89" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M633.63,77.39V76.08H637V72.65h1.34v3.43h3.41v1.31h-3.41v3.42H637V77.39h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(624.75 62.89)" xlink:href="#op-sum"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="229.75" cy="28.64" r="11.25"></circle>
      <circle cx="229.75" cy="28.64" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M228.71,29.29L222,32V30.9l5.51-2.12L222,26.68V25.62l6.75,2.68v1Z"></path>
      <path d="M234.09,28.09h-0.85q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28h1.34a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38,2.21,2.21,0,0,1-1.18-2.08,1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69,1.56,1.56,0,0,1-.43-1.14,1.8,1.8,0,0,1,.3-1A2,2,0,0,1,231,23.9a4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2h-1.34a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z"></path>
    </g>
    <use width="24" height="24" transform="translate(216.75 14.64)" xlink:href="#op-sum_5"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="145.75" cy="51.99" r="11.25"></circle>
      <circle cx="145.75" cy="51.99" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M141.26,51.2h9v1.15h-9V51.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(132.75 37.99)" xlink:href="#op-sum_4"></use>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="108.25" cy="52.64" r="11.25"></circle>
      <circle cx="108.25" cy="52.64" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M105.9,50.66V49.85a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23H109V56.6h-1.12V50.66h-2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(95.25 38.64)" xlink:href="#op-sum_3"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="181.01" cy="99.25" r="11.25"></circle>
      <circle cx="181.01" cy="99.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M178.17,102.53l-1-1L179.74,99l-2.58-2.58,1-1L180.74,98l2.56-2.56,1,1L181.73,99l2.57,2.57-1,1L180.73,100Z"></path>
    </g>
    <use width="24" height="24" transform="translate(168.01 85.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="73" y="160" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="73" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M101.93,186.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L101,177.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,101.93,186.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(71.25 157.25)" xlink:href="#rnn-s"></use>
  </g>
  <use width="24" height="24" transform="translate(408.74 14.64)" xlink:href="#op-sum_5"></use>
  <g>
    <g opacity="0.1">
      <circle cx="337.74" cy="51.99" r="11.25"></circle>
      <circle cx="337.74" cy="51.99" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M333.26,51.2h9v1.15h-9V51.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(324.74 37.99)" xlink:href="#op-sum_4"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="373" cy="99.25" r="11.25"></circle>
      <circle cx="373" cy="99.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M370.16,102.53l-1-1L371.73,99l-2.58-2.58,1-1L372.74,98l2.56-2.56,1,1L373.72,99l2.57,2.57-1,1L372.72,100Z"></path>
    </g>
    <use width="24" height="24" transform="translate(360 85.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="264.99" y="160" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="264.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="264.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="264.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M293.93,186.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L293,177.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,293.93,186.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(263.24 157.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_4" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="613.74" cy="28.64" r="11.25"></circle>
      <circle cx="613.74" cy="28.64" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M612.7,29.29L605.95,32V30.9l5.51-2.12-5.51-2.11V25.62l6.75,2.68v1Z"></path>
      <path d="M618.07,28.09h-0.85q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28h1.34a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38,2.21,2.21,0,0,1-1.18-2.08,1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69,1.56,1.56,0,0,1-.43-1.14,1.8,1.8,0,0,1,.3-1A2,2,0,0,1,615,23.9a4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H619.1a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z"></path>
    </g>
    <use width="24" height="24" transform="translate(600.74 14.64)" xlink:href="#op-sum_5"></use>
  </g>
  <g id="_Group_5" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="528.74" cy="51.99" r="11.25"></circle>
      <circle cx="528.74" cy="51.99" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M524.25,51.2h9v1.15h-9V51.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(515.74 37.99)" xlink:href="#op-sum_4"></use>
  </g>
  <g id="_Group_6" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="565" cy="99.25" r="11.25"></circle>
      <circle cx="565" cy="99.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M562.16,102.53l-1-1L563.73,99l-2.58-2.58,1-1L564.74,98l2.56-2.56,1,1L565.72,99l2.57,2.57-1,1L564.72,100Z"></path>
    </g>
    <use width="24" height="24" transform="translate(552 85.25)" xlink:href="#op-x"></use>
  </g>
  <g id="_Group_7" data-name="<Group>">
    <g opacity="0.1">
      <rect x="456.99" y="160" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="456.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="160" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M485.92,186.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L485,177.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,485.92,186.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(455.24 157.25)" xlink:href="#rnn-s"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="96.75" cy="230" r="11.25"></circle>
      <circle cx="96.75" cy="230" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M94.63,227.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44,3.75,3.75,0,0,1,.74,2.26v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1,3.86,3.86,0,0,1-.9-2.66v-0.09a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,96,229v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,94.63,227.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.94,1.94,0,0,0,3,0,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,95.05,232.28Z"></path>
    </g>
    <use width="24" height="24" transform="translate(83.75 216)" xlink:href="#op-sum_2"></use>
  </g>
  <g id="_Group_8" data-name="<Group>">
    <g opacity="0.1">
      <rect x="325.33" y="123.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M343.54,131.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,333,131a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,340.39,135.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(323.58 120.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <g id="_Group_9" data-name="<Group>">
    <g opacity="0.1">
      <rect x="133.33" y="123.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M151.54,131.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,141,131a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,148.39,135.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(131.58 120.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <g id="_Group_10" data-name="<Group>">
    <g opacity="0.1">
      <rect x="517.33" y="123.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M535.54,131.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,525,131a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,532.39,135.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(515.58 120.58)" xlink:href="#rnn-sigma"></use>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>That's a bit complicated, so let's work through it step by step. At a high-level, we're still running the RNN and outputting a weighted combination of the states:</p>

  <p></p><figure class="l-body-outset">
    <dt-include src="assets/rnn_adaptive_02_1.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 270">
  <defs>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-14" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
    <symbol id="op-halo" data-name="op-halo" viewBox="0 0 31.45 31.45">
      <circle cx="15.73" cy="15.73" r="14.73" fill="#e6eaf2" stroke="#fff" stroke-miterlimit="10" stroke-width="2"></circle>
    </symbol>
    <symbol id="op-sum_5" data-name="op-sum 5" viewBox="0 0 24 24">
      <use id="op-bg-17" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <g>
        <path d="M11,12.65L4.21,15.32V14.26l5.51-2.12L4.21,10V9L11,11.66v1Z" fill="#666"></path>
        <path d="M16.34,11.45H15.48q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28H19a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38A2.21,2.21,0,0,1,12,12.79a1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69A1.56,1.56,0,0,1,12.24,9a1.8,1.8,0,0,1,.3-1,2,2,0,0,1,.74-0.69,4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H17.36a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-sum_4" data-name="op-sum 4" viewBox="0 0 24 24">
      <use id="op-bg-20" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.51,11.21h9v1.15h-9V11.21Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_3" data-name="op-sum 3" viewBox="0 0 24 24">
      <use id="op-bg-23" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.65,10V9.21a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23h0.83V16H11.62V10h-2Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-sigma" data-name="rnn-sigma" viewBox="0 0 25.17 25.17">
      <rect x="0.75" y="0.75" width="23.67" height="23.67" rx="6" ry="6" fill="#f0f0f5" stroke="#666" stroke-width="1.5"></rect>
      <path d="M19,8.67H16.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32,5.73,5.73,0,0,1,1.5-4.07,5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21H19V8.67ZM15.8,12.78a5.89,5.89,0,0,0-.74-2.92,2.87,2.87,0,0,0-2.65-1.41A2.86,2.86,0,0,0,9.8,9.79a5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,2.89,2.89,0,0,0,2.47,1.26A2.88,2.88,0,0,0,15,15.74,5.37,5.37,0,0,0,15.8,12.78Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <rect x="48" y="17.25" width="612" height="238.75" rx="10" ry="10" fill="#f0f0f5"></rect>
  <line x1="228" y1="43" x2="228" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="420" y1="43" x2="420" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="612" y1="43" x2="612" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <path d="M120,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M312,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M504,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M180,88V79.5a6,6,0,0,1,6-6H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M372,100V83.5a6,6,0,0,1,6-6H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M564,100V87.5a6,6,0,0,1,6-6h66" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g>
    <g opacity="0.1">
      <circle cx="181.01" cy="101.25" r="11.25"></circle>
      <circle cx="181.01" cy="101.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M178.17,104.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L181.74,101l2.57,2.57-1,1L180.73,102Z"></path>
    </g>
    <use width="24" height="24" transform="translate(168.01 87.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="73" y="162" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="73" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M101.93,188.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L101,179.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,101.93,188.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(71.25 159.25)" xlink:href="#rnn-s"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="373.01" cy="101.25" r="11.25"></circle>
      <circle cx="373.01" cy="101.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M370.17,104.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L373.73,101l2.57,2.57-1,1L372.73,102Z"></path>
    </g>
    <use width="24" height="24" transform="translate(360.01 87.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="264.99" y="162" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="264.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="264.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="264.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M293.93,188.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L293,179.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,293.93,188.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(263.24 159.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="565" cy="101.25" r="11.25"></circle>
      <circle cx="565" cy="101.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M562.16,104.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L565.72,101l2.57,2.57-1,1L564.72,102Z"></path>
    </g>
    <use width="24" height="24" transform="translate(552 87.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M485.92,188.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L485,179.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,485.92,188.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(455.24 159.25)" xlink:href="#rnn-s"></use>
  </g>
  <g>
    <g>
      <line x1="36" y1="184" x2="66.57" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M72,184a27.2,27.2,0,0,0-7.69,4.28L65.86,184l-1.55-4.28A27.18,27.18,0,0,0,72,184Z" fill="#666"></path>
    </g>
    <g>
      <line x1="642" y1="77" x2="666.57" y2="77" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M672,77a27.2,27.2,0,0,0-7.69,4.28L665.86,77l-1.55-4.28A27.17,27.17,0,0,0,672,77Z" fill="#666"></path>
    </g>
    <g>
      <line x1="120" y1="184" x2="258.57" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M264,184a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,264,184Z" fill="#666"></path>
    </g>
    <g>
      <line x1="312" y1="184" x2="450.57" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M456,184a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,456,184Z" fill="#666"></path>
    </g>
    <g>
      <path d="M276,244H469.5a10,10,0,0,0,10-10V214.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M479.5,209a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,479.5,209Z" fill="#666"></path>
    </g>
    <g>
      <path d="M96,274V254a10,10,0,0,1,10-10H277.5a10,10,0,0,0,10-10V214.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <path d="M287.5,209a27.2,27.2,0,0,0,4.28,7.69l-4.28-1.55-4.28,1.55A27.18,27.18,0,0,0,287.5,209Z" fill="#666"></path>
    </g>
    <g>
      <line x1="96" y1="262" x2="96" y2="213.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <path d="M96,208a27.2,27.2,0,0,0,4.28,7.69L96,214.14l-4.28,1.55A27.18,27.18,0,0,0,96,208Z" fill="#666"></path>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="96.75" cy="230.25" r="11.25"></circle>
      <circle cx="96.75" cy="230.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M94.63,227.33a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26A4.6,4.6,0,0,1,99.64,230a3.75,3.75,0,0,1,.74,2.26v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1,3.86,3.86,0,0,1-.9-2.66v-0.09a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,96,229.21v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,94.63,227.33Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.94,1.94,0,0,0,3,0,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,95.05,232.53Z"></path>
    </g>
    <use width="24" height="24" transform="translate(83.75 216.25)" xlink:href="#op-sum_2"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="637.75" cy="79" r="11.25"></circle>
      <circle cx="637.75" cy="79" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M633.63,79.49V78.18H637V74.75h1.34v3.43h3.41v1.31h-3.41v3.42H637V79.49h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(624.75 65)" xlink:href="#op-sum"></use>
  </g>
  <g opacity="0.2">
    <g>
      <path d="M120,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="147.68 151.96 147.02 152.57 144 149.32 140.98 152.57 140.32 151.96 144 148 147.68 151.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M312,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="339.68 151.96 339.02 152.57 336 149.32 332.98 152.57 332.32 151.96 336 148 339.68 151.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M504,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="531.68 151.96 531.02 152.57 528 149.32 524.98 152.57 524.32 151.96 528 148 531.68 151.96" fill="#666"></polygon>
    </g>
    <g>
      <line x1="144" y1="136" x2="144" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="147.68 67.96 147.02 68.57 144 65.32 140.98 68.57 140.32 67.96 144 64 147.68 67.96" fill="#666"></polygon>
    </g>
    <g>
      <line x1="336" y1="70.25" x2="336" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="339.68 67.96 339.02 68.57 336 65.32 332.98 68.57 332.32 67.96 336 64 339.68 67.96" fill="#666"></polygon>
    </g>
    <line x1="336" y1="136" x2="336" y2="77.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <line x1="528" y1="70" x2="528" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="531.68 67.96 531.02 68.57 528 65.32 524.98 68.57 524.32 67.96 528 64 531.68 67.96" fill="#666"></polygon>
    </g>
    <line x1="528" y1="136" x2="528" y2="81" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M144,136V106a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="164.05 103.68 163.43 103.02 166.68 100 163.43 96.98 164.05 96.32 168.01 100 164.05 103.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,136V106a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="356.05 103.68 355.43 103.02 358.68 100 355.43 96.98 356.05 96.32 360.01 100 356.05 103.68" fill="#666"></polygon>
    </g>
    <line x1="108" y1="52" x2="528" y2="52" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M144,52.5h18a16.83,16.83,0,0,0,10.26-4.22L188,32.72a16.83,16.83,0,0,1,10.26-4.22H212" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="209.04 32.18 208.43 31.52 211.68 28.5 208.43 25.48 209.04 24.82 213 28.5 209.04 32.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,52h18a17.11,17.11,0,0,0,10.31-4.18l15.63-15.15a17.11,17.11,0,0,1,10.31-4.18H404" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="401.04 32.18 400.43 31.52 403.68 28.5 400.43 25.48 401.04 24.82 405 28.5 401.04 32.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M528,52.5h18a16.83,16.83,0,0,0,10.26-4.22L572,32.72a16.83,16.83,0,0,1,10.26-4.22H596" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="593.04 32.18 592.43 31.52 595.68 28.5 592.43 25.48 593.04 24.82 597 28.5 593.04 32.18" fill="#666"></polygon>
    </g>
    <g>
      <line x1="532" y1="100" x2="551.03" y2="100.16" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="548.02 103.81 547.41 103.15 550.68 100.15 547.46 97.11 548.08 96.45 552.01 100.17 548.02 103.81" fill="#666"></polygon>
    </g>
    <path d="M492,80.5V94a6,6,0,0,0,6,6h26" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M456,52h30a6,6,0,0,1,6,6V69" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <use id="op-halo-3" data-name="op-halo" width="31.45" height="31.45" transform="translate(212.94 13.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-6" data-name="op-halo" width="31.45" height="31.45" transform="translate(404.94 13.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-9" data-name="op-halo" width="31.45" height="31.45" transform="translate(596.94 13.11)" xlink:href="#op-halo"></use>
    <use width="24" height="24" transform="translate(216.75 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(132.75 40.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(83.25 40.75)" xlink:href="#op-sum_3"></use>
    <use width="24" height="24" transform="translate(408.74 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(324.74 40.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(600.74 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(515.74 40.09)" xlink:href="#op-sum_4"></use>
    <use id="rnn-sigma-3" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(131.58 122.58)" xlink:href="#rnn-sigma"></use>
    <use id="rnn-sigma-6" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(323.58 122.58)" xlink:href="#rnn-sigma"></use>
    <use id="rnn-sigma-9" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(515.58 122.58)" xlink:href="#rnn-sigma"></use>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>The weight for each step is determined by a "halting neuron." It's a sigmoid neuron that looks at the RNN state and gives a halting weight, which we can think of as the probability that we should stop at that step.</p>

  <p></p><figure class="l-body-outset">
    <dt-include src="assets/rnn_adaptive_02_2.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 264">
  <defs>
    <symbol id="op-halo" data-name="op-halo" viewBox="0 0 31.45 31.45">
      <circle cx="15.73" cy="15.73" r="14.73" fill="#e6eaf2" stroke="#fff" stroke-miterlimit="10" stroke-width="2"></circle>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum_5" data-name="op-sum 5" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <g>
        <path d="M11,12.65L4.21,15.32V14.26l5.51-2.12L4.21,10V9L11,11.66v1Z" fill="#666"></path>
        <path d="M16.34,11.45H15.48q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28H19a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38A2.21,2.21,0,0,1,12,12.79a1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69A1.56,1.56,0,0,1,12.24,9a1.8,1.8,0,0,1,.3-1,2,2,0,0,1,.74-0.69,4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H17.36a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-sum_4" data-name="op-sum 4" viewBox="0 0 24 24">
      <use id="op-bg-6" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.51,11.21h9v1.15h-9V11.21Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_3" data-name="op-sum 3" viewBox="0 0 24 24">
      <use id="op-bg-9" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.65,10V9.21a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23h0.83V16H11.62V10h-2Z" fill="#666"></path>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-18" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-sigma" data-name="rnn-sigma" viewBox="0 0 25.17 25.17">
      <rect x="0.75" y="0.75" width="23.67" height="23.67" rx="6" ry="6" fill="#f0f0f5" stroke="#666" stroke-width="1.5"></rect>
      <path d="M19,8.67H16.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32,5.73,5.73,0,0,1,1.5-4.07,5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21H19V8.67ZM15.8,12.78a5.89,5.89,0,0,0-.74-2.92,2.87,2.87,0,0,0-2.65-1.41A2.86,2.86,0,0,0,9.8,9.79a5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,2.89,2.89,0,0,0,2.47,1.26A2.88,2.88,0,0,0,15,15.74,5.37,5.37,0,0,0,15.8,12.78Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-32" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <rect x="48" y="13.25" width="612" height="238.75" rx="10" ry="10" fill="#f0f0f5"></rect>
  <line x1="228" y1="39" x2="228" y2="264" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="420" y1="39" x2="420" y2="264" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="612" y1="39" x2="612" y2="264" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <g opacity="0.6">
    <text transform="translate(6 114)" font-size="13" font-family="Open Sans">halting neuron</text>
  </g>
  <g opacity="0.6">
    <g>
      <line x1="72" y1="120" x2="72.71" y2="120.71" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
      <line x1="74.22" y1="122.22" x2="82.54" y2="130.54" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2.14 2.14"></line>
      <polyline points="83.29 131.29 84 132 85 132" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></polyline>
      <line x1="87" y1="132" x2="130" y2="132" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5" stroke-dasharray="2 2"></line>
      <line x1="131" y1="132" x2="132" y2="132" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="0.5"></line>
    </g>
  </g>
  <g opacity="0.2">
    <g>
      <path d="M276,240H473.5a6,6,0,0,0,6-6V206" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="483.18 208.96 482.52 209.57 479.5 206.32 476.48 209.57 475.82 208.96 479.5 205 483.18 208.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M287.5,206.14V234a6,6,0,0,1-6,6H102a6,6,0,0,0-6,6v18h0V204" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="283.21 209.62 283.98 210.33 287.5 206.54 291.02 210.33 291.79 209.62 287.5 205 283.21 209.62" fill="#666"></polygon>
    </g>
    <g>
      <line x1="120" y1="180" x2="263.02" y2="180" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="260.04 183.68 259.43 183.02 262.68 180 259.43 176.98 260.04 176.32 264 180 260.04 183.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="312" y1="180" x2="455.02" y2="180" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="452.04 183.68 451.43 183.02 454.68 180 451.43 176.98 452.04 176.32 456 180 452.04 183.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M312,180h18a6,6,0,0,0,6-6V145" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="339.68 147.96 339.02 148.57 336 145.32 332.98 148.57 332.32 147.96 336 144 339.68 147.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M504,180h18a6,6,0,0,0,6-6V145" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="531.68 147.96 531.02 148.57 528 145.32 524.98 148.57 524.32 147.96 528 144 531.68 147.96" fill="#666"></polygon>
    </g>
    <path d="M312,180h54a6,6,0,0,0,6-6V108" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M504,180h54a6,6,0,0,0,6-6V108" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g>
      <line x1="144" y1="132" x2="144" y2="60.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="147.68 63.96 147.02 64.57 144 61.32 140.98 64.57 140.32 63.96 144 60 147.68 63.96" fill="#666"></polygon>
    </g>
    <g>
      <line x1="336" y1="66.25" x2="336" y2="60.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="339.68 63.96 339.02 64.57 336 61.32 332.98 64.57 332.32 63.96 336 60 339.68 63.96" fill="#666"></polygon>
    </g>
    <line x1="336" y1="132" x2="336" y2="73.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <line x1="528" y1="66" x2="528" y2="60.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="531.68 63.96 531.02 64.57 528 61.32 524.98 64.57 524.32 63.96 528 60 531.68 63.96" fill="#666"></polygon>
    </g>
    <line x1="528" y1="132" x2="528" y2="77" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M336,132V102a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="356.04 99.68 355.43 99.02 358.68 96 355.43 92.98 356.04 92.32 360 96 356.04 99.68" fill="#666"></polygon>
    </g>
    <path d="M372,84V78.75c0-2.89,2.7-5.25,6-5.25H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M564,95V83.5a6,6,0,0,1,6-6h66" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <line x1="108" y1="48" x2="528" y2="48" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M144,48.5h18a16.83,16.83,0,0,0,10.26-4.22L188,28.72a16.83,16.83,0,0,1,10.26-4.22H212" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="209.04 28.18 208.43 27.52 211.68 24.5 208.43 21.48 209.04 20.82 213 24.5 209.04 28.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,48h18a17.11,17.11,0,0,0,10.31-4.18l15.63-15.15a17.11,17.11,0,0,1,10.31-4.18H404" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="401.04 28.18 400.43 27.52 403.68 24.5 400.43 21.48 401.04 20.82 405 24.5 401.04 28.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M528,48.5h18a16.83,16.83,0,0,0,10.26-4.22L572,28.72a16.83,16.83,0,0,1,10.26-4.22H596" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="593.04 28.18 592.43 27.52 595.68 24.5 592.43 21.48 593.04 20.82 597 24.5 593.04 28.18" fill="#666"></polygon>
    </g>
    <g>
      <line x1="532" y1="96" x2="551.02" y2="96.16" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="548.01 99.81 547.4 99.15 550.68 96.15 547.45 93.11 548.07 92.45 552 96.17 548.01 99.81" fill="#666"></polygon>
    </g>
    <path d="M492,76.5V90a6,6,0,0,0,6,6h26" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M456,48h30a6,6,0,0,1,6,6V65" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <use id="op-halo-3" data-name="op-halo" width="31.45" height="31.45" transform="translate(212.94 9.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-6" data-name="op-halo" width="31.45" height="31.45" transform="translate(404.94 9.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-9" data-name="op-halo" width="31.45" height="31.45" transform="translate(596.94 9.11)" xlink:href="#op-halo"></use>
    <use width="24" height="24" transform="translate(216.75 12.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(132.75 36.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(83.25 36.75)" xlink:href="#op-sum_3"></use>
    <use width="24" height="24" transform="translate(408.74 12.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(324.74 36.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(360.01 83.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(263.24 155.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(600.74 12.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(515.74 36.09)" xlink:href="#op-sum_4"></use>
    <use id="op-x-5" data-name="op-x" width="24" height="24" transform="translate(552 83.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(455.24 155.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(83.75 212.25)" xlink:href="#op-sum_2"></use>
    <use id="rnn-sigma-3" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(323.58 118.58)" xlink:href="#rnn-sigma"></use>
    <use id="rnn-sigma-6" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(515.58 118.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <path d="M120,180h54a6,6,0,0,0,6-6V108" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g>
    <line x1="36" y1="180" x2="66.57" y2="180" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M72,180a27.2,27.2,0,0,0-7.69,4.28L65.86,180l-1.55-4.28A27.18,27.18,0,0,0,72,180Z" fill="#666"></path>
  </g>
  <g>
    <line x1="642" y1="73" x2="666.57" y2="73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M672,73a27.2,27.2,0,0,0-7.69,4.28L665.86,73l-1.55-4.28A27.17,27.17,0,0,0,672,73Z" fill="#666"></path>
  </g>
  <g>
    <path d="M120,180h18a6,6,0,0,0,6-6V149.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M144,144a27.2,27.2,0,0,0,4.28,7.69L144,150.14l-4.28,1.55A27.17,27.17,0,0,0,144,144Z" fill="#666"></path>
  </g>
  <g>
    <path d="M144,132V102a6,6,0,0,1,6-6h12.57" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M168,96a27.2,27.2,0,0,0-7.69,4.28L161.86,96l-1.55-4.28A27.17,27.17,0,0,0,168,96Z" fill="#666"></path>
  </g>
  <path d="M179.49,84V75.5a6,6,0,0,1,6-6H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g id="_Group_" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="637.75" cy="75" r="11.25"></circle>
      <circle cx="637.75" cy="75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M633.63,75.49V74.18H637V70.75h1.34v3.43h3.41v1.31h-3.41v3.42H637V75.49h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(624.75 61)" xlink:href="#op-sum"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="181" cy="97.25" r="11.25"></circle>
      <circle cx="181" cy="97.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M178.16,100.53l-1-1L179.73,97l-2.58-2.58,1-1L180.74,96l2.56-2.56,1,1L181.72,97l2.57,2.57-1,1L180.72,98Z"></path>
    </g>
    <use width="24" height="24" transform="translate(168 83.25)" xlink:href="#op-x"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="73" y="158" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="73" y="158" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="158" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="73" y="158" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M101.93,184.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L101,175.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,101.93,184.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(71.25 155.25)" xlink:href="#rnn-s"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="133.33" y="121.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M151.54,129.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,141,129a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,148.39,133.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(131.58 118.58)" xlink:href="#rnn-sigma"></use>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>We have a total budget for the halting weights of 1, so we track that budget along the top. When it gets to less than epsilon, we stop.</p>

  <p></p><figure class="l-body-outset">
    <dt-include src="assets/rnn_adaptive_02_3.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 276">
  <defs>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-6" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="op-halo" data-name="op-halo" viewBox="0 0 31.45 31.45">
      <circle cx="15.73" cy="15.73" r="14.73" fill="#e6eaf2" stroke="#fff" stroke-miterlimit="10" stroke-width="2"></circle>
    </symbol>
    <symbol id="op-sum_5" data-name="op-sum 5" viewBox="0 0 24 24">
      <use id="op-bg-17" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <g>
        <path d="M11,12.65L4.21,15.32V14.26l5.51-2.12L4.21,10V9L11,11.66v1Z" fill="#666"></path>
        <path d="M16.34,11.45H15.48q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28H19a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38A2.21,2.21,0,0,1,12,12.79a1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69A1.56,1.56,0,0,1,12.24,9a1.8,1.8,0,0,1,.3-1,2,2,0,0,1,.74-0.69,4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H17.36a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-sum_3" data-name="op-sum 3" viewBox="0 0 24 24">
      <use id="op-bg-20" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.65,10V9.21a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23h0.83V16H11.62V10h-2Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_4" data-name="op-sum 4" viewBox="0 0 24 24">
      <use id="op-bg-29" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.51,11.21h9v1.15h-9V11.21Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-sigma" data-name="rnn-sigma" viewBox="0 0 25.17 25.17">
      <rect x="0.75" y="0.75" width="23.67" height="23.67" rx="6" ry="6" fill="#f0f0f5" stroke="#666" stroke-width="1.5"></rect>
      <path d="M19,8.67H16.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32,5.73,5.73,0,0,1,1.5-4.07,5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21H19V8.67ZM15.8,12.78a5.89,5.89,0,0,0-.74-2.92,2.87,2.87,0,0,0-2.65-1.41A2.86,2.86,0,0,0,9.8,9.79a5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,2.89,2.89,0,0,0,2.47,1.26A2.88,2.88,0,0,0,15,15.74,5.37,5.37,0,0,0,15.8,12.78Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <rect x="48" y="21.25" width="612" height="238.75" rx="10" ry="10" fill="#f0f0f5"></rect>
  <line x1="228" y1="47" x2="228" y2="272" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="420" y1="47" x2="420" y2="272" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="612" y1="47" x2="612" y2="272" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <g opacity="0.2">
    <g>
      <path d="M276,248H473.5a6,6,0,0,0,6-6V214" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="483.18 216.96 482.52 217.57 479.5 214.32 476.48 217.57 475.82 216.96 479.5 213 483.18 216.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M287.5,214.14V242a6,6,0,0,1-6,6H102a6,6,0,0,0-6,6v18h0V212" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="283.21 217.62 283.98 218.33 287.5 214.54 291.02 218.33 291.79 217.62 287.5 213 283.21 217.62" fill="#666"></polygon>
    </g>
    <g>
      <line x1="36" y1="188" x2="71.02" y2="188" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="68.04 191.68 67.43 191.02 70.68 188 67.43 184.98 68.04 184.32 72 188 68.04 191.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="642" y1="81" x2="671.02" y2="81" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="668.04 84.68 667.43 84.02 670.68 81 667.43 77.98 668.04 77.32 672 81 668.04 84.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="120" y1="188" x2="263.02" y2="188" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="260.04 191.68 259.43 191.02 262.68 188 259.43 184.98 260.04 184.32 264 188 260.04 191.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="312" y1="188" x2="455.02" y2="188" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="452.04 191.68 451.43 191.02 454.68 188 451.43 184.98 452.04 184.32 456 188 452.04 191.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M120,188h18a6,6,0,0,0,6-6V153" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="147.68 155.96 147.02 156.57 144 153.32 140.98 156.57 140.32 155.96 144 152 147.68 155.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M312,188h18a6,6,0,0,0,6-6V153" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="339.68 155.96 339.02 156.57 336 153.32 332.98 156.57 332.32 155.96 336 152 339.68 155.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M504,188h18a6,6,0,0,0,6-6V153" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="531.68 155.96 531.02 156.57 528 153.32 524.98 156.57 524.32 155.96 528 152 531.68 155.96" fill="#666"></polygon>
    </g>
    <path d="M120,188h54a6,6,0,0,0,6-6V116" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M312,188h54a6,6,0,0,0,6-6V116" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M504,188h54a6,6,0,0,0,6-6V116" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g>
      <path d="M144,140V110a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="164.04 107.68 163.43 107.02 166.68 104 163.43 100.98 164.04 100.32 168 104 164.04 107.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,140V110a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="356.04 107.68 355.43 107.02 358.68 104 355.43 100.98 356.04 100.32 360 104 356.04 107.68" fill="#666"></polygon>
    </g>
    <path d="M180,92V83.5a6,6,0,0,1,6-6H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M372,92V86.75c0-2.89,2.7-5.25,6-5.25H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M564,107V91.5a6,6,0,0,1,6-6h66" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g>
      <line x1="532" y1="104" x2="551.02" y2="104.16" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="548.01 107.81 547.4 107.15 550.68 104.15 547.45 101.11 548.07 100.45 552 104.17 548.01 107.81" fill="#666"></polygon>
    </g>
    <path d="M492,84.5V98a6,6,0,0,0,6,6h26" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M456,56h30a6,6,0,0,1,6,6V73" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <use id="op-sum-3" data-name="op-sum" width="24" height="24" transform="translate(624.75 69)" xlink:href="#op-sum"></use>
    <use width="24" height="24" transform="translate(168.01 91.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(71.25 163.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(360.01 91.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(263.24 163.25)" xlink:href="#rnn-s"></use>
    <use id="op-x-7" data-name="op-x" width="24" height="24" transform="translate(552 91.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(455.24 163.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(83.75 220.25)" xlink:href="#op-sum_2"></use>
  </g>
  <line x1="108" y1="56" x2="528" y2="56" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
  <use id="op-halo-3" data-name="op-halo" width="31.45" height="31.45" transform="translate(212.94 17.11)" xlink:href="#op-halo"></use>
  <use id="op-halo-6" data-name="op-halo" width="31.45" height="31.45" transform="translate(404.94 17.11)" xlink:href="#op-halo"></use>
  <use id="op-halo-9" data-name="op-halo" width="31.45" height="31.45" transform="translate(596.94 17.11)" xlink:href="#op-halo"></use>
  <g>
    <g opacity="0.1">
      <circle cx="229.75" cy="34.75" r="11.25"></circle>
      <circle cx="229.75" cy="34.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M228.71,35.39L222,38.07V37l5.51-2.12L222,32.78V31.72l6.75,2.68v1Z"></path>
      <path d="M234.09,34.2h-0.85q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28h1.34a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38,2.21,2.21,0,0,1-1.18-2.08,1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69,1.56,1.56,0,0,1-.43-1.14,1.8,1.8,0,0,1,.3-1A2,2,0,0,1,231,30a4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2h-1.34a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88V34.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(216.75 20.75)" xlink:href="#op-sum_5"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="96.25" cy="58.75" r="11.25"></circle>
      <circle cx="96.25" cy="58.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M93.9,56.77V56a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23H97v8.36H95.87V56.77h-2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(83.25 44.75)" xlink:href="#op-sum_3"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="421.74" cy="34.75" r="11.25"></circle>
      <circle cx="421.74" cy="34.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M420.71,35.39L414,38.07V37l5.51-2.12L414,32.78V31.72l6.75,2.68v1Z"></path>
      <path d="M426.08,34.2h-0.85q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28h1.34a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38,2.21,2.21,0,0,1-1.18-2.08,1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69,1.56,1.56,0,0,1-.43-1.14,1.8,1.8,0,0,1,.3-1A2,2,0,0,1,423,30a4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H427.1a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88V34.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(408.74 20.75)" xlink:href="#op-sum_5"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="613.74" cy="34.75" r="11.25"></circle>
      <circle cx="613.74" cy="34.75" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M612.7,35.39l-6.75,2.67V37l5.51-2.12-5.51-2.11V31.72l6.75,2.68v1Z"></path>
      <path d="M618.07,34.2h-0.85q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28h1.34a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38,2.21,2.21,0,0,1-1.18-2.08,1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69,1.56,1.56,0,0,1-.43-1.14,1.8,1.8,0,0,1,.3-1A2,2,0,0,1,615,30a4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H619.1a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88V34.2Z"></path>
    </g>
    <use width="24" height="24" transform="translate(600.74 20.75)" xlink:href="#op-sum_5"></use>
  </g>
  <g>
    <line x1="144" y1="140" x2="144" y2="73.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M144,68a27.2,27.2,0,0,0,4.28,7.69L144,74.14l-4.28,1.55A27.17,27.17,0,0,0,144,68Z" fill="#666"></path>
  </g>
  <g>
    <line x1="336" y1="140" x2="336" y2="73.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M336,68a27.2,27.2,0,0,0,4.28,7.69L336,74.14l-4.28,1.55A27.18,27.18,0,0,0,336,68Z" fill="#666"></path>
  </g>
  <g>
    <line x1="528" y1="140" x2="528" y2="73.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M528,68a27.2,27.2,0,0,0,4.28,7.69L528,74.14l-4.28,1.55A27.18,27.18,0,0,0,528,68Z" fill="#666"></path>
  </g>
  <g>
    <path d="M144,56.5h18a16.83,16.83,0,0,0,10.26-4.22L188,36.72a16.83,16.83,0,0,1,10.26-4.22h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M213,32.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,213,32.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M336,56h18a17.11,17.11,0,0,0,10.31-4.18l15.63-15.15a17.11,17.11,0,0,1,10.31-4.18h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M405,32.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,405,32.5Z" fill="#666"></path>
  </g>
  <g>
    <path d="M528,56.5h18a16.83,16.83,0,0,0,10.26-4.22L572,36.72a16.83,16.83,0,0,1,10.26-4.22h9.32" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M597,32.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.17,27.17,0,0,0,597,32.5Z" fill="#666"></path>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="145.75" cy="58.09" r="11.25"></circle>
      <circle cx="145.75" cy="58.09" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M141.26,57.3h9v1.15h-9V57.3Z"></path>
    </g>
    <use width="24" height="24" transform="translate(132.75 44.09)" xlink:href="#op-sum_4"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="528.74" cy="58.09" r="11.25"></circle>
      <circle cx="528.74" cy="58.09" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M524.25,57.3h9v1.15h-9V57.3Z"></path>
    </g>
    <use width="24" height="24" transform="translate(515.74 44.09)" xlink:href="#op-sum_4"></use>
  </g>
  <g id="_Group_" data-name="<Group>">
    <g opacity="0.1">
      <rect x="133.33" y="129.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M151.54,137.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,141,137a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,148.39,141.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(131.58 126.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="325.33" y="129.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M343.54,137.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,333,137a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,340.39,141.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(323.58 126.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <rect x="517.33" y="129.33" width="23.67" height="23.67" rx="6" ry="6" stroke="#000" stroke-width="1.5"></rect>
      <path d="M535.54,137.25h-2.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32A5.73,5.73,0,0,1,525,137a5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21h4.88v1.57Zm-3.16,4.11a5.89,5.89,0,0,0-.74-2.92,3.2,3.2,0,0,0-5.26-.06,5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,3.11,3.11,0,0,0,5.05-.06A5.37,5.37,0,0,0,532.39,141.37Z"></path>
    </g>
    <use width="25.17" height="25.17" transform="translate(515.58 126.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <g>
    <g opacity="0.1">
      <circle cx="337.74" cy="58.09" r="11.25"></circle>
      <circle cx="337.74" cy="58.09" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M333.26,57.3h9v1.15h-9V57.3Z"></path>
    </g>
    <use width="24" height="24" transform="translate(324.74 44.09)" xlink:href="#op-sum_4"></use>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>When we stop, might have some left over halting budget because we stop when it gets to less than epsilon. What should we do with it? Technically, it's being given to future steps but we don't want to compute those, so we attribute it to the last step.</p>

  <p></p><figure class="l-body-outset">
    <dt-include src="assets/rnn_adaptive_02_4.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 744 270">
  <defs>
    <symbol id="op-halo" data-name="op-halo" viewBox="0 0 31.45 31.45">
      <circle cx="15.73" cy="15.73" r="14.73" fill="#e6eaf2" stroke="#fff" stroke-miterlimit="10" stroke-width="2"></circle>
    </symbol>
    <symbol id="op-bg" data-name="op-bg" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="11.25" fill="#e0cef5" stroke="#000" stroke-miterlimit="10" stroke-opacity="0.5" stroke-width="1.5"></circle>
    </symbol>
    <symbol id="op-sum_5" data-name="op-sum 5" viewBox="0 0 24 24">
      <use id="op-bg-3" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <g>
        <path d="M11,12.65L4.21,15.32V14.26l5.51-2.12L4.21,10V9L11,11.66v1Z" fill="#666"></path>
        <path d="M16.34,11.45H15.48q-0.37,0-.73,0a1.84,1.84,0,0,0-.66.17,1,1,0,0,0-.46.42,1.19,1.19,0,0,0-.21.73,1.13,1.13,0,0,0,.2.67,1.4,1.4,0,0,0,.46.43,2.73,2.73,0,0,0,1.33.3,3,3,0,0,0,1.54-.37,1.66,1.66,0,0,0,.73-1.28H19a2.55,2.55,0,0,1-1.09,2.09,4,4,0,0,1-2.32.7,7.39,7.39,0,0,1-1.28-.11,4.23,4.23,0,0,1-1.17-.38A2.21,2.21,0,0,1,12,12.79a1.72,1.72,0,0,1,.55-1.3,2.33,2.33,0,0,1,1.2-.66v0a2.71,2.71,0,0,1-1.07-.69A1.56,1.56,0,0,1,12.24,9a1.8,1.8,0,0,1,.3-1,2,2,0,0,1,.74-0.69,4.19,4.19,0,0,1,2-.52,4.65,4.65,0,0,1,2.34.55,2.37,2.37,0,0,1,1.05,2H17.36a1.21,1.21,0,0,0-.64-1.15,3.21,3.21,0,0,0-1.36-.29,2.53,2.53,0,0,0-1.1.24,1,1,0,0,0-.58,1,1,1,0,0,0,.58,1,2.79,2.79,0,0,0,1.2.22h0.88v1.16Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-sum_4" data-name="op-sum 4" viewBox="0 0 24 24">
      <use id="op-bg-6" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.51,11.21h9v1.15h-9V11.21Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum_3" data-name="op-sum 3" viewBox="0 0 24 24">
      <use id="op-bg-9" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.65,10V9.21a4.3,4.3,0,0,0,1.59-.37,1.83,1.83,0,0,0,.67-1.23h0.83V16H11.62V10h-2Z" fill="#666"></path>
    </symbol>
    <symbol id="op-x" data-name="op-x" viewBox="0 0 24 24">
      <use id="op-bg-12" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.16,15.28l-1-1,2.56-2.56L8.16,9.16l1-1,2.58,2.58L14.3,8.17l1,1-2.56,2.56,2.57,2.57-1,1-2.57-2.57Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-s" data-name="rnn-s" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.68,27.61a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71V29.51a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1A7.38,7.38,0,0,1,21,22.68a4.06,4.06,0,0,1-.93-2.77A3.45,3.45,0,0,1,21.45,17,5.61,5.61,0,0,1,25,16a10.54,10.54,0,0,1,4.26.85l-0.56,1.57A9.63,9.63,0,0,0,25,17.6a3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1A8.56,8.56,0,0,1,28.76,25,3.68,3.68,0,0,1,29.68,27.61Z" fill="#5b5b5b"></path>
    </symbol>
    <symbol id="op-sum_2" data-name="op-sum 2" viewBox="0 0 24 24">
      <use width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M9.88,9.08a1.77,1.77,0,0,1,.69-1.47,3,3,0,0,1,1.89-.54,4.84,4.84,0,0,1,1.87.38v1.1a5.22,5.22,0,0,0-1.88-.4,1.57,1.57,0,0,0-.93.25,0.78,0.78,0,0,0-.35.67q0,0.74,1.51,1.26a4.6,4.6,0,0,1,2.22,1.44A3.75,3.75,0,0,1,15.64,14v0.27a4.23,4.23,0,0,1-.4,1.87,3,3,0,0,1-1.15,1.28,3.29,3.29,0,0,1-1.74.45,3.08,3.08,0,0,1-2.42-1A3.86,3.86,0,0,1,9,14.22V14.13a3.42,3.42,0,0,1,.64-2A2.76,2.76,0,0,1,11.29,11v0a2.36,2.36,0,0,1-1-.75A1.76,1.76,0,0,1,9.88,9.08Zm0.42,5.2a3,3,0,0,0,.55,1.89,1.8,1.8,0,0,0,1.49.69,1.79,1.79,0,0,0,1.48-.69,3.23,3.23,0,0,0,.55-2,2.67,2.67,0,0,0-.58-1.67,2.35,2.35,0,0,0-1.43-.92,1.81,1.81,0,0,0-1.49.7A3.19,3.19,0,0,0,10.3,14.28Z" fill="#666"></path>
    </symbol>
    <symbol id="rnn-sigma" data-name="rnn-sigma" viewBox="0 0 25.17 25.17">
      <rect x="0.75" y="0.75" width="23.67" height="23.67" rx="6" ry="6" fill="#f0f0f5" stroke="#666" stroke-width="1.5"></rect>
      <path d="M19,8.67H16.48a5.39,5.39,0,0,1,1.41,3.87,6.62,6.62,0,0,1-1.37,4.36,5.13,5.13,0,0,1-4.11,1.73,5,5,0,0,1-4.09-1.78,6.66,6.66,0,0,1-1.37-4.32,5.73,5.73,0,0,1,1.5-4.07,5.22,5.22,0,0,1,4-1.58,6.18,6.18,0,0,1,1.67.21H19V8.67ZM15.8,12.78a5.89,5.89,0,0,0-.74-2.92,2.87,2.87,0,0,0-2.65-1.41A2.86,2.86,0,0,0,9.8,9.79a5.53,5.53,0,0,0-.77,3,4.82,4.82,0,0,0,.91,3,2.89,2.89,0,0,0,2.47,1.26A2.88,2.88,0,0,0,15,15.74,5.37,5.37,0,0,0,15.8,12.78Z" fill="#666"></path>
    </symbol>
    <symbol id="op-sum" data-name="op-sum" viewBox="0 0 24 24">
      <use id="op-bg-35" data-name="op-bg" width="24" height="24" xlink:href="#op-bg"></use>
      <path d="M7.88,12.5V11.18h3.41V7.75h1.34v3.43H16V12.5H12.62v3.42H11.29V12.5H7.88Z" fill="#666"></path>
    </symbol>
  </defs>
  <title>rnn</title>
  <rect x="48" y="17.25" width="612" height="238.75" rx="10" ry="10" fill="#f0f0f5"></rect>
  <line x1="228" y1="43" x2="228" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="420" y1="43" x2="420" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <line x1="612" y1="43" x2="612" y2="268" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"></line>
  <g opacity="0.2">
    <g>
      <path d="M276,244H473.5a6,6,0,0,0,6-6V210" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="483.18 212.96 482.52 213.57 479.5 210.32 476.48 213.57 475.82 212.96 479.5 209 483.18 212.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M287.5,210.14V238a6,6,0,0,1-6,6H102a6,6,0,0,0-6,6v18h0V208" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="283.21 213.62 283.98 214.33 287.5 210.54 291.02 214.33 291.79 213.62 287.5 209 283.21 213.62" fill="#666"></polygon>
    </g>
    <g>
      <line x1="36" y1="184" x2="71.02" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="68.04 187.68 67.43 187.02 70.68 184 67.43 180.98 68.04 180.32 72 184 68.04 187.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="120" y1="184" x2="263.02" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="260.04 187.68 259.43 187.02 262.68 184 259.43 180.98 260.04 180.32 264 184 260.04 187.68" fill="#666"></polygon>
    </g>
    <g>
      <line x1="312" y1="184" x2="455.02" y2="184" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="452.04 187.68 451.43 187.02 454.68 184 451.43 180.98 452.04 180.32 456 184 452.04 187.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M120,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="147.68 151.96 147.02 152.57 144 149.32 140.98 152.57 140.32 151.96 144 148 147.68 151.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M312,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="339.68 151.96 339.02 152.57 336 149.32 332.98 152.57 332.32 151.96 336 148 339.68 151.96" fill="#666"></polygon>
    </g>
    <g>
      <path d="M504,184h18a6,6,0,0,0,6-6V149" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="531.68 151.96 531.02 152.57 528 149.32 524.98 152.57 524.32 151.96 528 148 531.68 151.96" fill="#666"></polygon>
    </g>
    <path d="M120,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M312,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <g>
      <line x1="144" y1="136" x2="144" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="147.68 67.96 147.02 68.57 144 65.32 140.98 68.57 140.32 67.96 144 64 147.68 67.96" fill="#666"></polygon>
    </g>
    <g>
      <line x1="336" y1="70.25" x2="336" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="339.68 67.96 339.02 68.57 336 65.32 332.98 68.57 332.32 67.96 336 64 339.68 67.96" fill="#666"></polygon>
    </g>
    <line x1="336" y1="136" x2="336" y2="77.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <line x1="528" y1="70" x2="528" y2="64.97" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
      <polygon points="531.68 67.96 531.02 68.57 528 65.32 524.98 68.57 524.32 67.96 528 64 531.68 67.96" fill="#666"></polygon>
    </g>
    <line x1="528" y1="96" x2="528" y2="81" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <line x1="528" y1="124" x2="528" y2="104" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M144,136V106a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="164.04 103.68 163.43 103.02 166.68 100 163.43 96.98 164.04 96.32 168 100 164.04 103.68" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,136V106a6,6,0,0,1,6-6h17" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="356.04 103.68 355.43 103.02 358.68 100 355.43 96.98 356.04 96.32 360 100 356.04 103.68" fill="#666"></polygon>
    </g>
    <path d="M180,88V79.5a6,6,0,0,1,6-6H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M372,88V82.75c0-2.89,2.7-5.25,6-5.25H636" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <line x1="108" y1="52" x2="528" y2="52" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <g>
      <path d="M144,52.5h18a16.83,16.83,0,0,0,10.26-4.22L188,32.72a16.83,16.83,0,0,1,10.26-4.22H212" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="209.04 32.18 208.43 31.52 211.68 28.5 208.43 25.48 209.04 24.82 213 28.5 209.04 32.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M336,52h18a17.11,17.11,0,0,0,10.31-4.18l15.63-15.15a17.11,17.11,0,0,1,10.31-4.18H404" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="401.04 32.18 400.43 31.52 403.68 28.5 400.43 25.48 401.04 24.82 405 28.5 401.04 32.18" fill="#666"></polygon>
    </g>
    <g>
      <path d="M528,52.5h18a16.83,16.83,0,0,0,10.26-4.22L572,32.72a16.83,16.83,0,0,1,10.26-4.22H596" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
      <polygon points="593.04 32.18 592.43 31.52 595.68 28.5 592.43 25.48 593.04 24.82 597 28.5 593.04 32.18" fill="#666"></polygon>
    </g>
    <use id="op-halo-3" data-name="op-halo" width="31.45" height="31.45" transform="translate(212.94 13.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-6" data-name="op-halo" width="31.45" height="31.45" transform="translate(404.94 13.11)" xlink:href="#op-halo"></use>
    <use id="op-halo-9" data-name="op-halo" width="31.45" height="31.45" transform="translate(596.94 13.11)" xlink:href="#op-halo"></use>
    <use width="24" height="24" transform="translate(216.75 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(132.75 40.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(83.25 40.75)" xlink:href="#op-sum_3"></use>
    <use width="24" height="24" transform="translate(168.01 87.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(71.25 159.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(408.74 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(324.74 40.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(360.01 87.25)" xlink:href="#op-x"></use>
    <use width="49.5" height="49.5" transform="translate(263.24 159.25)" xlink:href="#rnn-s"></use>
    <use width="24" height="24" transform="translate(600.74 16.75)" xlink:href="#op-sum_5"></use>
    <use width="24" height="24" transform="translate(515.74 40.09)" xlink:href="#op-sum_4"></use>
    <use width="24" height="24" transform="translate(83.75 216.25)" xlink:href="#op-sum_2"></use>
    <use id="rnn-sigma-3" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(131.58 122.58)" xlink:href="#rnn-sigma"></use>
    <use id="rnn-sigma-6" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(323.58 122.58)" xlink:href="#rnn-sigma"></use>
    <use id="rnn-sigma-9" data-name="rnn-sigma" width="25.17" height="25.17" transform="translate(515.58 122.58)" xlink:href="#rnn-sigma"></use>
  </g>
  <path d="M504,184h54a6,6,0,0,0,6-6V112" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M564,101V87.5a6,6,0,0,1,6-6h66" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M492,65V94a6,6,0,0,0,6,6h36" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <path d="M420,52h66a6,6,0,0,1,6,6V69" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g id="_Group_" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="565" cy="101.25" r="11.25"></circle>
      <circle cx="565" cy="101.25" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M562.16,104.53l-1-1,2.56-2.56-2.58-2.58,1-1,2.58,2.58,2.56-2.56,1,1L565.72,101l2.57,2.57-1,1L564.72,102Z"></path>
    </g>
    <use width="24" height="24" transform="translate(552 87.25)" xlink:href="#op-x"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <rect x="456.99" y="162" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M485.92,188.86a3.81,3.81,0,0,1-1.49,3.2,6.46,6.46,0,0,1-4,1.15,10.1,10.1,0,0,1-4.25-.71v-1.74a11.16,11.16,0,0,0,2.08.64,10.92,10.92,0,0,0,2.23.23,4.49,4.49,0,0,0,2.72-.69,2.25,2.25,0,0,0,.92-1.91,2.45,2.45,0,0,0-.32-1.32,3,3,0,0,0-1.08-1,15.14,15.14,0,0,0-2.31-1,7.38,7.38,0,0,1-3.1-1.84,4.06,4.06,0,0,1-.93-2.77,3.45,3.45,0,0,1,1.35-2.86,5.61,5.61,0,0,1,3.57-1.06,10.54,10.54,0,0,1,4.26.85L485,179.66a9.63,9.63,0,0,0-3.74-.81,3.62,3.62,0,0,0-2.24.62,2,2,0,0,0-.81,1.71,2.62,2.62,0,0,0,.3,1.32,2.8,2.8,0,0,0,1,.95,12.47,12.47,0,0,0,2.16,1,8.56,8.56,0,0,1,3.37,1.87A3.68,3.68,0,0,1,485.92,188.86Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(455.24 159.25)" xlink:href="#rnn-s"></use>
  </g>
  <g>
    <line x1="642" y1="77" x2="666.57" y2="77" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M672,77a27.2,27.2,0,0,0-7.69,4.28L665.86,77l-1.55-4.28A27.17,27.17,0,0,0,672,77Z" fill="#666"></path>
  </g>
  <g>
    <line x1="532" y1="100" x2="546.57" y2="100.12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M552,100.16a27.2,27.2,0,0,0-7.73,4.22l1.58-4.27-1.51-4.29A27.18,27.18,0,0,0,552,100.16Z" fill="#666"></path>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <circle cx="637.75" cy="79" r="11.25"></circle>
      <circle cx="637.75" cy="79" r="11.25" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5" opacity="0.5"></circle>
      <path d="M633.63,79.49V78.18H637V74.75h1.34v3.43h3.41v1.31h-3.41v3.42H637V79.49h-3.41Z"></path>
    </g>
    <use width="24" height="24" transform="translate(624.75 65)" xlink:href="#op-sum"></use>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>When training Adaptive Computation Time models, one adds a "ponder cost" term to the cost function. This penalizes the model for the amount of computation it uses. The bigger you make this term, the more it will trade-off performance for lowering compute time.</p>

  <p>Adaptive Computation Time is a very new idea, but we believe that it, along with similar ideas, will be very important.</p>

  <h3>Code</h3>

  <p>The only open source implementation of Adaptive Computation Time at the moment seems to be <a href="https://github.com/DeNeutoy/act-tensorflow">Mark Neumann's</a> (TensorFlow).</p>

  <hr>

  <h2 id="neural-programmer">Neural Programmer</h2>

  <p>Neural nets are excellent at many tasks, but they also struggle to do some basic things like arithmetic, which are trivial in normal approaches to computing. It would be really nice to have a way to fuse neural nets with normal programming, and get the best of both worlds.</p>

  <p>The neural programmer <dt-cite key="neelakantan2015neural"></dt-cite> is one approach to this. It learns to create programs in order to solve a task. In fact, it learns to generate such programs <em>without needing examples of correct programs</em>. It discovers how to produce programs as a means to the end of accomplishing some task.</p>

  <p>The actual model in the paper answers questions about tables by generating SQL-like programs to query the table. However, there are a number of details here that make it a bit complicated, so let's start by imagining a slightly simpler model, which is given an arithmetic expression and generates a program to evaluate it.</p>

  <p>The generated program is a sequence of operations. Each operation is defined to operate on the output of past operations. So an operation might be something like "add the output of the operation 2 steps ago and the output of the operation 1 step ago." It's more like a Unix pipe than a program with variables being assigned to and read from.</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_programmer_1.svg"><svg id="text" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 66">
  <defs>
    <symbol id="op-1" data-name="op-1" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M35.86,16.27H34.49V10.74q0-1,0-1.57l-0.33.31-1.32,1.08L32.2,9.69l2.52-2h1.15v8.57Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-2" data-name="op-2" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M37.63,16.27H31.82v-1L34,13a18.79,18.79,0,0,0,1.3-1.42,3.39,3.39,0,0,0,.47-0.79A2.12,2.12,0,0,0,35.94,10a1.21,1.21,0,0,0-.35-0.91,1.34,1.34,0,0,0-1-.33,2.57,2.57,0,0,0-1,.18,4.46,4.46,0,0,0-1.06.66l-0.74-.91a4.8,4.8,0,0,1,1.39-.86,4.07,4.07,0,0,1,1.44-.25,2.82,2.82,0,0,1,1.92.62,2.11,2.11,0,0,1,.72,1.68,3,3,0,0,1-.21,1.1,4.48,4.48,0,0,1-.64,1.08A14.6,14.6,0,0,1,35,13.56L33.56,15v0.06h4.07v1.21Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-3" data-name="op-3" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12ZM13.5,12a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.55,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.5,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.74V9.79h1.11q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.61,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.69,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.2,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.69,10.8Z" fill="#666"></path>
        <path d="M37.36,9.67A2,2,0,0,1,36.88,11a2.39,2.39,0,0,1-1.34.73v0a2.59,2.59,0,0,1,1.55.64,1.84,1.84,0,0,1,.52,1.36,2.26,2.26,0,0,1-.87,1.91,4,4,0,0,1-2.48.67,5.59,5.59,0,0,1-2.4-.46V14.7a5.49,5.49,0,0,0,1.15.42,5,5,0,0,0,1.17.15,2.47,2.47,0,0,0,1.49-.37,1.34,1.34,0,0,0,.49-1.14,1.09,1.09,0,0,0-.54-1,3.48,3.48,0,0,0-1.71-.32H33.16V11.3h0.76Q36,11.3,36,9.88A1,1,0,0,0,35.6,9a1.61,1.61,0,0,0-1.05-.3,3.19,3.19,0,0,0-.94.14,4.44,4.44,0,0,0-1.07.54l-0.67-1a4.49,4.49,0,0,1,2.74-.87,3.26,3.26,0,0,1,2,.56A1.83,1.83,0,0,1,37.36,9.67Z" fill="#666"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g>
    <line x1="60" y1="42" x2="132.57" y2="42" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M138,42a27.2,27.2,0,0,0-7.69,4.28L131.86,42l-1.55-4.28A27.18,27.18,0,0,0,138,42Z" fill="#666"></path>
  </g>
  <g>
    <line x1="192" y1="42" x2="264.57" y2="42" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M270,42a27.2,27.2,0,0,0-7.69,4.28L263.86,42l-1.55-4.28A27.18,27.18,0,0,0,270,42Z" fill="#666"></path>
  </g>
  <g>
    <line x1="324" y1="42" x2="396.57" y2="42" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M402,42a27.2,27.2,0,0,0-7.69,4.28L395.86,42l-1.55-4.28A27.18,27.18,0,0,0,402,42Z" fill="#666"></path>
  </g>
  <g>
    <line x1="456" y1="42" x2="528.57" y2="42" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M534,42a27.2,27.2,0,0,0-7.69,4.28L527.86,42l-1.55-4.28A27.18,27.18,0,0,0,534,42Z" fill="#666"></path>
  </g>
  <g>
    <path d="M168,42s52-30,117-30c52.7,0,97.43,16,112,21.89" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    <path d="M402,36a27.2,27.2,0,0,0-8.74,1l3.06-3.37,0.2-4.55A27.17,27.17,0,0,0,402,36Z" fill="#666"></path>
  </g>
  <g>
    <path d="M216.48,18.38A298.3,298.3,0,0,0,153,11.25C88.54,11.25,36.15,41,35.63,41.35l0.75,1.3C36.89,42.35,89,12.75,153,12.75a295.48,295.48,0,0,1,60.43,6.5Z" fill="#666"></path>
    <path d="M264.52,29.11l-0.17,3.72a306,306,0,0,0-33.49-11l-2.81.81A306,306,0,0,1,263.8,34.23L261.26,37A27.2,27.2,0,0,1,270,36,27.17,27.17,0,0,1,264.52,29.11Z" fill="#666"></path>
  </g>
  <use id="op-1-3" data-name="op-1" width="50.5" height="27.5" transform="translate(12 30)" xlink:href="#op-1"></use>
  <use id="op-1-6" data-name="op-1" width="50.5" height="27.5" transform="translate(272.24 30)" xlink:href="#op-1"></use>
  <use id="op-2-3" data-name="op-2" width="50.5" height="27.5" transform="translate(139.85 30)" xlink:href="#op-2"></use>
  <use id="op-3-3" data-name="op-3" width="50.5" height="27.5" transform="translate(408 30)" xlink:href="#op-3"></use>
</svg>
</dt-include>
  </figure><p></p>

  <p>The program is generated one operation at a time by a controller RNN. At each step, the controller RNN outputs a probability distribution for what the next operation should be. For example, we might be pretty sure we want to perform addition at the first time step, then have a hard time deciding whether we should multiply or divide at the second step, and so on...</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_programmer_2.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 228">
  <defs>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
    <symbol id="op-1" data-name="op-1" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M35.86,16.27H34.49V10.74q0-1,0-1.57l-0.33.31-1.32,1.08L32.2,9.69l2.52-2h1.15v8.57Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-2" data-name="op-2" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M37.63,16.27H31.82v-1L34,13a18.79,18.79,0,0,0,1.3-1.42,3.39,3.39,0,0,0,.47-0.79A2.12,2.12,0,0,0,35.94,10a1.21,1.21,0,0,0-.35-0.91,1.34,1.34,0,0,0-1-.33,2.57,2.57,0,0,0-1,.18,4.46,4.46,0,0,0-1.06.66l-0.74-.91a4.8,4.8,0,0,1,1.39-.86,4.07,4.07,0,0,1,1.44-.25,2.82,2.82,0,0,1,1.92.62,2.11,2.11,0,0,1,.72,1.68,3,3,0,0,1-.21,1.1,4.48,4.48,0,0,1-.64,1.08A14.6,14.6,0,0,1,35,13.56L33.56,15v0.06h4.07v1.21Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-3" data-name="op-3" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12ZM13.5,12a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.55,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.5,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.74V9.79h1.11q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.61,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.69,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.2,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.69,10.8Z" fill="#666"></path>
        <path d="M37.36,9.67A2,2,0,0,1,36.88,11a2.39,2.39,0,0,1-1.34.73v0a2.59,2.59,0,0,1,1.55.64,1.84,1.84,0,0,1,.52,1.36,2.26,2.26,0,0,1-.87,1.91,4,4,0,0,1-2.48.67,5.59,5.59,0,0,1-2.4-.46V14.7a5.49,5.49,0,0,0,1.15.42,5,5,0,0,0,1.17.15,2.47,2.47,0,0,0,1.49-.37,1.34,1.34,0,0,0,.49-1.14,1.09,1.09,0,0,0-.54-1,3.48,3.48,0,0,0-1.71-.32H33.16V11.3h0.76Q36,11.3,36,9.88A1,1,0,0,0,35.6,9a1.61,1.61,0,0,0-1.05-.3,3.19,3.19,0,0,0-.94.14,4.44,4.44,0,0,0-1.07.54l-0.67-1a4.49,4.49,0,0,1,2.74-.87,3.26,3.26,0,0,1,2,.56A1.83,1.83,0,0,1,37.36,9.67Z" fill="#666"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect y="140" width="468" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect y="140" width="468" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="13" y="154" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="13" y="154" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M42,185l-1.93-4.94H33.85L31.94,185H30.11l6.14-15.61h1.52L43.89,185H42Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(11.25 151.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="145" y="154" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="145" y="154" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M174,185l-1.93-4.94h-6.23L163.94,185h-1.83l6.14-15.61h1.52L175.89,185H174Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(143.25 151.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="277" y="154" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="277" y="154" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M306,185l-1.93-4.94h-6.23L295.94,185h-1.83l6.14-15.61h1.52L307.89,185H306Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(275.25 151.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="409" y="154" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="409" y="154" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M438,185l-1.93-4.94h-6.23L427.94,185h-1.83l6.14-15.61h1.52L439.89,185H438Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(407.25 151.25)" xlink:href="#rnn-a"></use>
  </g>
  <g opacity="0.9">
    <use width="50.5" height="27.5" transform="translate(12 92)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(12 56)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.4">
    <use width="50.5" height="27.5" transform="translate(12 20)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(144 92)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.9">
    <use id="op-2-5" data-name="op-2" width="50.5" height="27.5" transform="translate(144 56)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(144 20)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.9">
    <use id="op-1-7" data-name="op-1" width="50.5" height="27.5" transform="translate(276 92)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(276 56)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(276 20)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(408 92)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(408 56)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.9">
    <use id="op-3-9" data-name="op-3" width="50.5" height="27.5" transform="translate(408 20)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(493 155.88)" font-size="13" font-family="Open Sans">At each step the <tspan x="0" y="20">controller RNN outputs a </tspan><tspan x="0" y="40">probability distribution.</tspan></text>
  </g>
  <g>
    <line x1="36" y1="152" x2="36" y2="127.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M36,122a27.2,27.2,0,0,0,4.28,7.69L36,128.14l-4.28,1.55A27.17,27.17,0,0,0,36,122Z" fill="#666"></path>
  </g>
  <g>
    <line x1="168" y1="152" x2="168" y2="127.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M168,122a27.2,27.2,0,0,0,4.28,7.69L168,128.14l-4.28,1.55A27.17,27.17,0,0,0,168,122Z" fill="#666"></path>
  </g>
  <g>
    <line x1="300" y1="152" x2="300" y2="127.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M300,122a27.2,27.2,0,0,0,4.28,7.69L300,128.14l-4.28,1.55A27.17,27.17,0,0,0,300,122Z" fill="#666"></path>
  </g>
  <g>
    <line x1="432" y1="152" x2="432" y2="127.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M432,122a27.2,27.2,0,0,0,4.28,7.69L432,128.14l-4.28,1.55A27.17,27.17,0,0,0,432,122Z" fill="#666"></path>
  </g>
  <g>
    <line x1="60" y1="176.5" x2="132.57" y2="176.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M138,176.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,138,176.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="192" y1="176.5" x2="264.57" y2="176.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M270,176.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,270,176.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="324" y1="176.5" x2="396.57" y2="176.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M402,176.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,402,176.5Z" fill="#666"></path>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>The resulting distribution over operations can now be evaluated. Instead of running a single operation at each step, we do the usual attention trick of running all of them and then average the outputs together, weighted by the probability we ran that operation.</p>

  <p></p><figure class="l-body">
    <dt-include src="assets/rnn_programmer_3.svg"><svg id="background" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 648 252">
  <defs>
    <clippath id="clip-path">
      <rect id="first-clip" x="60" y="10" width="84" height="144" fill="none"></rect>
    </clippath>
    <clippath id="clip-path-2">
      <polygon points="332 10 138 10 138 40 192 40 192 142 276 142 276 40 332 40 332 10" fill="none"></polygon>
    </clippath>
    <clippath id="clip-path-3">
      <polygon points="444 10 270 10 270 40 324 40 324 142 408 142 408 40 444 40 444 10" fill="none"></polygon>
    </clippath>
    <clippath id="clip-path-4">
      <rect x="456" y="10" width="60" height="120" fill="none"></rect>
    </clippath>
    <symbol id="rnn-bg" data-name="rnn-bg" viewBox="0 0 49.5 49.5">
      <rect x="0.75" y="0.75" width="48" height="48" rx="6" ry="6" fill="#fff" fill-opacity="0.8" stroke="#666" stroke-width="1.5"></rect>
    </symbol>
    <symbol id="rnn-a" data-name="rnn-a" viewBox="0 0 49.5 49.5">
      <use id="rnn-bg-3" data-name="rnn-bg" width="49.5" height="49.5" xlink:href="#rnn-bg"></use>
      <path d="M29.77,31.75l-1.93-4.94H21.6l-1.91,4.94H17.86L24,16.14h1.52l6.11,15.61H29.77Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z" fill="#666"></path>
    </symbol>
    <symbol id="op-1" data-name="op-1" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M35.86,16.27H34.49V10.74q0-1,0-1.57l-0.33.31-1.32,1.08L32.2,9.69l2.52-2h1.15v8.57Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-2" data-name="op-2" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12Zm-6.54,0a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.5,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.45,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.68V9.79H22.8q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.56,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.64,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.15,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.64,10.8Z" fill="#666"></path>
        <path d="M37.63,16.27H31.82v-1L34,13a18.79,18.79,0,0,0,1.3-1.42,3.39,3.39,0,0,0,.47-0.79A2.12,2.12,0,0,0,35.94,10a1.21,1.21,0,0,0-.35-0.91,1.34,1.34,0,0,0-1-.33,2.57,2.57,0,0,0-1,.18,4.46,4.46,0,0,0-1.06.66l-0.74-.91a4.8,4.8,0,0,1,1.39-.86,4.07,4.07,0,0,1,1.44-.25,2.82,2.82,0,0,1,1.92.62,2.11,2.11,0,0,1,.72,1.68,3,3,0,0,1-.21,1.1,4.48,4.48,0,0,1-.64,1.08A14.6,14.6,0,0,1,35,13.56L33.56,15v0.06h4.07v1.21Z" fill="#666"></path>
      </g>
    </symbol>
    <symbol id="op-3" data-name="op-3" viewBox="0 0 50.5 27.5">
      <g>
        <g opacity="0.1">
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12"></rect>
          <rect x="1.75" y="2.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
        <g>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="#d8c2f2"></rect>
          <rect x="0.75" y="0.75" width="48" height="24" rx="12" ry="12" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></rect>
        </g>
      </g>
      <g>
        <path d="M20,12a4.69,4.69,0,0,1-1,3.25,3.78,3.78,0,0,1-3,1.16,3.81,3.81,0,0,1-3-1.15A4.72,4.72,0,0,1,12,12a4.64,4.64,0,0,1,1-3.26,3.85,3.85,0,0,1,3-1.14,3.78,3.78,0,0,1,3,1.15A4.68,4.68,0,0,1,20,12ZM13.5,12a3.84,3.84,0,0,0,.64,2.4,2.25,2.25,0,0,0,1.89.82,2.25,2.25,0,0,0,1.88-.81A3.85,3.85,0,0,0,18.55,12a3.86,3.86,0,0,0-.63-2.39A2.23,2.23,0,0,0,16,8.77a2.27,2.27,0,0,0-1.9.81A3.8,3.8,0,0,0,13.5,12Z" fill="#666"></path>
        <path d="M25,16.39a2.27,2.27,0,0,1-1.91-.88H23q0.08,0.82.08,1v2.65H21.74V9.79h1.11q0,0.18.19,0.87h0.07a2.16,2.16,0,0,1,1.93-1,2.25,2.25,0,0,1,1.89.88A4,4,0,0,1,27.61,13a4,4,0,0,1-.69,2.48A2.27,2.27,0,0,1,25,16.39ZM24.69,10.8a1.43,1.43,0,0,0-1.2.48,2.49,2.49,0,0,0-.38,1.54V13a3,3,0,0,0,.38,1.71,1.39,1.39,0,0,0,1.22.53,1.24,1.24,0,0,0,1.1-.59A3,3,0,0,0,26.2,13a2.92,2.92,0,0,0-.38-1.65A1.28,1.28,0,0,0,24.69,10.8Z" fill="#666"></path>
        <path d="M37.36,9.67A2,2,0,0,1,36.88,11a2.39,2.39,0,0,1-1.34.73v0a2.59,2.59,0,0,1,1.55.64,1.84,1.84,0,0,1,.52,1.36,2.26,2.26,0,0,1-.87,1.91,4,4,0,0,1-2.48.67,5.59,5.59,0,0,1-2.4-.46V14.7a5.49,5.49,0,0,0,1.15.42,5,5,0,0,0,1.17.15,2.47,2.47,0,0,0,1.49-.37,1.34,1.34,0,0,0,.49-1.14,1.09,1.09,0,0,0-.54-1,3.48,3.48,0,0,0-1.71-.32H33.16V11.3h0.76Q36,11.3,36,9.88A1,1,0,0,0,35.6,9a1.61,1.61,0,0,0-1.05-.3,3.19,3.19,0,0,0-.94.14,4.44,4.44,0,0,0-1.07.54l-0.67-1a4.49,4.49,0,0,1,2.74-.87,3.26,3.26,0,0,1,2,.56A1.83,1.83,0,0,1,37.36,9.67Z" fill="#666"></path>
      </g>
    </symbol>
  </defs>
  <title>rnn</title>
  <g id="_Group_" data-name="<Group>">
    <rect y="166" width="468" height="72" rx="10" ry="10" fill="#f0f0f5"></rect>
    <g opacity="0.1">
      <rect y="166" width="468" height="72" rx="10" ry="10" fill="none" stroke="#231f20"></rect>
    </g>
  </g>
  <path d="M199.26,28h-103" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  <g clip-path="url(#clip-path)">
    <g opacity="0.9">
      <path d="M54,124h9c5,0,9-4.5,9-10V38A10,10,0,0,1,82,28h31.75" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M54,88h9c5,0,9-4.5,9-10V38A10,10,0,0,1,82,28h31.75" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.4">
      <path d="M54,52h9c5,0,9-4.5,9-10V38a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M150,124h-9c-4.95,0-9-4.5-9-10V38a10,10,0,0,0-10-10H94.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M150,88h-9c-4.95,0-9-4.5-9-10V38a10,10,0,0,0-10-10H94.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M150,52h-9c-4.95,0-9-4.5-9-10V38a10,10,0,0,0-10-10H90.25" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
  </g>
  <g clip-path="url(#clip-path-2)">
    <g opacity="0.2">
      <path d="M186,124h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M186,88h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M186,52h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M283.05,126H262a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H208.65" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M283.05,90H262a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H208.65" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M283.05,53H262a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H208.65" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M282.25,123h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H222.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M282.25,87h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H222.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M282.25,50h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H222.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <path d="M332.17,28H291.75a38.44,38.44,0,0,1-18.28-5.6l-1.18-.8A38.44,38.44,0,0,0,254,16H228.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
  </g>
  <g clip-path="url(#clip-path-3)">
    <g opacity="0.9">
      <path d="M318,124h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M318,88h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M318,52h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h31.7" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M415.05,126H394a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H339.83" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M415.05,90H394a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H339.83" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M415.05,54H394a10,10,0,0,1-10-10V38a10,10,0,0,0-10-10H339.83" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M414.25,123h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H354.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M414.25,87h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H354.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.9">
      <path d="M414.25,51h-9.12c-5,0-9.12-4.5-9.12-10V26a10,10,0,0,0-10-10H354.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
  </g>
  <g clip-path="url(#clip-path-4)">
    <g opacity="0.9">
      <g>
        <path d="M450,52h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10h26.27" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
        <path d="M509.75,16a27.2,27.2,0,0,0-7.69,4.28L503.61,16l-1.55-4.28A27.18,27.18,0,0,0,509.75,16Z" fill="#666"></path>
      </g>
    </g>
    <g opacity="0.2">
      <path d="M450,124h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10H498" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
    <g opacity="0.2">
      <path d="M450,88h9c5,0,9-4.5,9-10V26a10,10,0,0,1,10-10H498" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></path>
    </g>
  </g>
  <g id="_Group_2" data-name="<Group>">
    <g opacity="0.1">
      <rect x="13" y="180" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="13" y="180" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M42,211l-1.93-4.94H33.85L31.94,211H30.11l6.14-15.61h1.52L43.89,211H42Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(11.25 177.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="145" y="180" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="145" y="180" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M174,211l-1.93-4.94h-6.23L163.94,211h-1.83l6.14-15.61h1.52L175.89,211H174Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(143.25 177.25)" xlink:href="#rnn-a"></use>
  </g>
  <g>
    <g opacity="0.1">
      <rect x="277" y="180" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="277" y="180" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M306,211l-1.93-4.94h-6.23L295.94,211h-1.83l6.14-15.61h1.52L307.89,211H306Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(275.25 177.25)" xlink:href="#rnn-a"></use>
  </g>
  <g id="_Group_3" data-name="<Group>">
    <g opacity="0.1">
      <rect x="409" y="180" width="48" height="48" rx="6" ry="6" opacity="0.8"></rect>
      <rect x="409" y="180" width="48" height="48" rx="6" ry="6" fill="none" stroke="#000" stroke-width="1.5"></rect>
      <path d="M438,211l-1.93-4.94h-6.23L427.94,211h-1.83l6.14-15.61h1.52L439.89,211H438Zm-2.5-6.57-1.81-4.82q-0.35-.91-0.72-2.24a20.34,20.34,0,0,1-.67,2.24l-1.83,4.82h5Z"></path>
    </g>
    <use width="49.5" height="49.5" transform="translate(407.25 177.25)" xlink:href="#rnn-a"></use>
  </g>
  <g opacity="0.9">
    <use width="50.5" height="27.5" transform="translate(12 112)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(12 76)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.4">
    <use width="50.5" height="27.5" transform="translate(12 40)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(144 112)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.9">
    <use id="op-2-5" data-name="op-2" width="50.5" height="27.5" transform="translate(144 76)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(144 40)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.9">
    <use width="50.5" height="27.5" transform="translate(276 112)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(276 76)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(276 40)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(408 112)" xlink:href="#op-1"></use>
  </g>
  <g opacity="0.2">
    <use width="50.5" height="27.5" transform="translate(408 76)" xlink:href="#op-2"></use>
  </g>
  <g opacity="0.9">
    <use width="50.5" height="27.5" transform="translate(408 40)" xlink:href="#op-3"></use>
  </g>
  <g opacity="0.6">
    <text transform="translate(493 -84.12)" font-size="13" font-family="Open Sans">At each step the <tspan x="0" y="20">controller RNN outputs a </tspan><tspan x="0" y="40">probability distribution.</tspan></text>
  </g>
  <g opacity="0.6">
    <text transform="translate(495 181.88)" font-size="13" font-family="Open Sans">We run all of the <tspan x="0" y="20">operations and average </tspan><tspan x="0" y="40">the outputs together.</tspan></text>
  </g>
  <g>
    <line x1="60" y1="202.5" x2="132.57" y2="202.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M138,202.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,138,202.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="36" y1="178" x2="36" y2="149.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M36,144a27.2,27.2,0,0,0,4.28,7.69L36,150.14l-4.28,1.55A27.17,27.17,0,0,0,36,144Z" fill="#666"></path>
  </g>
  <g>
    <line x1="168" y1="178" x2="168" y2="149.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M168,144a27.2,27.2,0,0,0,4.28,7.69L168,150.14l-4.28,1.55A27.17,27.17,0,0,0,168,144Z" fill="#666"></path>
  </g>
  <g>
    <line x1="300" y1="178" x2="300" y2="149.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M300,144a27.2,27.2,0,0,0,4.28,7.69L300,150.14l-4.28,1.55A27.17,27.17,0,0,0,300,144Z" fill="#666"></path>
  </g>
  <g>
    <line x1="432" y1="178" x2="432" y2="149.43" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M432,144a27.2,27.2,0,0,0,4.28,7.69L432,150.14l-4.28,1.55A27.17,27.17,0,0,0,432,144Z" fill="#666"></path>
  </g>
  <g>
    <line x1="192" y1="202.5" x2="264.57" y2="202.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M270,202.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,270,202.5Z" fill="#666"></path>
  </g>
  <g>
    <line x1="324" y1="202.5" x2="396.57" y2="202.5" fill="none" stroke="#666" stroke-miterlimit="10" stroke-width="1.5"></line>
    <path d="M402,202.5a27.2,27.2,0,0,0-7.69,4.28l1.55-4.28-1.55-4.28A27.18,27.18,0,0,0,402,202.5Z" fill="#666"></path>
  </g>
</svg>
</dt-include>
  </figure><p></p>

  <p>As long as we can define derivatives through the operations, the program's output is differentiable with respect to the probabilities. We can then define a loss, and train the neural net to produce programs that give the correct answer. In this way, the Neural Programmer learns to produce programs without examples of good programs. The only supervision is the answer the program should produce.</p>

  <p>That's the core idea of Neural Programmer, but the version in the paper answers questions about tables, rather than arithmetic expressions. There are a few additional neat tricks:</p>

  <ul>
  <li><p><strong>Multiple Types:</strong> Many of the operations in the Neural Programmer deal with types other than scalar numbers. Some operations output selections of table columns or selections of cells. <!-- footnote? (To allow us to backprop through the selecting things and average selections, we allow things to be selected to different extents, with 0 as unselected and 1 as fully selected.) --> Only outputs of the same type get merged together.</p></li>
  <li><p><strong>Referencing Inputs:</strong> The neural programmer needs to answer questions like "How many cities have a population greater than 1,000,000?" given a table of cities with a population column. To facilitate this, some operations allow the network to reference constants in the question they're answering, or the names of columns. This referencing happens by attention, in the style of pointer networks <dt-cite key="vinyals2015pointer"></dt-cite>. <!-- For example, in order to use the *Greater* operation, the controller must select a value that table entries are greater than; instead of using a previous scalar value it's computed, it has the controller select a value in the question using attention. --></p></li>
  </ul>

  <p>The Neural Programmer isn't the only approach to having neural networks generate programs. Another lovely approach is the Neural Programmer-Interpreter <dt-cite key="reed2015neural"></dt-cite> which can accomplish a number of very interesting tasks, but requires supervision in the form of correct programs.</p>

  <p>We think that this general space, of bridging the gap between more traditional programming and neural networks is extremely important. While the Neural Programmer is clearly not the final solution, we think there are a lot of important lessons to be learned from it.</p>

  <h3>Code</h3>

  <p>The more recent version of Neural Programmer for <a href="https://openreview.net/pdf?id=ry2YOrcge">question answering</a> has been open sourced by its authors and is available as a <a href="https://github.com/tensorflow/models/tree/master/research/neural_programmer">TensorFlow Model</a>. There is also an implementation of the Neural Programmer-Interpreter by <a href="https://github.com/mokemokechicken/keras_npi">Ken Morishita</a> (Keras).</p>

  <hr>

  <h2>The Big Picture</h2>

  <p>A human with a piece of paper is, in some sense, much smarter than a human without. A human with mathematical notation can solve problems they otherwise couldn't. Access to computers makes us capable of incredible feats that would otherwise be far beyond us.</p>

  <p>In general, it seems like a lot of interesting forms of intelligence are an interaction between the creative heuristic intuition of humans and some more crisp and careful media, like language or equations. Sometimes, the medium is something that physically exists, and stores information for us, prevents us from making mistakes, or does computational heavy lifting. In other cases, the medium is a model in our head that we manipulate. Either way, it seems deeply fundamental to intelligence.</p>

  <p>Recent results in machine learning have started to have this flavor, combining the intuition of neural networks with something else. One approach is what one might call "heuristic search." For example, AlphaGo <dt-cite key="silver2016mastering"></dt-cite> has a model of how Go works and explores how the game could play out guided by neural network intuition. Similarly, DeepMath <dt-cite key="alemi2016deepmath"></dt-cite> uses neural networks as intuition for manipulating mathematical expressions. The "augmented RNNs" we've talked about in this article are another approach, where we connect RNNs to engineered media, in order to extend their general capabilities.</p>

  <p>Interacting with media naturally involves making a sequence of taking an action, observing, and taking more actions. This creates a major challenge: how do we learn which actions to take? That sounds like a reinforcement learning problem and we could certainly take that approach. But the reinforcement learning literature is really attacking the hardest version of this problem, and its solutions are hard to use. The wonderful thing about attention is that it gives us an easier way out of this problem by partially taking all actions to varying extents. This works because we can design media--like the NTM memory--to allow fractional actions and to be differentiable. Reinforcement learning has us take a single path, and try to learn from that. Attention takes every direction at a fork, and then merges the paths back together.</p>

  <p>A major weaknesses of attention is that we have to take every "action" every step. This causes the computational cost to grow linearly as you do things like increase the amount of memory in a Neural Turing Machine. One thing you could imagine doing is having your attention be sparse, so that you only have to touch some memories. However, it's still challenging because you may want to do things like have your attention depend on the content of the memory, and doing that naively forces you to look at each memory. We've seen some initial attempts to attack this problem, such as <dt-cite key="andrychowicz2016learning"></dt-cite>, but it seems like there's a lot more to be done. If we could really make such sub-linear time attention work, that would be very powerful!</p>

  <p>Augmented recurrent neural networks, and the underlying technique of attention, are incredibly exciting. We look forward to seeing what happens next!</p>


</dt-article>

<!-- Appendix -->
<dt-appendix class="centered">
  <h3>Acknowledgments</h3>
  <p>Thank you to Maithra Raghu, Dario Amodei, Cassandra Xia, Luke Vilnis, Anna Goldie, Jesse Engel, Dan Mané, Natasha Jaques, Emma Pierson and Ian Goodfellow for their feedback and encouragement. We're also very grateful to our team, <a href="http://g.co/brain">Google Brain</a>, for being extremely supportive of our project.</p>

</dt-appendix>
<dt-footer></dt-footer>
<script type="text/bibliography">
@article{alemi2016deepmath,
  author    = {Alex A. Alemi and
               Fran{\c{c}}ois Chollet and
               Geoffrey Irving and
               Christian Szegedy and
               Josef Urban},
  title     = {DeepMath - Deep Sequence Models for Premise Selection},
  journal   = {CoRR},
  volume    = {abs/1606.04442},
  year      = {2016},
  url       = {http://arxiv.org/abs/1606.04442},
  timestamp = {Fri, 01 Jul 2016 17:39:49 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/AlemiCISU16},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{andrychowicz2016learning,
  author    = {Marcin Andrychowicz and
               Karol Kurach},
  title     = {Learning Efficient Algorithms with Hierarchical Attentive Memory},
  journal   = {CoRR},
  volume    = {abs/1602.03218},
  year      = {2016},
  url       = {http://arxiv.org/abs/1602.03218},
  timestamp = {Tue, 01 Mar 2016 17:47:25 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/AndrychowiczK16},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{bahdanau2014neural,
  title={Neural machine translation by jointly learning to align and translate},
  author={Bahdanau, Dzmitry and Cho, Kyunghyun and Bengio, Yoshua},
  journal={arXiv preprint arXiv:1409.0473},
  year={2014}
}

@article{chan2015listen,
  author    = {William Chan and
               Navdeep Jaitly and
               Quoc V. Le and
               Oriol Vinyals},
  title     = {Listen, Attend and Spell},
  journal   = {CoRR},
  volume    = {abs/1508.01211},
  year      = {2015},
  url       = {http://arxiv.org/abs/1508.01211},
  timestamp = {Tue, 01 Sep 2015 14:42:40 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/ChanJLV15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{dzmitry2014neural,
  author    = {Dzmitry Bahdanau and
               Kyunghyun Cho and
               Yoshua Bengio},
  title     = {Neural Machine Translation by Jointly Learning to Align and Translate},
  journal   = {CoRR},
  volume    = {abs/1409.0473},
  year      = {2014},
  url       = {http://arxiv.org/abs/1409.0473},
  timestamp = {Wed, 01 Oct 2014 15:00:04 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/BahdanauCB14},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{graves2014neural,
  author    = {Alex Graves and
               Greg Wayne and
               Ivo Danihelka},
  title     = {Neural Turing Machines},
  journal   = {CoRR},
  volume    = {abs/1410.5401},
  year      = {2014},
  url       = {http://arxiv.org/abs/1410.5401},
  timestamp = {Sun, 02 Nov 2014 11:25:59 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/GravesWD14},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{graves2016adaptive,
  author    = {Alex Graves},
  title     = {Adaptive Computation Time for Recurrent Neural Networks},
  journal   = {CoRR},
  volume    = {abs/1603.08983},
  year      = {2016},
  url       = {http://arxiv.org/abs/1603.08983},
  timestamp = {Sat, 02 Apr 2016 11:49:48 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/Graves16},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@incollection{grefenstette2015learning,
  title = {Learning to Transduce with Unbounded Memory},
  author = {Grefenstette, Edward and Hermann, Karl Moritz and Suleyman, Mustafa and Blunsom, Phil},
  booktitle = {Advances in Neural Information Processing Systems 28},
  editor = {C. Cortes and N. D. Lawrence and D. D. Lee and M. Sugiyama and R. Garnett},
  pages = {1828--1836},
  year = {2015},
  publisher = {Curran Associates, Inc.},
  url = {http://papers.nips.cc/paper/5648-learning-to-transduce-with-unbounded-memory.pdf}
}

@incollection{joulin2015inferring,
  title = {Inferring Algorithmic Patterns with Stack-Augmented Recurrent Nets},
  author = {Joulin, Armand and Mikolov, Tomas},
  booktitle = {Advances in Neural Information Processing Systems 28},
  editor = {C. Cortes and N. D. Lawrence and D. D. Lee and M. Sugiyama and R. Garnett},
  pages = {190--198},
  year = {2015},
  publisher = {Curran Associates, Inc.},
  url = {http://papers.nips.cc/paper/5857-inferring-algorithmic-patterns-with-stack-augmented-recurrent-nets.pdf}
}

@article{kaiser2015neural,
  author    = {Lukasz Kaiser and
               Ilya Sutskever},
  title     = {Neural GPUs Learn Algorithms},
  journal   = {CoRR},
  volume    = {abs/1511.08228},
  year      = {2015},
  url       = {http://arxiv.org/abs/1511.08228},
  timestamp = {Tue, 01 Dec 2015 19:22:34 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/KaiserS15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{kumar2015ask,
  author    = {Ankit Kumar and
               Ozan Irsoy and
               Jonathan Su and
               James Bradbury and
               Robert English and
               Brian Pierce and
               Peter Ondruska and
               Ishaan Gulrajani and
               Richard Socher},
  title     = {Ask Me Anything: Dynamic Memory Networks for Natural Language Processing},
  journal   = {CoRR},
  volume    = {abs/1506.07285},
  year      = {2015},
  url       = {http://arxiv.org/abs/1506.07285},
  timestamp = {Wed, 01 Jul 2015 15:10:24 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/KumarISBEPOGS15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{kurach2015neural,
  author    = {Karol Kurach and
               Marcin Andrychowicz and
               Ilya Sutskever},
  title     = {Neural Random-Access Machines},
  journal   = {CoRR},
  volume    = {abs/1511.06392},
  year      = {2015},
  url       = {http://arxiv.org/abs/1511.06392},
  timestamp = {Tue, 01 Dec 2015 19:22:34 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/KurachAS15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{neelakantan2015neural,
  author    = {Arvind Neelakantan and
               Quoc V. Le and
               Ilya Sutskever},
  title     = {Neural Programmer: Inducing Latent Programs with Gradient Descent},
  journal   = {CoRR},
  volume    = {abs/1511.04834},
  year      = {2015},
  url       = {http://arxiv.org/abs/1511.04834},
  timestamp = {Tue, 01 Dec 2015 19:22:34 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/NeelakantanLS15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{olah2015understanding,
  title={Understanding LSTM Networks},
  author={Olah, Christopher},
  url={http://colah.github.io/posts/2015-08-Understanding-LSTMs},
  year={2015}
}

@article{reed2015neural,
  author    = {Scott E. Reed and
               Nando de Freitas},
  title     = {Neural Programmer-Interpreters},
  journal   = {CoRR},
  volume    = {abs/1511.06279},
  year      = {2015},
  url       = {http://arxiv.org/abs/1511.06279},
  timestamp = {Fri, 08 Apr 2016 07:34:31 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/ReedF15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{silver2016mastering,
  doi = {10.1038/nature16961},
  url = {http://dx.doi.org/10.1038/nature16961},
  year = 2016,
  month = {jan},
  publisher = {Nature Publishing Group},
  volume = {529},
  number = {7587},
  pages = {484--489},
  author = {David Silver and Aja Huang and Chris J. Maddison and Arthur Guez and Laurent Sifre and George van den Driessche and Julian Schrittwieser and Ioannis Antonoglou and Veda Panneershelvam and Marc Lanctot and Sander Dieleman and Dominik Grewe and John Nham and Nal Kalchbrenner and Ilya Sutskever and Timothy Lillicrap and Madeleine Leach and Koray Kavukcuoglu and Thore Graepel and Demis Hassabis},
  title = {Mastering the game of Go with deep neural networks and tree search},
  journal = {Nature}
}

@article{vinyals2015neural,
  author    = {Oriol Vinyals and
               Quoc V. Le},
  title     = {A Neural Conversational Model},
  journal   = {CoRR},
  volume    = {abs/1506.05869},
  year      = {2015},
  url       = {http://arxiv.org/abs/1506.05869},
  timestamp = {Wed, 01 Jul 2015 15:10:24 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/VinyalsL15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{weston2014memory,
  author    = {Jason Weston and
               Sumit Chopra and
               Antoine Bordes},
  title     = {Memory Networks},
  journal   = {CoRR},
  volume    = {abs/1410.3916},
  year      = {2014},
  url       = {http://arxiv.org/abs/1410.3916},
  timestamp = {Sun, 02 Nov 2014 11:25:59 +0100},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/WestonCB14},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@article{xu2015show,
  title={Show, attend and tell: Neural image caption generation with visual attention},
  author={Xu, Kelvin and Ba, Jimmy and Kiros, Ryan and Cho, Kyunghyun and Courville, Aaron and Salakhutdinov, Ruslan and Zemel, Richard S and Bengio, Yoshua},
  journal={arXiv preprint arXiv:1502.03044},
  volume={2},
  number={3},
  pages={5},
  year={2015},
  publisher={CoRR}
}

@article{zaremba2015reinforcement,
  author    = {Wojciech Zaremba and
               Ilya Sutskever},
  title     = {Reinforcement Learning Neural Turing Machines},
  journal   = {CoRR},
  volume    = {abs/1505.00521},
  year      = {2015},
  url       = {http://arxiv.org/abs/1505.00521},
  timestamp = {Mon, 01 Jun 2015 14:13:54 +0200},
  biburl    = {http://dblp.uni-trier.de/rec/bib/journals/corr/ZarembaS15},
  bibsource = {dblp computer science bibliography, http://dblp.org}
}

@inproceedings{vinyals2015grammar,
  title={Grammar as a foreign language},
  author={Vinyals, Oriol and Kaiser, {\L}ukasz and Koo, Terry and Petrov, Slav and Sutskever, Ilya and Hinton, Geoffrey},
  booktitle={Advances in Neural Information Processing Systems},
  pages={2773--2781},
  year={2015}
}

@inproceedings{vinyals2015pointer,
  title={Pointer networks},
  author={Vinyals, Oriol and Fortunato, Meire and Jaitly, Navdeep},
  booktitle={Advances in Neural Information Processing Systems},
  pages={2692--2700},
  year={2015}
}

</script>
</body></html>